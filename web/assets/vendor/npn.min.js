var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,d,f){c instanceof String&&(c=String(c));for(var e=c.length,b=0;b<e;b++){var a=c[b];if(d.call(f,a,b,c))return{i:b,v:a}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,f){if(c==Array.prototype||c==Object.prototype)return c;c[d]=f.value;return c};$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,d){var f=$jscomp.propertyToPolyfillSymbol[d];if(null==f)return c[d];f=c[f];return void 0!==f?f:c[d]};
$jscomp.polyfill=function(c,d,f,e){d&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,d,f,e):$jscomp.polyfillUnisolated(c,d,f,e))};$jscomp.polyfillUnisolated=function(c,d,f,e){f=$jscomp.global;c=c.split(".");for(e=0;e<c.length-1;e++){var b=c[e];if(!(b in f))return;f=f[b]}c=c[c.length-1];e=f[c];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:d})};
$jscomp.polyfillIsolated=function(c,d,f,e){var b=c.split(".");c=1===b.length;e=b[0];e=!c&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var a=0;a<b.length-1;a++){var g=b[a];if(!(g in e))return;e=e[g]}b=b[b.length-1];f=$jscomp.IS_SYMBOL_NATIVE&&"es6"===f?e[b]:null;d=d(f);null!=d&&(c?$jscomp.defineProperty($jscomp.polyfills,b,{configurable:!0,writable:!0,value:d}):d!==f&&($jscomp.propertyToPolyfillSymbol[b]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(b):$jscomp.POLYFILL_PREFIX+b,b=
$jscomp.propertyToPolyfillSymbol[b],$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:d})))};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(d,f){return $jscomp.findInternal(this,d,f).v}},"es6","es3");
$jscomp.checkStringArgs=function(c,d,f){if(null==c)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(d,f){var e=$jscomp.checkStringArgs(this,d,"startsWith");d+="";var b=e.length,a=d.length;f=Math.max(0,Math.min(f|0,e.length));for(var g=0;g<a&&f<b;)if(e[f++]!=d[g++])return!1;return g>=a}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(d,f){var e=$jscomp.checkStringArgs(this,d,"endsWith");d+="";void 0===f&&(f=e.length);f=Math.max(0,Math.min(f|0,e.length));for(var b=d.length;0<b&&0<f;)if(e[--f]!=d[--b])return!1;return 0>=b}},"es6","es3");$jscomp.arrayIteratorImpl=function(c){var d=0;return function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(c){if(c)return c;var d=function(b,a){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};d.prototype.toString=function(){return this.$jscomp$symbol$id_};var f=0,e=function(b){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new d("jscomp_symbol_"+(b||"")+"_"+f++,b)};return e},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var d="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),f=0;f<d.length;f++){var e=$jscomp.global[d[f]];"function"===typeof e&&"function"!=typeof e.prototype[c]&&$jscomp.defineProperty(e.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return c},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,d){c instanceof String&&(c+="");var f=0,e={next:function(){if(f<c.length){var b=f++;return{value:d(b,c[b]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");var dom;
(function(c){function d(a,g){var h=[];(g?g.querySelectorAll(a):document.querySelectorAll(a)).forEach(function(k){h.push(k)});return h}function f(a,g){g=d(a,g);switch(g.length){case 0:break;case 1:return g[0];default:console.warn("found ["+g.length+"] elements with selector ["+a+"], wanted zero or one")}}function e(a,g){(g=f(a,g))||console.warn("no element found for selector ["+a+"]");return g}function b(a,g){"string"===typeof a&&(a=e(a));a.innerHTML=g;return a}c.initDom=function(a,g){try{style.themeLinks(g),
style.setTheme(a)}catch(h){console.warn("error setting style",h)}try{modal.wire()}catch(h){console.warn("error wiring modals",h)}try{drop.wire()}catch(h){console.warn("error wiring drops",h)}try{tags.wire()}catch(h){console.warn("error wiring tag editors",h)}try{flash.wire()}catch(h){console.warn("error wiring tag editors",h)}};c.els=d;c.opt=f;c.req=e;c.setHTML=b;c.setDisplay=function(a,g,h){void 0===h&&(h="block");"string"===typeof a&&(a=e(a));a.style.display=g?h:"none";return a};c.setContent=function(a,
g){"string"===typeof a&&(a=e(a));c.clear(a);Array.isArray(g)?g.forEach(function(h){return a.appendChild(h)}):a.appendChild(g);return a};c.setText=function(a,g){"string"===typeof a&&(a=e(a));a.innerText=g;return a};c.clear=function(a){return b(a,"")}})(dom||(dom={}));
(function(c){c.setValue=function(d,f){"string"===typeof d&&(d=c.req(d));d.value=f;return d};c.wireTextarea=function(d){function f(){d.style.height="auto";d.style.height=(64>d.scrollHeight?64:d.scrollHeight+6)+"px"}function e(){window.setTimeout(f,0)}d.dataset.autoresize||(d.dataset.autoresize="true",d.addEventListener("change",f,!1),d.addEventListener("cut",e,!1),d.addEventListener("paste",e,!1),d.addEventListener("drop",e,!1),d.addEventListener("keydown",e,!1),d.focus(),d.select());f()};c.setOptions=
function(d,f){"string"===typeof d&&(d=c.req(d));c.clear(d);f.forEach(function(e){var b=document.createElement("option");b.value=e;c.setText(b,e);d.appendChild(b)})};c.setSelectOption=function(d,f){"string"===typeof d&&(d=c.req(d));for(var e=0;e<d.children.length;e++){var b=d.children.item(e);b.selected=b.value===f}};c.insertAtCaret=function(d,f){if(d.selectionStart||0===d.selectionStart){var e=d.selectionStart,b=d.selectionEnd;c.setValue(d,d.value.substring(0,e)+f+d.value.substring(b,d.value.length));
d.selectionStart=e+f.length;d.selectionEnd=e+f.length}else d.value+=f}})(dom||(dom={}));
function JSX(c,d){var f=document.createElement(c);for(b in d)if(b&&d.hasOwnProperty(b)){var e=d[b];"dangerouslySetInnerHTML"===b?dom.setHTML(f,e.__html):!0===e?f.setAttribute(b,b):!1!==e&&null!==e&&void 0!==e&&f.setAttribute(b,e.toString())}var b=function(g){var h=a[g];if(Array.isArray(h))h.forEach(function(k){if(void 0===h||null===h)throw"child array for tag ["+c+"] is "+h+"\n"+f.outerHTML;if(void 0===k||null===k)throw"child for tag ["+c+"] is "+k+"\n"+f.outerHTML;"string"===typeof k&&(k=document.createTextNode(k));
f.appendChild(k)});else{if(void 0===h||null===h)throw"child for tag ["+c+"] is "+h+"\n"+f.outerHTML;h.nodeType||(h=document.createTextNode(h.toString()));f.appendChild(h)}};var a=arguments;for(e=2;e<arguments.length;e++)b(e);return f}var style;
(function(c){function d(e){f(e);switch(e){case "auto":e="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark");d(e);fetch("/profile/theme/"+e).then(function(b){return b.text()}).then(function(){});break;case "light":document.documentElement.classList.remove("uk-light");document.body.classList.remove("uk-light");document.documentElement.classList.add("uk-dark");document.body.classList.add("uk-dark");break;case "dark":document.documentElement.classList.add("uk-light");
document.body.classList.add("uk-light");document.documentElement.classList.remove("uk-dark");document.body.classList.remove("uk-dark");break;default:console.warn("invalid theme")}}function f(e){if("undefined"===typeof EmojiButton)dom.els(".picker-toggle").forEach(function(a){return dom.setDisplay(a,!1)});else{var b={position:"bottom-end",theme:e,zIndex:1021};dom.els(".textarea-emoji").forEach(function(a){var g=dom.req(".picker-toggle",a);g.addEventListener("click",function(){var h=dom.req(".uk-textarea",
a),k=new EmojiButton(b);k.on("emoji",function(l){drop.onEmojiPicked();dom.insertAtCaret(h,l)});k.togglePicker(g)},!1)})}}c.setTheme=d;c.linkColor="";c.themeLinks=function(e){c.linkColor=e+"-fg";dom.els(".theme").forEach(function(b){b.classList.add(c.linkColor)})}})(style||(style={}));var drop;
(function(c){function d(a){if(a.target){var g=a.target;a=g.dataset.key||"";g=g.dataset.t||"";var h=events.getOpenEvent(a);h?h(g):console.warn("no drop open handler registered for ["+a+"]")}}function f(a){if(a.target){var g=a.target;g.classList.contains("uk-open")&&(a=g.dataset.t||"",(g=events.getCloseEvent(g.dataset.key||""))&&g(a))}}function e(a){b&&a.preventDefault()}c.wire=function(){dom.els(".drop").forEach(function(a){a.addEventListener("show",d);a.addEventListener("beforehide",e);a.addEventListener("hide",
f)})};var b=!1;c.onEmojiPicked=function(){b=!0;setTimeout(function(){return b=!1},200)}})(drop||(drop={}));var events;(function(c){var d,f;c.register=function(e,b,a){d||(d=new map.Map);f||(f=new map.Map);b||(b=function(){});d.set(e,b);a&&f.set(e,a)};c.getOpenEvent=function(e){return d.get(e)};c.getCloseEvent=function(e){return f.get(e)}})(events||(events={}));var flash;
(function(c){function d(){var e=!1;dom.els(".alert-top").forEach(function(b){e=!0;b.classList.add("uk-animation-fade","uk-animation-reverse")});e&&setTimeout(f,1E3)}function f(){dom.els(".alert-top").forEach(function(e){e.remove()})}c.wire=function(){setTimeout(d,4E3)}})(flash||(flash={}));var modal;
(function(c){function d(a,g){b=g;notify.modal("#modal-"+a).show();return!1}function f(a){if(a.target&&(a=a.target,0===a.id.indexOf("modal"))){a=a.id.substr(6);var g=events.getOpenEvent(a);g?g(b):console.warn("no modal open handler registered for ["+a+"]");b=void 0}}function e(a){a.target&&(a=a.target,a.classList.contains("uk-open")&&(a=a.id.substr(6),(a=events.getCloseEvent(a))&&a(b),b=void 0))}var b;c.wire=function(){dom.els(".modal").forEach(function(a){a.addEventListener("show",f);a.addEventListener("hide",
e)})};c.open=d;c.openSoon=function(a){setTimeout(function(){return d(a)},0)};c.hide=function(a){a=notify.modal("#modal-"+a);a.$el.classList.contains("uk-open")&&a.hide()}})(modal||(modal={}));var tags;
(function(c){function d(b){var a=dom.req(".value",b),g=dom.req(".editor",b);dom.setDisplay(a,!1);dom.setDisplay(g,!0);var h=c.renderInput(a.innerText);h.onblur=function(){a.innerText=h.value;dom.setDisplay(a,!0);dom.setDisplay(g,!1);e(b.parentElement)};h.onkeypress=function(k){return"Enter"===k.key?(h.blur(),!1):!0};dom.setContent(g,h);h.focus()}function f(b){b.target?e(b.target):console.warn("no event target")}function e(b){var a=b.dataset.key||"",g=events.getOpenEvent(a);g?g():console.warn("no tag open handler registered for ["+
a+"]");b=dom.els(".item",b).map(function(h){return h.innerText});dom.setValue("#model-"+a+"-input",b.join(","))}c.wire=function(){dom.els(".tag-editor").forEach(function(b){b.addEventListener("moved",f);b.addEventListener("added",f);b.addEventListener("removed",f)})};c.removeTag=function(b){b=b.parentElement;var a=b.parentElement;b.remove();e(a)};c.addTag=function(b){if(b=b.parentElement){var a=c.renderItem();b.insertBefore(a,dom.req(".add-item",b));d(a)}};c.editTag=d})(tags||(tags={}));
(function(c){c.renderInput=function(d){return JSX("input",{type:"text",class:"uk-input",value:d})};c.renderItem=function(){return JSX("span",{class:"item"},JSX("span",{class:"value",onclick:"tags.editTag(this.parentElement);"}),JSX("span",{class:"editor"}),JSX("span",{class:"close","data-uk-icon":"icon: close; ratio: 0.6;",onclick:"tags.removeTag(this);"}))};c.renderTagsView=function(d){return JSX("div",{class:"tag-view"},d.map(function(f){return JSX("span",{class:"item"},f)}),JSX("div",{class:"clear"}))}})(tags||
(tags={}));var socket;(function(c){c.initBypass=function(){c.bypass=!0;c.connected=!0;nav.enabled=!1};c.bypassSend=function(d){c.debug&&console.debug("out",d);npn_handler?npn_handler(JSON.stringify(d,null,2)):console.warn("no bypass handler configured")}})(socket||(socket={}));(function(c){c.debug=!0;c.appUnloading=!1;c.currentService="";c.currentID="";c.bypass=!1;c.setAppUnloading=function(){c.appUnloading=!0};c.send=function(d){c.bypass?c.bypassSend(d):c.socketSend(d)}})(socket||(socket={}));
(function(c){function d(){var u=document.location,w="ws";"https:"===u.protocol&&(w="wss");0!=t.indexOf("/")&&(t="/"+t);return w+("://"+u.host+t)}function f(){g=new WebSocket(d());g.onopen=b;g.onmessage=function(u){return m(json.parse(u.data))};g.onerror=function(u){return q("socket",u.type)};g.onclose=a}function e(u,w,n){c.currentService=u;c.currentID=w;c.connectTime=Date.now();if(!m)throw"onMessage not initialized";n?c.initBypass():f()}function b(){log.info("socket connected");c.connected=!0;h=1;
k.forEach(c.send);k=[];l(c.currentID)}function a(){function u(){c.connected=!1;var w=Date.now()-c.connectTime;2E3>w?(h*=2,c.debug&&console.debug("socket closed immediately, reconnecting in "+h+" seconds"),setTimeout(function(){e(c.currentService,c.currentID)},1E3*h)):(log.info("socket closed after ["+w+"ms]"),e(c.currentService,c.currentID))}c.appUnloading||u()}var g;c.connected=!1;var h=0,k=[],l,m,q,t="/s";c.init=function(u,w,n,r){l=u;m=w;q=n;r&&(t=r)};c.initSocket=f;c.socketConnect=e;c.socketSend=
function(u){c.debug&&console.debug("out",u);c.connected?(u=json.str(u),g.send(u)):k.push(u)}})(socket||(socket={}));var profile;
(function(c){c.setNavColor=function(d,f){dom.setValue("#nav-color",f);dom.req("#navbar").className=f+"-bg uk-navbar-container uk-navbar";document.querySelectorAll(".nav_swatch").forEach(function(e){e.classList.remove("active")});d.classList.add("active")};c.setLinkColor=function(d,f){dom.setValue("#link-color",f);dom.els(".profile-link").forEach(function(e){e.classList.forEach(function(b){-1<b.indexOf("-fg")&&e.classList.remove(b);e.classList.add(f+"-fg")})});document.querySelectorAll(".link_swatch").forEach(function(e){e.classList.remove("active")});
d.classList.add("active")};c.setPicture=function(d){dom.setValue("#self-picture-input",d);return!1}})(profile||(profile={}));var arr;(function(c){c.find=function(d,f){for(var e=d.length>>>0,b=0;b<e;){var a=d[b];if(f(b,a))return a;b++}}})(arr||(arr={}));var date;
(function(c){function d(b){return b.toLocaleDateString()}function f(b){return b.toLocaleTimeString().slice(0,8)}c.dateToYMD=function(b){var a=b.getDate(),g=b.getMonth()+1;return b.getFullYear()+"-"+(9>=g?"0"+g:g)+"-"+(9>=a?"0"+a:a)};c.dateFromYMD=function(b){b=new Date(b);return new Date(b.getTime()+6E4*b.getTimezoneOffset())};c.dow=function(b){switch(b){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}};
c.toDateString=d;c.toTimeString=f;c.toDateTimeString=function(b){return d(b)+" "+f(b)};var e=6E4*(new Date).getTimezoneOffset();c.utcDate=function(b){return new Date(Date.parse(b)+e)}})(date||(date={}));var group;
(function(c){function d(a,g){if(!a)return[];a.sort(function(h,k){h=g(h);k=g(k);return h>k?1:h<k?-1:0});return a}function f(a,g,h){if(!a)return[g];var k=!1,l=h(g),m;for(m in a)h(a[m])==l&&(k=!0,a[m]=g);k||a.push(g);return a}var e=function(){return function(a){this.members=[];this.key=a}}();c.Group=e;var b=function(){function a(){this.groups=[]}a.prototype.findOrInsert=function(g){var h=arr.find(this.groups,function(k,l){return l.key===g});if(h)return h;h=new e(g);this.groups.push(h);return h};return a}();
c.GroupSet=b;c.groupBy=function(a,g){var h=new b;a&&a.forEach(function(k){h.findOrInsert(g(k)).members.push(k)});return h};c.findGroup=function(a,g){for(var h=0;h<a.length;h++){var k=a[h];if(k.key===g)return k.members}return[]};c.flatten=function(a){var g=[];a.forEach(function(h){return g.push.apply(g,h)});return g};c.sort=d;c.update=f;c.updateAndSort=function(a,g,h){return d(f(a,g,h),h)};c.remove=function(a,g,h){return a?a.filter(function(k){return h(k)!=g}):[]}})(group||(group={}));var json;
(function(c){c.str=function(d){return void 0===d?"null":JSON.stringify(d,null,2)};c.parse=function(d){return JSON.parse(d)}})(json||(json={}));var log;
(function(c){function d(g,h){if(0===e)console.warn("call `log.init()` before attempting to log");else{var k=Date.now()-e;k=JSX("li",{class:f(g)},JSX("div",{class:"right"},k,"ms"),h);if(!a&&(a=dom.opt("#log-list"),!a)){console.warn(g+": "+h);return}a.appendChild(k);b||(b=dom.req("#log-content"));b.scrollTo(0,b.scrollHeight)}}function f(g){switch(g){case "debug":return"grey-fg";case "info":return"";case "warn":return"yellow-fg";case "error":return"red-fg";default:return""}}var e=0,b,a;c.init=function(){e=
Date.now();d("debug","npn started")};c.info=function(g){d("info",g)};c.l=d;c.toggle=function(){var g=dom.req("#workspace-content"),h=dom.req("#log-container"),k=""!==h.style.display&&"none"!==h.style.display;k?g.classList.remove("log-visible"):g.classList.add("log-visible");dom.setDisplay(h,!k);b||(b=dom.req("#log-content"));b.scrollTo(0,b.scrollHeight)}})(log||(log={}));var map;
(function(c){var d=function(){function f(){this.storage=Object.create(null)}f.prototype.get=function(e){return this.storage[e]};f.prototype.set=function(e,b){return this.storage[e]=b};f.prototype.del=function(e){delete this.storage[e]};return f}();c.Map=d})(map||(map={}));var nav;
(function(c){function d(b){var a=f(b);b=a[0];a=a[1];if(!c.enabled)return e(b,a),"";if(str.startsWith(b,"text/html;"))return"";str.startsWith(b,"/")&&(b=b.substr(1));var g=location.pathname;str.startsWith(g,"/")&&(g=g.substr(1));g!==b&&(g=b,history.pushState(g,"","/"+g));e(b,a)}function f(b){var a="",g=b.indexOf("#");-1<g&&(a=b.substr(g+1),b=b.substr(0,g));return[b,a]}c.enabled=!0;var e=function(b,a){console.warn("default nav handler called: "+b+(0<a.length?"#"+a:""))};c.init=function(b){e=b;window.onpopstate=
function(a){a.state?(a=f(a.state),e(a[0],a[1])):e("","")};d(location.pathname+(0<location.hash.length?location.hash:""))};c.navigate=d;c.pop=function(){var b=location.pathname.substr(0,location.pathname.lastIndexOf("/"));"/c"===b&&(b="");d(b)};c.hashLink=function(b,a,g){0===g.indexOf("#")&&(g=g.substr(1));var h="";g===b&&(h+="uk-active");a=JSX("li",{class:h},JSX("a",{href:"#"+b},a));a.onclick=function(){history.replaceState(history.state,"","#"+b)};return a};c.link=function(b){var a=b.path;str.startsWith(a,
"/")||(a="/"+a);b.cls=b.cls?" "+b.cls.trim():"";var g=JSX("span",null);b.icon&&(g=JSX("span",{class:"nav-icon","data-uk-icon":"icon: "+b.icon}));b.onclk?str.endsWith(b.onclk,";")||(b.onclk+=";"):b.onclk="";b.isButton||(b.cls=style.linkColor+b.cls);var h=b.path;b.hash&&0<b.hash.length&&(h+="#"+b.hash);return JSX("a",{class:b.cls,href:a,onclick:b.onclk+"nav.navigate('"+h+"', '"+b.title+"');return false;"},g,b.title)}})(nav||(nav={}));var notify;
(function(c){c.notify=function(d,f){UIkit.notification(d,{status:f?"success":"danger",pos:"top-right"})};c.confirm=function(d,f){UIkit.modal.confirm(d).then(f)};c.modal=function(d){var f=UIkit.modal(d);f||console.warn("no modal available with key ["+d+"]");return f}})(notify||(notify={}));var str;
(function(c){function d(e,b,a){a=a&&0<a?a|0:0;return e.substring(a,a+b.length)===b}function f(e,b,a){a=a&&a<e.length?a:e.length;return e.substring(a-b.length,a)===b}c.startsWith=d;c.endsWith=f;c.trimPrefix=function(e,b){return d(e,b)?e.slice(b.length):e};c.trimSuffix=function(e,b){return f(e,b)?e.substring(0,e.lastIndexOf(b)):e}})(str||(str={}));var command;
(function(c){c.client={ping:"ping",connect:"connect",getCollection:"getCollection",addCollection:"addCollection",deleteCollection:"deleteCollection",addRequestURL:"addRequestURL",getRequest:"getRequest",saveRequest:"saveRequest",deleteRequest:"deleteRequest",call:"call",transform:"transform"};c.server={error:"error",pong:"pong",connected:"connected",collections:"collections",collectionDetail:"collectionDetail",collectionAdded:"collectionAdded",collectionDeleted:"collectionDeleted",requestDetail:"requestDetail",
requestAdded:"requestAdded",requestDeleted:"requestDeleted",callResult:"callResult",transformResult:"transformResult"}})(command||(command={}));var npn;
(function(c){function d(f,e){console.error(f+": "+e);var b=e.lastIndexOf(":");-1<b&&(e=e.substr(b+1));notify.notify(f+" error: "+e,!1)}c.onError=d;c.init=function(f,e){try{var b=window.self!==window.top}catch(a){b=!0}b?(document.body.innerHTML="",document.body.appendChild(rbody.iframeError())):(log.init(),window.onbeforeunload=function(){socket.setAppUnloading()},nav.init(routing.route),socket.init(function(a){},routing.recv,d),socket.socketConnect(f,e,"wasm"===f))};c.debug=function(){var f=function(e,
b){void 0===b&&(b="");console.warn(e+": "+b)};f("Active Collection",collection.cache.active);f("Active Request",request.cache.active);f("Active Action",request.cache.action+" ["+request.cache.extra+"]")};c.testbed=function(){log.info("Testbed!")}})(npn||(npn={}));var routing;
(function(c){c.recv=function(d){socket.debug&&console.debug("in",d);switch(d.svc){case services.system.key:system.onSystemMessage(d.cmd,d.param);break;case services.collection.key:collection.onCollectionMessage(d.cmd,d.param);break;case services.request.key:request.onRequestMessage(d.cmd,d.param);break;default:console.warn("unhandled message for service ["+d.svc+"]")}};c.route=function(d,f){d=d.split("/");d=d.filter(function(g){return 0<g.length});console.debug("nav: "+d.join(" -> ")+(0<f.length?
" #"+f:""));f=0<d.length?d[0]:"c";switch(f){case "c":f=1<d.length&&0<d[1].length?d[1]:void 0;var e=2<d.length&&0<d[2].length?d[2]:void 0,b=3<d.length&&0<d[3].length?d[3]:void 0;d=4<d.length?d.slice(4):[];var a=collection.cache.active;collection.cache.setActiveCollection(f);f!==a&&f&&socket.send({svc:services.collection.key,cmd:command.client.getCollection,param:f});request.cache.setActiveRequest(f,e);request.cache.setActiveAction(f,b,d);ui.setPanels(f,e,b,d);break;default:console.warn("unhandled svc ["+
f+"]")}}})(routing||(routing={}));var services;(function(c){c.system={key:"system",title:"System",plural:"systems",icon:"close"};c.collection={key:"collection",title:"Collection",plural:"Collections",icon:"folder"};c.request={key:"request",title:"Request",plural:"Requests",icon:"file-text"};var d=[c.system,c.collection];c.fromKey=function(f){var e=arr.find(d,function(b,a){return a.key===f});if(!e)throw"invalid service ["+f+"]";return e}})(services||(services={}));var auth;
(function(c){c.AllTypes=[{key:"basic",title:"Basic",desc:"a simple username and password",hidden:!1},{key:"header",title:"Header",desc:"an API key passed as a request header",hidden:!1},{key:"queryparam",title:"Query Param",desc:"an API key passed as a query parameter",hidden:!1},{key:"bearertoken",title:"Bearer Token",desc:"uses an OAuth bearer token",hidden:!1},{key:"digest",title:"Digest",desc:"",hidden:!0},{key:"oauth",title:"OAuth",desc:"",hidden:!0}]})(auth||(auth={}));var rbody;
(function(c){c.renderBody=function(d,f){if(!f)return JSX("div",null,"No body");switch(f.type){case "json":return f=Prism.highlight(JSON.stringify(f.config.msg,null,2),Prism.languages.javascript,"javascript"),JSX("div",null,JSX("em",null,"JSON"),JSX("div",{class:"uk-margin-top"},JSX("pre",{class:"language-html","data-start":"0",style:"white-space:pre-wrap;"},JSX("code",{dangerouslySetInnerHTML:{__html:f}}))));case "html":return d=request.baseURL(d),f=Prism.highlight(f.config.content,Prism.languages.html,
"html"),JSX("div",{class:"html-body"},JSX("span",{class:"base-url hidden"},d),JSX("span",{class:"preview-link right"},"(",JSX("a",{class:style.linkColor,href:"",onclick:"rbody.renderHTMLPreview(this);return false"},"preview"),")"),JSX("span",{class:"text-link right hidden"},"(",JSX("a",{class:style.linkColor,href:"",onclick:"rbody.renderHTMLText(this);return false"},"text"),")"),JSX("em",null,"HTML"),JSX("div",{class:"text-content prism uk-margin-top",style:"overflow: auto; max-height: 720px;"},JSX("pre",
{class:"language-html","data-start":"0",style:"white-space:pre-wrap;"},JSX("code",{dangerouslySetInnerHTML:{__html:f}}))),JSX("div",{class:"preview-content uk-margin-top hidden",style:"overflow: auto; max-height: 720px; border: 1px solid #666;"}));case "image":return f=f.config,JSX("img",{alt:"response image",src:"data:"+f.type+";base64,"+f.content});case "raw":return f=f.config,JSX("div",null,JSX("em",null,f.type?f.type:"Unknown Type"),JSX("pre",null,json.str(f)));case "error":return f=f.config,
JSX("div",null,JSX("em",null,"Error"),JSX("pre",null,f.message));default:return JSX("div",null,"unhandled body type [",f.type,"]")}}})(rbody||(rbody={}));
(function(c){function d(f,e){var b=f.parentElement.parentElement;if(!b.classList.contains("html-body"))throw"container is not class [html-body]";f=dom.req(".base-url",b);var a=dom.req(".text-link",b),g=dom.req(".text-content",b),h=dom.req(".preview-link",b);b=dom.req(".preview-content",b);dom.setDisplay(a,e);dom.setDisplay(g,!e);dom.setDisplay(h,!e);dom.setDisplay(b,e);return[f.innerText,g,b]}c.renderHTMLPreview=function(f){f=d(f,!0);var e=document.createElement("iframe");e.style.width="100%";e.style.minHeight=
"720px";var b=f[0];var a=f[1].innerText;var g=a.indexOf("<head");-1<g&&(g=a.indexOf(">",g),-1<g&&(b='<base href="'+b+'" target="_blank">',a=a.substr(0,g+1)+b+a.substr(g+1)));f[2].innerHTML="";f[2].appendChild(e);f=e.contentDocument||e.contentWindow.document;f.open();f.write(a);f.close()};c.renderHTMLText=function(f){d(f,!1)};c.iframeError=function(){return JSX("div",{class:"uk-container"},JSX("div",{class:"uk-section uk-section-small"},JSX("h3",null,"Rendering Error"),JSX("p",null,"This page indicates that the HTML preview was unable to render.")))}})(rbody||
(rbody={}));(function(c){c.AllTypes=[{key:"error",title:"Error",hidden:!0},{key:"form",title:"Form",hidden:!1},{key:"html",title:"HTML",hidden:!1},{key:"json",title:"JSON",hidden:!1},{key:"large",title:"Large File",hidden:!1},{key:"raw",title:"Raw",hidden:!0}]})(rbody||(rbody={}));var call;
(function(c){c.prepare=function(d,f){socket.send({svc:services.request.key,cmd:command.client.call,param:{coll:d,req:f.key,proto:f.prototype}});log.info("calling ["+request.prototypeToURL(f.prototype)+"]")};c.setResult=function(d,f){var e=dom.req("#"+d.collection+"--"+d.request+"-call");dom.setContent(e,c.renderResult(d,f));log.info("call result ["+d.id+"] received")}})(call||(call={}));
(function(c){function d(a,g){var h;if(!a)return JSX("div",null,"no response");var k=a.contentType||"",l=a.contentLength&&-1<a.contentLength?"("+a.contentLength+" bytes)":a.body&&-1<a.body.length?"("+a.body.length+" bytes)":"";k=JSX("div",null,JSX("h3",null,a?a.status:"Unknown"),JSX("em",null,a.method," ",a.url),JSX("div",{class:"mt"},JSX("ul",{"data-uk-tab":""},nav.hashLink("result","Result",g),nav.hashLink("request","Request",g),nav.hashLink("headers","Response",g),nav.hashLink("body","Body",g),
nav.hashLink("timing","Timing",g)),JSX("ul",{class:"uk-switcher uk-margin"},JSX("li",null,JSX("div",null,((null===(h=a.timing)||void 0===h?void 0:h.completed)||0)/1E3,"ms"),JSX("div",null,a.proto," ",JSX("em",null,a.status),JSX("div",null,k," ",l))),JSX("li",null,f("Final Request Headers",a.requestHeaders)),JSX("li",null,f("Response Headers",a.headers)),JSX("li",null,rbody.renderBody(a.url,a.body)),JSX("li",null,e(a.timing)))));return a.prior?JSX("div",null,d(a.prior,g),JSX("hr",null),k):k}function f(a,
g){void 0===g&&(g=[]);return 0===g.length?b(a,"No headers"):JSX("div",{class:"uk-overflow-auto"},JSX("h4",null,a),JSX("table",{class:"uk-table uk-table-divider uk-text-left uk-table-small uk-table-justify"},JSX("tbody",null,g.map(function(h){return JSX("tr",{title:h.desc},JSX("td",{class:"uk-text-nowrap"},h.k),JSX("td",{class:"uk-text-nowrap"},h.v))}))))}function e(a){if(!a)return JSX("div",null,"No timing");var g=c.timingSections(a);return JSX("div",{class:"timing-panel"},JSX("div",{class:"result-timing-graph"},
JSX("div",null,JSX("div",{class:"timing-start"},"0ms"),JSX("div",{class:"timing-end"},a.completed/1E3,"ms")),JSX("object",{type:"image/svg+xml",style:"width: 100%; height: "+24*g.length+"px",data:c.timingGraph(g)},"SVG not supported")),JSX("hr",null),g.map(function(h){return JSX("div",null,h.key,": ",h.start," - ",h.end)}))}function b(a,g){g||(g="undefined");return JSX("div",null,JSX("h4",null,a)," ",g)}c.renderResult=function(a,g){return[JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",
href:"",onclick:"nav.pop();return false;",title:"close result"})),a.error?JSX("div",null,JSX("div",{class:"red-fg"},"error: ",a.error)):JSX("div",null),d(a.response,g)]}})(call||(call={}));
(function(c){c.timingSections=function(d){var f=[],e=function(a,g,h,k){h&&k&&f.push({key:a,group:g,start:h,end:k})};e("dns","connect",d.dnsStart,d.dnsEnd);e("connect","connect",d.connectStart,d.connectEnd);var b=d.connectEnd;0<(d.tlsEnd||0)&&(b=d.tlsEnd||0,e("tls","connect",d.tlsStart||0,b));e("reqheaders","request",b,d.wroteHeaders);2<d.wroteRequest-d.wroteHeaders&&e("reqbody","request",d.wroteHeaders,d.wroteRequest);e("rspwait","response",d.wroteRequest,d.firstResponseByte);e("rspheaders","response",
d.firstResponseByte,d.responseHeaders);e("rspbody","response",d.responseHeaders,d.completed);return f};c.timingGraph=function(d){for(var f,e=[],b=0;b<d.length;b++){var a=d[b];0<a.group.length&&e.push(encodeURIComponent(a.key+".g")+"="+encodeURIComponent(a.group));e.push(encodeURIComponent(a.key+".s")+"="+encodeURIComponent(a.start));e.push(encodeURIComponent(a.key+".e")+"="+encodeURIComponent(a.end))}e.push("t="+(null===(f=system.cache.profile)||void 0===f?void 0:f.theme)||"light");return"/svg/gantt?"+
e.join("&")}})(call||(call={}));var collection;
(function(c){var d=function(){function f(){this.collections=[]}f.prototype.updateCollection=function(e){this.collections=group.updateAndSort(this.collections,e,function(b){return b.key});c.renderCollections(this.collections)};f.prototype.setActiveCollection=function(e){this.active!==e&&(this.active=e,c.renderCollections(this.collections))};f.prototype.deleteCollection=function(e){socket.send({svc:services.collection.key,cmd:command.client.deleteCollection,param:e})};f.prototype.getActiveCollection=
function(){return this.active?this.getCollection(this.active):void 0};f.prototype.getCollection=function(e){for(var b=0,a=this.collections;b<a.length;b++){var g=a[b];if(g.key==e)return g}};return f}();c.cache=new d})(collection||(collection={}));
(function(c){function d(e){var b=e.title;b&&0!==b.length||(b=e.key);var a=nav.link({path:"/c/"+e.key,title:b,icon:"folder"});if(c.cache.active===e.key){var g=request.cache.active,h=request.cache.summaries.get(e.key);h&&(a=void 0,a=g?nav.link({path:"/c/"+e.key,title:b,icon:"album"}):JSX("strong",null,nav.link({path:"/",title:b,icon:"album"})),a=JSX("div",null,a,h.map(function(k){var l=nav.link({path:"/c/"+e.key+"/"+k.key,title:k.title&&0<k.title.length?k.title:k.key,icon:"link"});return JSX("div",
{class:"uk-margin-small-left"},request.cache.active===k.key?JSX("strong",null,l):l)})))}return JSX("div",{class:"nav-item collection-link collection-link-"+e.key},a)}function f(e,b){b=group.sort(b,function(a){return a.order});return JSX("ul",{class:"uk-list uk-list-divider"},b.map(function(a){var g=a.title;g&&0!==a.title.length||(g=a.key);return JSX("li",null,nav.link({path:"/c/"+e+"/"+a.key,title:g}),a.description&&a.description.length?JSX("div",null,JSX("em",null,a.description)):JSX("span",null))}))}
c.renderCollections=function(e){return dom.els(".collection-list").forEach(function(b){dom.setContent(b,e.map(function(a){return d(a)}))})};c.renderCollection=function(e,b){var a=e.title?e.title:e.key,g=JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.pop();return false;",title:"close collection"}));a=JSX("h3",{class:"uk-card-title"},JSX("span",{class:"nav-icon-h3","data-uk-icon":"icon: album"}),a);var h=JSX("p",null,e.description||"");var k="confirm('Are you sure you want to delete collection ["+
e.key+"]?')";k=JSX("div",null,JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"return false;"},"Edit"),JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"if ("+k+") { collection.cache.deleteCollection('"+e.key+"') }"},"Delete"));return JSX("div",null,JSX("div",{class:"uk-card uk-card-body uk-card-default"},g,a,h,k),JSX("div",{class:"uk-card uk-card-body uk-card-default uk-margin-top"},JSX("h3",{class:"uk-card-title"},
"Requests"),JSX("form",{onsubmit:"collection.addRequestURL('"+e.key+"');return false;"},JSX("div",{class:"uk-margin-top uk-inline uk-width-expand"},JSX("button",{class:"uk-form-icon uk-form-icon-flip",type:"submit",title:"add request","uk-icon":"icon: plus"}),JSX("input",{id:"coll-request-add-url",class:"uk-input",placeholder:"add a request by url","data-lpignore":"true"}))),JSX("div",{id:"request-list",class:"uk-margin-top"},f(e.key,b))))};c.renderNotFound=function(e){return JSX("div",{class:"uk-card uk-card-body uk-card-default"},
JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.pop();return false;",title:"close collection"})),JSX("h3",{class:"uk-card-title"},JSX("span",{class:"nav-icon-h3","data-uk-icon":"icon: album"}),e),JSX("p",null,"Collection [",e,"] not found"))};c.addFromInput=function(){var e=dom.req("#coll-add-input"),b=e.value.trim();b&&0<b.length&&(dom.setValue(e,""),socket.send({svc:services.collection.key,cmd:command.client.addCollection,param:b}),log.info("adding request ["+
b+"]"))};c.addRequestURL=function(e){var b=dom.req("#coll-request-add-url"),a=b.value.trim();a&&0<a.length&&(dom.setValue(b,""),socket.send({svc:services.collection.key,cmd:command.client.addRequestURL,param:{coll:e,url:a}}),log.info("adding request ["+a+"]"))}})(collection||(collection={}));
(function(c){c.onCollectionMessage=function(d,f){var e;switch(d){case command.server.collections:c.cache.collections=group.sort(f,function(a){return a.key});log.info("processing ["+c.cache.collections.length+"] collections");c.renderCollections(c.cache.collections);break;case command.server.collectionDetail:log.info("processing ["+((null===(e=f.requests)||void 0===e?void 0:e.length)||0)+"] requests for collection ["+f.key+"]");f.collection?c.cache.updateCollection(f.collection):c.cache.collections=
c.cache.collections.filter(function(a){return a.key!==b});request.cache.setCollectionRequests(f.key,f.collection,f.requests||[]);c.renderCollections(c.cache.collections);break;case command.server.collectionAdded:log.info("processing new collection ["+f.active+"]");c.cache.collections=f.collections;nav.navigate("/c/"+f.active);break;case command.server.collectionDeleted:var b=f;log.info("processing deleted collection ["+b+"]");c.cache.collections=c.cache.collections.filter(function(a){return a.key!==
b});c.renderCollections(c.cache.collections);nav.navigate("/");break;default:console.warn("unhandled collection command ["+d+"]")}}})(collection||(collection={}));var header;
(function(c){function d(e,b,a,g){return{key:e,description:b,req:a,rsp:g,link:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/"+e}}c.commonHeaders=[d("Accept","Informs the server about the types of data that can be sent back.",!0,!1),d("Access-Control-Allow-Headers","Used in response to a preflight request to indicate which HTTP headers can be used when making the actual request.",!1,!0),d("Access-Control-Allow-Methods","Specifies the methods allowed when accessing the resource in response to a preflight request.",
!1,!0),d("Access-Control-Allow-Origin","Indicates whether the response can be shared.",!1,!0),d("Authorization","Contains the credentials to authenticate a user-agent with a server.",!0,!1),d("Connection","Controls whether the network connection stays open after the current transaction finishes.",!0,!1),d("Content-Encoding","Used to specify the compression algorithm.",!0,!0),d("Content-Length","The size of the resource, in decimal number of bytes.",!0,!0),d("Content-Type","Indicates the media type of the resource.",
!0,!0),d("Cookie","Contains stored HTTP cookies previously sent by the server with the Set-Cookie header.",!0,!1),d("Date","The Date general HTTP header contains the date and time at which the message was originated.",!1,!0),d("ETag","A unique string identifying the version of the resource.",!1,!0),d("Expires","The date/time after which the response is considered stale.",!1,!0),d("Host","Specifies the domain name of the server (for virtual hosting), and (optionally) the TCP port number on which the server is listening.",
!0,!1),d("Last-Modified","The last modification date of the resource, used to compare several versions of the same resource.",!1,!0),d("Location","Indicates the URL to redirect a page to. ",!1,!0),d("Origin","Indicates where a fetch originates from.",!0,!1),d("Referer","The address of the previous web page from which a link to the currently requested page was followed.",!0,!1),d("Server","Contains information about the software used by the origin server to handle the request.",!1,!0),d("Set-Cookie",
"Send cookies from the server to the user-agent.",!1,!0),d("User-Agent","Contains a characteristic string that allows the network protocol peers to identify the application",!0,!1)];var f;c.getCommonHeaderByName=function(e){if(!f){f=new map.Map;for(var b=0,a=c.commonHeaders;b<a.length;b++){var g=a[b];f.set(g.key,g)}}return f.get(e)};c.dumpCommonHeaders=function(){var e=function(b,a,g){var h=!1;console.debug("\n::: "+b+" Headers");c.commonHeaders.forEach(function(k){k.req==a&&k.rsp==g&&(h=!0,console.debug(k.key+
": "+k.link),console.debug("  - "+k.description))});h||console.debug("none")};e("Common",!0,!0);e("Request",!0,!1);e("Response",!1,!0);e("Invalid",!1,!1)}})(header||(header={}));var request;
(function(c){function d(){return JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate(`/c/${collection.cache.active}/${request.cache.active}`);return false;",title:"close collection"}))}c.renderActionEmpty=function(){return JSX("div",null)};c.renderActionUnknown=function(f,e){return JSX("div",null,d(),"unknown action: ",f," (",e,")")};c.renderActionCall=function(f,e){return JSX("div",{id:f+"--"+e+"-call"},d(),JSX("div",{class:"call-title"},
"Loading..."),JSX("div",{class:"call-result"}))};c.renderActionClose=d})(request||(request={}));
(function(c){var d=function(){function f(){this.summaries=new map.Map;this.requests=new map.Map;this.extra=[]}f.prototype.setCollectionRequests=function(e,b,a){if(b){if(this.summaries.set(e,a),e===collection.cache.active)for(dom.setContent("#collection-panel",collection.renderCollection(b,a)),b=0;b<a.length;b++){var g=a[b];this.active===g.key&&(c.renderActiveRequest(e),this.action&&c.renderAction(e,g.key,this.action,this.extra))}}else this.summaries.del(e),e===collection.cache.active&&dom.setContent("#collection-panel",
collection.renderNotFound(e))};f.prototype.setActiveRequest=function(e,b){e&&this.active!==b&&((this.active=b)&&c.renderActiveRequest(e),collection.renderCollections(collection.cache.collections))};f.prototype.setActiveAction=function(e,b,a){e&&(this.extra.length===a.length&&this.extra.every(function(g,h){return g===a[h]}),this.active&&(this.action=b,this.extra=a,c.renderAction(e,this.active,this.action,this.extra)))};f.prototype.updateRequest=function(e,b){var a=this.requests.get(e);a=group.update(a,
b,function(g){return g.key});this.requests.set(e,a);a=this.summaries.get(e);a=a.map(function(g){return g.key==b.key?c.toSummary(b,0):g});this.summaries.set(e,a);collection.cache.active===e&&collection.renderCollection(collection.cache.getActiveCollection(),a)};f.prototype.removeRequest=function(e,b){var a=this.requests.get(e);a=group.remove(a,b,function(g){return g.key});this.requests.set(e,a);a=this.summaries.get(e);a=a.filter(function(g){return g.key!==b});this.summaries.set(e,a);this.active===
b&&c.cache.setActiveRequest(e,void 0);collection.cache.active===e&&collection.renderCollection(collection.cache.getActiveCollection(),a)};return f}();c.cache=new d})(request||(request={}));var diff;
(function(c){function d(b,a,g,h){if(void 0===a||null===a)a="";if(void 0===g||null===g)g="";if("object"===typeof a&&"object"===typeof g){for(var k in a)if(a.hasOwnProperty(k)&&d(b+"."+k,a[k],g[k],h))return!0;for(k in g)if(g.hasOwnProperty(k)&&!a.hasOwnProperty(k)&&d(b+"."+k,a[k],g[k],h))return!0}else if(a!==g)return h(b,a,g),!0;return!1}function f(b,a,g,h){if(void 0===a||null===a)a=[];if(void 0===g||null===g)g=[];if(a.length!==g.length)return h(b+".length",a.length,g.length),!0;for(var k=0;k<a.length;k++)if(d(b+
"["+k+"]",a[k],g[k],h))return!0;return!1}function e(b,a,g,h){return a?g?!1:(h(b,"(defined)",null),!0):(g&&h(b,null,"(defined)"),!0)}c.diff=function(b,a){var g=[],h=function(k,l,m){return g.push({k:k,l:l,r:m})};if(e("request",b,a,h))return g;d("key",b.key,a.key,h);d("title",b.title,a.title,h);d("description",b.description,a.description,h);b=b.prototype;a=a.prototype;d("method",b.method,a.method,h);d("protocol",b.protocol,a.protocol,h);d("domain",b.domain,a.domain,h);d("port",b.port,a.port,h);d("path",
b.path,a.path,h);f("query",b.query,a.query,h);d("fragment",b.fragment,a.fragment,h);f("headers",b.headers,a.headers,h);d("auth",b.auth,a.auth,h);!e("body",b.body,a.body,h)&&b.body&&a.body&&(d("body.type",b.body.type,a.body.type,h),d("body.config",b.body.config,a.body.config,h));b=b.options;a=a.options;if(e("options",b,a,h)||!b||!a)return g;d("timeout",b.timeout,a.timeout,h);d("ignoreRedirects",b.ignoreRedirects,a.ignoreRedirects,h);d("ignoreReferrer",b.ignoreReferrer,a.ignoreReferrer,h);d("ignoreCerts",
b.ignoreCerts,a.ignoreCerts,h);d("ignoreCookies",b.ignoreCookies,a.ignoreCookies,h);f("excludeDefaultHeaders",b.excludeDefaultHeaders,a.excludeDefaultHeaders,h);d("readCookieJars",b.readCookieJars,a.readCookieJars,h);d("writeCookieJar",b.writeCookieJar,a.writeCookieJar,h);d("sslCert",b.sslCert,a.sslCert,h);d("userAgentOverride",b.userAgentOverride,a.userAgentOverride,h);return g};c.comp=d;c.compArray=f;c.checkNull=e})(diff||(diff={}));
(function(c){c.getSummary=function(d,f){var e=0;for(d=c.cache.summaries.get(d)||[];e<d.length;e++){var b=d[e];if(b.key===f)return b}};c.getRequest=function(d,f){var e=0;for(d=c.cache.requests.get(d)||[];e<d.length;e++){var b=d[e];if(b.key===f)return b}};c.toSummary=function(d,f){return{key:d.key,title:d.title,description:d.description,url:c.prototypeToURL(d.prototype),order:f}};c.onRequestMessage=function(d,f){var e=collection.cache.active;switch(d){case command.server.requestDetail:log.info("received details for request ["+
f.key+"]");c.cache.updateRequest(e,f);c.cache.active===f.key&&(c.renderActiveRequest(e),c.renderAction(e,c.cache.active,c.cache.action,c.cache.extra));break;case command.server.requestAdded:log.info("received details for new request ["+f.key+"]");c.cache.updateRequest(e,f);nav.navigate("/c/"+e+"/"+f.key);break;case command.server.requestDeleted:log.info("received details for deleted request ["+f+"]");c.cache.removeRequest(e,f);nav.navigate("/c/"+e);break;case command.server.callResult:call.setResult(f,
location.hash);break;case command.server.transformResult:transform.setResult(f);break;default:console.warn("unhandled request command ["+d+"]")}}})(request||(request={}));
(function(c){c.MethodGet={key:"GET",description:""};c.MethodHead={key:"HEAD",description:""};c.MethodPost={key:"POST",description:""};c.MethodPut={key:"PUT",description:""};c.MethodPatch={key:"PATCH",description:""};c.MethodDelete={key:"DELETE",description:""};c.MethodConnect={key:"CONNECT",description:""};c.MethodOptions={key:"OPTIONS",description:""};c.MethodTrace={key:"TRACE",description:""};c.allMethods=[c.MethodGet,c.MethodHead,c.MethodPost,c.MethodPut,c.MethodPatch,c.MethodDelete,c.MethodConnect,
c.MethodOptions,c.MethodTrace]})(request||(request={}));
(function(c){function d(f,e,b,a,g,h,k){str.endsWith(f,":")&&(f=f.substr(0,f.length-1));str.startsWith(h,"#")&&(h=h.substr(1));return{method:"get",protocol:f,domain:e,port:b,path:a,query:g,fragment:h,auth:k}}c.prototypeFromURL=function(f){f=new URL(f);var e=[];f.searchParams.forEach(function(h,k){return e.push({k:k,v:h})});var b;0<f.username.length&&(b={type:"basic",config:{username:f.username,password:f.password,showPassword:!0}});var a;f.port&&0<f.port.length&&(a=parseInt(f.port,10));var g=f.pathname;
0===g.indexOf("/")&&(g=g.substr(1));return d(f.protocol,f.hostname,a,g,e,f.hash,b)}})(request||(request={}));
(function(c){function d(f,e){var b=c.getRequest(f,e);if(b)dom.setContent("#request-panel",c.form.renderFormPanel(f,b)),c.editor.wireForm(b.key);else if(e=c.getSummary(f,e))dom.setContent("#request-panel",c.renderSummaryPanel(f,e)),socket.send({svc:services.request.key,cmd:command.client.getRequest,param:{coll:f,req:e.key}})}c.renderActiveRequest=function(f){c.cache.active?d(f,c.cache.active):console.warn("no active request")};c.render=d;c.renderAction=function(f,e,b,a){var g=dom.opt(".request-editor"),
h=dom.opt(".request-action");if(g&&h){switch(b){case void 0:dom.setContent(h,c.renderActionEmpty());break;case "call":call.prepare(f,c.form.extractRequest(c.cache.active));dom.setContent(h,c.renderActionCall(f,e));break;case "delete":socket.send({svc:services.request.key,cmd:command.client.deleteRequest,param:{coll:f,req:e}});break;case "transform":var k=c.form.extractRequest(c.cache.active);dom.setContent(h,transform.renderRequest(f,e,a[0]));socket.send({svc:services.request.key,cmd:command.client.transform,
param:{coll:f,req:e,fmt:a[0],proto:k.prototype}});break;default:console.warn("unhandled request action ["+b+"]"),dom.setContent(h,c.renderActionUnknown(b,a))}dom.setDisplay(g,void 0===b);dom.setDisplay(h,void 0!==b)}}})(request||(request={}));
(function(c){c.renderSummaryPanel=function(d,f){return JSX("div",null,JSX("div",{class:"uk-card uk-card-body uk-card-default"},JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate('/c/"+d+"');return false;",title:"close request"})),JSX("h3",{class:"uk-card-title"},f.title?f.title:f.key),JSX("p",null,"Loading...")))}})(request||(request={}));
(function(c){function d(a){a=new URL(a);return{method:c.MethodGet.key,protocol:str.trimSuffix(a.protocol,":"),domain:a.hostname,port:a.port?parseInt(a.port,10):void 0,path:str.trimPrefix(a.pathname,"/"),fragment:str.trimPrefix(a.hash,"#")}}function f(a){if(!a)return"invalid";var g=a.domain;a.port&&0<a.port&&(g+=":"+a.port);return a.protocol+"://"+g+"/"}function e(a){var g=[],h=function(l,m){g.push({t:l,v:m})};h("protocol",a.protocol);h("","://");if(a.auth&&"basic"===a.auth.type){var k=a.auth.config;
h("username",k.username);h("",":");k.showPassword?h("password",k.password):h("password","****");h("","@")}h("domain",a.domain);a.port&&(h("",":"),h("port",a.port.toString()));a.path&&0<a.path.length&&(h("","/"),h("path",a.path));a.query&&0<a.query.length&&(h("","?"),k=a.query.map(function(l){return encodeURIComponent(l.k)+"="+encodeURIComponent(l.v)}).join("&"),h("query",k));a.fragment&&0<a.fragment.length&&(h("","#"),h("fragment",encodeURIComponent(a.fragment)));return g}function b(a){switch(a){case "username":case "password":case "protocol":case "auth":return"green-fg";
case "domain":case "port":return"blue-fg";case "path":return"bluegrey-fg";case "query":return"purple-fg";case "fragment":return"orange-fg";default:return""}}c.urlToPrototype=d;c.prototypeToURL=function(a){return e(a).map(function(g){return g.v}).join("")};c.prototypeToHTML=function(a){return JSX("span",null,e(a).map(function(g){return JSX("span",{title:g.t,class:b(g.t)},g.v)}))};c.baseURL=function(a){return f(d(a))};c.prototypeBaseURL=f})(request||(request={}));
(function(c){(function(d){d.updateBasicAuth=function(f,e){dom.setValue(f.auth,json.str(e))}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){function f(h,k,l){var m=new URL(h.value),q="",t="";"basic"===(null===l||void 0===l?void 0:l.type)&&(l=l.config,q=encodeURIComponent(l.username),t=encodeURIComponent(l.password));m.username=q;m.password=t;m=m.toString();dom.setValue(h,m);dom.setContent(k,c.prototypeToHTML(c.prototypeFromURL(m)))}function e(h){var k=json.parse(h.value);return JSX("div",{class:"uk-margin-top"},b(h,k),auth.AllTypes.filter(function(l){return!l.hidden}).map(function(l){var m=k&&k.type==l.key?k.config:
null,q=l.key,t=l.key===(null===k||void 0===k?void 0:k.type);l="uk-margin-top body-editor";t||(l+=" hidden");switch(q){case "basic":m=a(q,t?m:void 0,h);break;default:m=JSX("div",null,"Unimplemented [",q,"] auth editor")}return JSX("div",{class:l,"data-key":q},m)}))}function b(h,k){var l=JSX("select",{class:"uk-select"},JSX("option",{value:""},"No body"),auth.AllTypes.filter(function(m){return!m.hidden}).map(function(m){return k&&k.type===m.key?JSX("option",{value:m.key,selected:"selected"},m.title):
JSX("option",{value:m.key},m.title)}));d.events(l,function(){dom.els(".body-editor",l.parentElement).forEach(function(m){var q=m.dataset.key;l.value===q?(""===q&&(dom.setValue(h,"null"),d.check()),m.classList.remove("hidden")):m.classList.add("hidden")})});return l}function a(h,k,l){var m=JSX("textarea",{class:"uk-textarea"},json.str(k));d.events(m,function(){var q=m.value;try{q=json.parse(q)}catch(t){}diff.comp("",k,q,function(t,u,w){});g("json",{type:"basic",config:q},l)});return m}function g(h,
k,l){h=dom.req("#"+l.id.replace("-auth","-url"));var m=dom.req("#"+l.id.replace("-auth","-urlview"));f(h,m,k);dom.setValue(l,json.str(k));d.check()}d.initAuthEditor=function(h){h.parentElement.appendChild(e(h))};d.setAuth=f})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){function f(h){var k=json.parse(h.value);return JSX("div",{class:"uk-margin-top"},e(h,k),JSX("div",{class:"body-editor","data-key":""}),rbody.AllTypes.filter(function(l){return!l.hidden}).map(function(l){var m=l.key,q=k&&k.type==l.key?k.config:null,t=l.key===(k?k.type:"");l="uk-margin-top body-editor";t||(l+=" hidden");switch(m){case "json":q=a(m,t?q:void 0,h);break;case "html":q=b(m,t?q:void 0,h);break;default:q=JSX("div",null,"Unimplemented [",m,"] body editor")}return JSX("div",
{class:l,"data-key":m},q)}))}function e(h,k){var l=JSX("select",{class:"uk-select"},JSX("option",{value:""},"No body"),rbody.AllTypes.filter(function(m){return!m.hidden}).map(function(m){return k&&k.type===m.key?JSX("option",{value:m.key,selected:"selected"},m.title):JSX("option",{value:m.key},m.title)}));d.events(l,function(){dom.els(".body-editor",l.parentElement).forEach(function(m){var q=m.dataset.key;l.value===q?(""===q&&(dom.setValue(h,"null"),d.check()),m.classList.remove("hidden")):m.classList.add("hidden")})});
return l}function b(h,k,l){var m=JSX("textarea",{class:"uk-textarea"},k?k.content:""),q=k?k.content:"";d.events(m,function(){if(q!==m.value){var t=m.value;g("html",{content:t},t.length,l)}});return m}function a(h,k,l){var m=JSX("textarea",{class:"uk-textarea"},json.str(k?k.msg:null)),q=null===k||void 0===k?void 0:k.msg;d.events(m,function(){var t=m.value;try{t=json.parse(t)}catch(u){}diff.comp("",q,t,function(u,w,n){});g("json",{msg:t},m.value.length,l)});return m}function g(h,k,l,m){dom.setValue(m,
json.str({type:h,config:k,length:l}));d.check()}d.initBodyEditor=function(h){h.parentElement.appendChild(f(h))};d.setBody=function(h,k){}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){function f(g,h){d.initURLEditor(h.url,h.urlView);d.initAuthEditor(h.auth);d.initQueryParamsEditor(h.qp);d.initHeadersEditor(h.headers);d.initBodyEditor(h.body);d.initOptionsEditor(h.options)}function e(g,h){g.onchange=function(){h("change");return!0};g.onkeyup=function(){h("keyup");return!0};g.onblur=function(){h("blur");return!0}}function b(){c.form.checkEditor(collection.cache.active,c.cache.active)}function a(g){e(g.key,b);e(g.title,b);e(g.desc,b);e(g.method,b);e(g.url,
function(h){var k=c.prototypeFromURL(g.url.value);d.setURL(g,k);"blur"==h&&c.editor.toggleURLEditor(c.cache.active,!1);b()});e(g.auth,function(){try{var h=json.parse(g.auth.value)}catch(k){console.warn("invalid auth JSON ["+g.auth.value+"]")}d.setAuth(g.url,g.urlView,h);b()});e(g.qp,function(){try{var h=json.parse(g.qp.value)}catch(k){console.warn("invalid qp JSON ["+g.qp.value+"]"),h=[]}d.setQueryParams(g.url,g.urlView,h);b()});e(g.headers,function(){try{var h=json.parse(g.headers.value)}catch(k){console.warn("invalid headers JSON ["+
g.headers.value+"]"),h=[]}d.setHeaders(g,h);b()});e(g.body,function(){try{var h=json.parse(g.body.value)}catch(k){console.warn("invalid body JSON ["+g.body.value+"]")}d.setBody(g,h);b()})}d.wireForm=function(g){var h=function(k){return"#"+g+"-"+k};h={key:dom.req(h("key")),title:dom.req(h("title")),desc:dom.req(h("description")),url:dom.req(h("url")),urlView:dom.req(h("urlview")),method:dom.req(h("method")),auth:dom.req(h("auth")),qp:dom.req(h("queryparams")),headers:dom.req(h("headers")),body:dom.req(h("body")),
options:dom.req(h("options"))};f(g,h);a(h)};d.events=e;d.check=b})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){function f(a){var g=JSX("ul",{id:a.id+"-ul",class:"uk-list uk-list-divider"}),h=json.parse(a.value);dom.setText(g,"");g.appendChild(d.mapHeader(a.id,"addHeaderRow"));if(h)for(var k=0;k<h.length;k++)e(a.id,k,g,h[k]);return g}function e(a,g,h,k){g=d.newChild(a,g,k,"removeHeaderRow");h.appendChild(g);d.events(g,function(){return b(a)})}function b(a){var g=d.parseMapParams(a);a=dom.req("#"+a);dom.setValue(a,json.str(g));d.check();return g}d.initHeadersEditor=function(a){a.parentElement.appendChild(f(a))};
d.setHeaders=function(a,g){};d.removeHeaderRow=function(a,g){g.parentElement.parentElement.parentElement.parentElement.remove();b(a);return!1};d.addHeaderRow=function(a){var g=dom.req("#"+a+"-ul");e(a,g.children.length-1,g,{k:"",v:""});return!1}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){d.mapHeader=function(f,e){return JSX("li",null,JSX("div",{"data-uk-grid":""},JSX("div",{class:"uk-width-1-4"},"Name"),JSX("div",{class:"uk-width-1-4"},"Value"),JSX("div",{class:"uk-width-1-2"},JSX("div",{class:"right"},JSX("a",{class:style.linkColor,href:"",onclick:"return request.editor."+e+"('"+f+"')",title:"new row"},JSX("span",{"data-uk-icon":"icon: plus"}))),"Description")))};d.newChild=function(f,e,b,a){return JSX("li",null,JSX("div",{"data-uk-grid":""},JSX("div",{class:"uk-width-1-4"},
JSX("input",{class:"uk-input","data-field":e+"-key",type:"text",value:b.k})),JSX("div",{class:"uk-width-1-4"},JSX("input",{class:"uk-input","data-field":e+"-value",type:"text",value:b.v})),JSX("div",{class:"uk-width-1-2"},JSX("div",{class:"right",style:"margin-top: 6px;"},JSX("a",{class:style.linkColor,href:"",onclick:"return request.editor."+a+"('"+f+"', this);",title:"remove row"},JSX("span",{"data-uk-icon":"icon: close"}))),JSX("input",{style:"width: calc(100% - 48px);",class:"uk-input","data-field":e+
"-desc",type:"text",value:b.desc}))))};d.parseMapParams=function(f){var e=dom.req("#"+f+"-ul");f=[];var b=0;for(e=dom.els("input",e);b<e.length;b++){var a=e[b],g=a.dataset.field||"",h=g.lastIndexOf("-"),k=parseInt(g.substring(0,h),10);g=g.substring(h+1);f[k]||(f[k]={k:"",v:""});switch(g){case "key":f[k].k=a.value.trim();break;case "value":f[k].v=a.value.trim();break;case "desc":a=a.value.trim();0<a.length&&(f[k].desc=a);break;default:throw"unknown key ["+g+"]";}}return f=f.filter(function(l){return 0<
l.k.length})}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){function f(n){var r=json.parse(n.value);r||(r={});return JSX("div",null,JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-timeout"},"Timeout"),a(n,r.timeout)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label"},"Ignore"),JSX("div",null,g(n,r.ignoreRedirects),h(n,r.ignoreReferrer),k(n,r.ignoreCerts),l(n,r.ignoreCookies))),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-excludeDefaultHeaders"},
"Exclude Default Headers"),m(n,r.excludeDefaultHeaders)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-readCookieJars"},"Read Cookie Jars"),q(n,r.readCookieJars)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"writeCookieJar"},"Write Cookie Jar"),t(n,r.writeCookieJar)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-sslCert"},"SSL Cert"),u(n,r.sslCert)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",
for:n.id+"-userAgentOverride"},"User Agent Override"),w(n,r.userAgentOverride)))}function e(n,r,p,v){n="opt-"+r;return v?JSX("label",{class:"uk-margin-right"},JSX("input",{type:"checkbox",name:n,value:"true",checked:!0})," ",p):JSX("label",{class:"uk-margin-right"},JSX("input",{type:"checkbox",name:n,value:"true"})," ",p)}function b(n,r,p){d.events(n,function(){var v=json.parse(p.value);r(v);dom.setValue(p,json.str(v));d.check()})}function a(n,r){var p=JSX("input",{class:"uk-input",id:n.id+"-timeout",
name:"opt-timeout",type:"number",value:r||0});b(p,function(v){return v.timeout=parseInt(p.value,10)},n);return p}function g(n,r){var p=e(n.id,"ignoreRedirects","Redirects",r||!1);b(p,function(v){return v.ignoreRedirects=dom.req("input",p).checked},n);return p}function h(n,r){var p=e(n.id,"ignoreReferrer","Referrer",r||!1);b(p,function(v){return v.ignoreReferrer=dom.req("input",p).checked},n);return p}function k(n,r){var p=e(n.id,"ignoreCerts","Certs",r||!1);b(p,function(v){return v.ignoreCerts=dom.req("input",
p).checked},n);return p}function l(n,r){var p=e(n.id,"ignoreCookies","Cookies",r||!1);b(p,function(v){return v.ignoreCookies=dom.req("input",p).checked},n);return p}function m(n,r){var p=JSX("input",{class:"uk-input",id:n.id+"-excludeDefaultHeaders",name:"opt-excludeDefaultHeaders",type:"text",value:r});b(p,function(v){return v.excludeDefaultHeaders=p.value.split(",").map(function(x){return x.trim()})},n);return p}function q(n,r){var p=JSX("input",{class:"uk-input",id:n.id+"-readCookieJars",name:"opt-readCookieJars",
type:"text",value:r});b(p,function(v){return v.readCookieJars=p.value.split(",").map(function(x){return x.trim()})},n);return p}function t(n,r){var p=JSX("input",{class:"uk-input",id:n.id+"-writeCookieJar",name:"opt-writeCookieJar",type:"text",value:r});b(p,function(v){return v.writeCookieJar=p.value},n);return p}function u(n,r){var p=JSX("input",{class:"uk-input",id:n.id+"-sslCert",name:"opt-sslCert",type:"text",value:r});b(p,function(v){return v.sslCert=p.value},n);return p}function w(n,r){var p=
JSX("input",{class:"uk-input",id:n.id+"-userAgentOverride",name:"opt-userAgentOverride",type:"text",value:r||""});b(p,function(v){return v.userAgentOverride=p.value},n);return p}d.initOptionsEditor=function(n){n.parentElement.appendChild(f(n))}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){function f(h,k,l){var m=[];if(l)for(var q=0;q<l.length;q++){var t=l[q],u=encodeURIComponent(t.k);0<t.v.length&&(u+="="+encodeURIComponent(t.v));m.push(u)}q=h.value;l="";t=q.indexOf("#");-1<t&&(l=q.substr(t+1));t=q.indexOf("?");m=-1===t?q+"?"+m.join("&"):q.substr(0,t)+"?"+m.join("&");0<l.length&&(m+="#"+encodeURIComponent(l));dom.setValue(h,m);dom.setContent(k,c.prototypeToHTML(c.prototypeFromURL(m)))}function e(h,k){var l=json.parse(h.value);dom.clear(k);k.appendChild(d.mapHeader(h.id,
"addQueryParamRow"));if(l)for(var m=0;m<l.length;m++)a(h.id,m,k,l[m])}function b(h){var k=JSX("ul",{id:h.id+"-ul",class:"uk-list uk-list-divider"});e(h,k);return k}function a(h,k,l,m){k=d.newChild(h,k,m,"removeQueryParamRow");l.appendChild(k);d.events(k,function(){return g(h)})}function g(h){var k=d.parseMapParams(h),l=dom.req("#"+h);dom.setValue(l,json.str(k));l=dom.req("#"+h.replace("-queryparams","-url"));h=dom.req("#"+h.replace("-queryparams","-urlview"));f(l,h,k);d.check();return k}d.initQueryParamsEditor=
function(h){h.parentElement.appendChild(b(h))};d.setQueryParams=f;d.updateQueryParams=function(h,k){dom.setValue(h.qp,json.str(k));e(h.qp,dom.req("#"+h.qp.id+"-ul"))};d.removeQueryParamRow=function(h,k){k.parentElement.parentElement.parentElement.parentElement.remove();g(h);return!1};d.addQueryParamRow=function(h){var k=dom.req("#"+h+"-ul");a(h,k.children.length-1,k,{k:"",v:""});return!1}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){d.initURLEditor=function(f,e){};d.setURL=function(f,e){e?(dom.setContent(f.urlView,c.prototypeToHTML(e)),d.updateQueryParams(f,e.query),d.updateBasicAuth(f,e.auth)):dom.setValue(f.qp,"[]")};d.toggleURLEditor=function(f,e){dom.setDisplay("#"+f+"-link",!e);dom.setDisplay("#"+f+"-edit",e);e&&dom.req("#"+f+"-url").focus()}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(d){function f(b){var a=e(b,"key"),g=e(b,"title"),h=e(b,"description"),k=e(b,"url");k=c.urlToPrototype(k);k.method=e(b,"method");k.query=json.parse(e(b,"queryparams"));k.headers=json.parse(e(b,"headers"));k.auth=json.parse(e(b,"auth"));k.body=json.parse(e(b,"body"));k.options=json.parse(e(b,"options"));return{key:a,title:g,description:h,prototype:k}}function e(b,a){return dom.req("#"+b+"-"+a).value}d.extractRequest=f;d.checkEditor=function(b,a){(b=c.getRequest(b,a))?(a=f(a),
a=0<diff.diff(b,a).length):a=!0;dom.setDisplay("#save-panel",a)};d.saveCurrentRequest=function(b,a){var g=f(a);socket.send({svc:services.request.key,cmd:command.client.saveRequest,param:{coll:b,orig:a,req:g}})}})(c.form||(c.form={}))})(request||(request={}));
(function(c){(function(d){function f(b,a){var g="/c/"+b+"/"+a.key;b="if (!confirm('Are you sure you want to delete request ["+a.key+"]?')) { return false; }";return JSX("div",null,nav.link({path:g+"/call",title:"Call",cls:"uk-button uk-button-default uk-margin-small-right uk-margin-top",isButton:!0}),JSX("div",{class:"uk-inline"},JSX("button",{type:"button",class:"uk-button uk-button-default uk-margin-small-right uk-margin-top"},"Export"),JSX("div",{id:"export-dropdown","uk-dropdown":"mode: click"},
JSX("ul",{class:"uk-list uk-list-divider",style:"margin-bottom: 0;"},Object.keys(e).map(function(h){return JSX("li",null,nav.link({path:g+"/transform/"+h,title:e[h],onclk:"UIkit.dropdown(dom.req('#export-dropdown')).hide(false);"}))})))),nav.link({path:g+"/delete",title:"Delete",cls:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclk:b,isButton:!0}))}d.renderFormPanel=function(b,a){var g=JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate('/c/"+
b+"');return false;",title:"close request"})),h=JSX("h3",{class:"uk-card-title"},a.title?a.title:a.key),k=d.renderURL(b,a);var l=JSX("div",{id:"save-panel",class:"right hidden"},JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"request.form.reset('"+b+"', '"+a.key+"');"},"Reset"),JSX("button",{class:"uk-button uk-button-default uk-margin-top",onclick:"request.form.saveCurrentRequest('"+b+"', '"+a.key+"');"},"Save Changes"));return JSX("div",null,JSX("div",
{class:"uk-card uk-card-body uk-card-default"},g,h,k,l,f(b,a)),JSX("div",{class:"request-editor uk-card uk-card-body uk-card-default uk-margin-top"},JSX("form",{action:"",method:"post",onsubmit:"console.log('XXXXXXX');return false;"},d.renderSwitcher(a,location.hash))),JSX("div",{class:"request-action uk-card uk-card-body uk-card-default uk-margin-top hidden"}))};d.renderDetails=function(b){return JSX("li",{class:"request-details-panel"},JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",
for:b.key+"-key"},"Key"),JSX("input",{class:"uk-input",id:b.key+"-key",name:"key",type:"text",value:b.key||"","data-lpignore":"true"})),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:b.key+"-title"},"Title"),JSX("input",{class:"uk-input",id:b.key+"-title",name:"title",type:"text",value:b.title||"","data-lpignore":"true"})),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:b.key+"-description"},"Description"),JSX("textarea",{class:"uk-textarea",id:b.key+
"-description",name:"description","data-lpignore":"true"},b.description||"")))};d.reset=function(b,a){c.render(b,a)};var e={http:"HTTP",json:"JSON",curl:"curl"}})(c.form||(c.form={}))})(request||(request={}));
(function(c){(function(d){d.renderSwitcher=function(f,e){var b=f.key,a=f.prototype;return JSX("div",null,JSX("ul",{"data-uk-tab":""},nav.hashLink("details","Details",e),nav.hashLink("query","Query",e),nav.hashLink("auth","Auth",e),nav.hashLink("headers","Headers",e),nav.hashLink("body","Body",e),nav.hashLink("options","Options",e)),JSX("ul",{class:"uk-switcher uk-margin"},d.renderDetails(f),JSX("li",{class:"request-queryparams-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",
id:b+"-queryparams",name:"queryparams"},json.str(a.query)))),JSX("li",{class:"request-auth-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",id:b+"-auth",name:"auth"},json.str(a.auth)))),JSX("li",{class:"request-headers-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",id:b+"-headers",name:"headers"},json.str(a.headers)))),JSX("li",{class:"request-body-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",
id:b+"-body",name:"body"},json.str(a.body)))),JSX("li",{class:"request-options-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",id:b+"-options",name:"options"},json.str(a.options))))))}})(c.form||(c.form={}))})(request||(request={}));
(function(c){(function(d){d.renderURL=function(f,e){f="nav.navigate(`/c/"+f+"/"+e.key+"/call`);return false;";var b=c.prototypeToURL(e.prototype);return JSX("div",{class:"uk-margin-top uk-panel"},JSX("div",{class:"left",style:"width:120px;"},JSX("select",{class:"uk-select",id:e.key+"-method",name:"method"},c.allMethods.map(function(a){return a.key===e.prototype.method?JSX("option",{selected:"selected"},a.key):JSX("option",null,a.key)}))),JSX("div",{class:"url-view uk-inline right",id:e.key+"-link",
style:"width:calc(100% - 120px);"},JSX("a",{class:"uk-form-icon uk-form-icon-flip",href:"",onclick:f,title:"send request","uk-icon":"icon: play"}),JSX("div",{onclick:"request.editor.toggleURLEditor('"+e.key+"', true);"},JSX("span",{id:e.key+"-urlview",class:"url-link"},c.prototypeToHTML(e.prototype)))),JSX("div",{class:"url-input hidden uk-inline right",id:e.key+"-edit",style:"width:calc(100% - 120px);"},JSX("a",{class:"uk-form-icon uk-form-icon-flip",href:"",onclick:"request.editor.toggleURLEditor('"+
e.key+"', false);return false;",title:"cancel edit","uk-icon":"icon: close"}),JSX("form",{onsubmit:f},JSX("input",{class:"uk-input",id:e.key+"-url",name:"url",type:"text",value:b,"data-lpignore":"true"}))))}})(c.form||(c.form={}))})(request||(request={}));var transform;
(function(c){c.renderRequest=function(d,f,e){return JSX("div",{id:d+"--"+f+"-transform"},request.renderActionClose(),JSX("div",{class:"transform-title"},e),JSX("div",{class:"transform-result"}))};c.setResult=function(d){var f=dom.req("#"+d.coll+"--"+d.req+"-transform .transform-result");dom.setContent(f,JSX("div",{class:"uk-margin-top"},JSX("pre",null,d.out)));log.info("call result ["+d.coll+"/"+d.req+": "+d.fmt+"] received")}})(transform||(transform={}));var system;
(function(c){var d=function(){function f(){}f.prototype.getProfile=function(){if(!this.profile)throw"no active profile";return this.profile};f.prototype.apply=function(e){c.cache.profile=e.profile};return f}();c.cache=new d})(system||(system={}));
(function(c){c.onSystemMessage=function(d,f){switch(d){case command.server.error:console.warn("error from server: "+f);break;case command.server.connected:c.cache.apply(f);break;default:console.warn("unhandled system command ["+d+"]")}}})(system||(system={}));var __spreadArrays=this&&this.__spreadArrays||function(){for(var c=0,d=0,f=arguments.length;d<f;d++)c+=arguments[d].length;c=Array(c);var e=0;for(d=0;d<f;d++)for(var b=arguments[d],a=0,g=b.length;a<g;a++,e++)c[e]=b[a];return c},ui;
(function(c){function d(b){for(var a=b.childElementCount-1;0<=a;a--){var g=b.children[a];g.classList.contains("dynamic")&&b.removeChild(g)}}function f(){return JSX("span",{class:"uk-navbar-item dynamic",style:"padding: 0 8px;"}," / ")}function e(b){for(var a=[],g=1;g<arguments.length;g++)a[g-1]=arguments[g];a=a.map(function(h){return"/"+h}).join("");return nav.link({path:a,title:b,cls:"uk-navbar-item uk-logo uk-margin-remove uk-padding-remove dynamic"})}c.setBreadcrumbs=function(b,a,g,h){var k=dom.req("#breadcrumbs");
d(k);k.appendChild(nav.link({path:"/",title:"npn",cls:"uk-navbar-item uk-logo uk-margin-remove uk-padding-remove dynamic"}));if(b&&(k.appendChild(f()),k.appendChild(e(b,"c",b)),a&&(k.appendChild(f()),k.appendChild(e(a,"c",b,a)),g&&(k.appendChild(f()),k.appendChild(e(g,"c",b,a,g)),h&&0<h.length))))for(var l=0;l<h.length;l++){k.appendChild(f());var m=[b,a,g];m.push.apply(m,h.slice(0,l));k.appendChild(e.apply(void 0,__spreadArrays([h[l]],m)))}};c.reset=d})(ui||(ui={}));
(function(c){c.setPanels=function(d,f,e,b){dom.setDisplay("#welcome-panel",void 0===d);dom.setDisplay("#collection-panel",void 0!==d&&0<d.length&&void 0===f);dom.setDisplay("#request-panel",void 0!==f&&0<f.length);c.setBreadcrumbs(d,f,e,b);b="";e&&(b+=e+" ");d&&(b+=d);f&&(b+="/"+f);b=0==b.length?"npn":"npn: "+b;document.title=b}})(ui||(ui={}));
