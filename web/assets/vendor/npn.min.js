var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,b,e){d instanceof String&&(d=String(d));for(var f=d.length,a=0;a<f;a++){var c=d[a];if(b.call(e,c,a,d))return{i:a,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,b,e){if(d==Array.prototype||d==Object.prototype)return d;d[b]=e.value;return d};$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<d.length;++b){var e=d[b];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,b){var e=$jscomp.propertyToPolyfillSymbol[b];if(null==e)return d[b];e=d[e];return void 0!==e?e:d[b]};
$jscomp.polyfill=function(d,b,e,f){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,b,e,f):$jscomp.polyfillUnisolated(d,b,e,f))};$jscomp.polyfillUnisolated=function(d,b,e,f){e=$jscomp.global;d=d.split(".");for(f=0;f<d.length-1;f++){var a=d[f];if(!(a in e))return;e=e[a]}d=d[d.length-1];f=e[d];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(d,b,e,f){var a=d.split(".");d=1===a.length;f=a[0];f=!d&&f in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var c=0;c<a.length-1;c++){var g=a[c];if(!(g in f))return;f=f[g]}a=a[a.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?f[a]:null;b=b(e);null!=b&&(d?$jscomp.defineProperty($jscomp.polyfills,a,{configurable:!0,writable:!0,value:b}):b!==e&&($jscomp.propertyToPolyfillSymbol[a]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(a):$jscomp.POLYFILL_PREFIX+a,a=
$jscomp.propertyToPolyfillSymbol[a],$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6","es3");
$jscomp.checkStringArgs=function(d,b,e){if(null==d)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return d+""};
$jscomp.polyfill("String.prototype.startsWith",function(d){return d?d:function(b,e){var f=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var a=f.length,c=b.length;e=Math.max(0,Math.min(e|0,f.length));for(var g=0;g<c&&e<a;)if(f[e++]!=b[g++])return!1;return g>=c}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(d){return d?d:function(b,e){var f=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===e&&(e=f.length);e=Math.max(0,Math.min(e|0,f.length));for(var a=b.length;0<a&&0<e;)if(f[--e]!=b[--a])return!1;return 0>=a}},"es6","es3");$jscomp.arrayIteratorImpl=function(d){var b=0;return function(){return b<d.length?{done:!1,value:d[b++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(d){if(d)return d;var b=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var e=0,f=function(a){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(a||"")+"_"+e++,a)};return f},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<b.length;e++){var f=$jscomp.global[b[e]];"function"===typeof f&&"function"!=typeof f.prototype[d]&&$jscomp.defineProperty(f.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return d},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(d){d={next:d};d[Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,b){d instanceof String&&(d+="");var e=0,f={next:function(){if(e<d.length){var a=e++;return{value:b(a,d[a]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");var dom;
(function(d){function b(g,h){var k=[];(h?h.querySelectorAll(g):document.querySelectorAll(g)).forEach(function(l){k.push(l)});return k}function e(g,h){h=b(g,h);switch(h.length){case 0:break;case 1:return h[0];default:console.warn("found ["+h.length+"] elements with selector ["+g+"], wanted zero or one")}}function f(g,h){(h=e(g,h))||console.warn("no element found for selector ["+g+"]");return h}function a(g,h){"string"===typeof g&&(g=f(g));g.innerHTML=h;return g}function c(g,h,k){void 0===k&&(k="block");
"string"===typeof g&&(g=f(g));g.style.display=h?k:"none";return g}d.initDom=function(g,h){try{style.themeLinks(h),style.setTheme(g)}catch(k){console.warn("error setting style",k)}try{modal.wire()}catch(k){console.warn("error wiring modals",k)}try{drop.wire()}catch(k){console.warn("error wiring drops",k)}try{tags.wire()}catch(k){console.warn("error wiring tag editors",k)}try{flash.wire()}catch(k){console.warn("error wiring tag editors",k)}};d.els=b;d.opt=e;d.req=f;d.setHTML=a;d.setDisplay=c;d.setContent=
function(g,h){"string"===typeof g&&(g=f(g));d.clear(g);Array.isArray(h)?h.forEach(function(k){return g.appendChild(k)}):g.appendChild(h);return g};d.setText=function(g,h){"string"===typeof g&&(g=f(g));g.innerText=h;return g};d.switchElements=function(g,h){c(g,!1);c(h,!0);return!1};d.clear=function(g){return a(g,"")}})(dom||(dom={}));
(function(d){d.setValue=function(b,e){"string"===typeof b&&(b=d.req(b));b.value=e;return b};d.wireTextarea=function(b){function e(){b.style.height="auto";b.style.height=(64>b.scrollHeight?64:b.scrollHeight+6)+"px"}function f(){window.setTimeout(e,0)}b.dataset.autoresize||(b.dataset.autoresize="true",b.addEventListener("change",e,!1),b.addEventListener("cut",f,!1),b.addEventListener("paste",f,!1),b.addEventListener("drop",f,!1),b.addEventListener("keydown",f,!1),b.focus(),b.select());e()};d.setOptions=
function(b,e){"string"===typeof b&&(b=d.req(b));d.clear(b);e.forEach(function(f){var a=document.createElement("option");a.value=f;d.setText(a,f);b.appendChild(a)})};d.setSelectOption=function(b,e){"string"===typeof b&&(b=d.req(b));for(var f=0;f<b.children.length;f++){var a=b.children.item(f);a.selected=a.value===e}};d.insertAtCaret=function(b,e){if(b.selectionStart||0===b.selectionStart){var f=b.selectionStart,a=b.selectionEnd;b.value=b.value.substring(0,f)+e+b.value.substring(a,b.value.length);b.selectionStart=
f+e.length;b.selectionEnd=f+e.length}else b.value+=e}})(dom||(dom={}));
function JSX(d,b){var e=document.createElement(d);for(a in b)if(a&&b.hasOwnProperty(a)){var f=b[a];"dangerouslySetInnerHTML"===a?dom.setHTML(e,f.__html):!0===f?e.setAttribute(a,a):!1!==f&&null!==f&&void 0!==f&&e.setAttribute(a,f.toString())}var a=function(g){var h=c[g];if(Array.isArray(h))h.forEach(function(k){if(void 0===h||null===h)throw"child array for tag ["+d+"] is "+h+"\n"+e.outerHTML;if(void 0===k||null===k)throw"child for tag ["+d+"] is "+k+"\n"+e.outerHTML;"string"===typeof k&&(k=document.createTextNode(k));
e.appendChild(k)});else{if(void 0===h||null===h)throw"child for tag ["+d+"] is "+h+"\n"+e.outerHTML;h.nodeType||(h=document.createTextNode(h.toString()));e.appendChild(h)}};var c=arguments;for(f=2;f<arguments.length;f++)a(f);return e}var style;
(function(d){function b(f){e(f);switch(f){case "auto":f="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(f="dark");b(f);fetch("/profile/theme/"+f).then(function(a){return a.text()}).then(function(){});break;case "light":document.documentElement.classList.remove("uk-light");document.body.classList.remove("uk-light");document.documentElement.classList.add("uk-dark");document.body.classList.add("uk-dark");break;case "dark":document.documentElement.classList.add("uk-light");
document.body.classList.add("uk-light");document.documentElement.classList.remove("uk-dark");document.body.classList.remove("uk-dark");break;default:console.warn("invalid theme")}}function e(f){if("undefined"===typeof EmojiButton)dom.els(".picker-toggle").forEach(function(c){return dom.setDisplay(c,!1)});else{var a={position:"bottom-end",theme:f,zIndex:1021};dom.els(".textarea-emoji").forEach(function(c){var g=dom.req(".picker-toggle",c);g.addEventListener("click",function(){var h=dom.req(".uk-textarea",
c),k=new EmojiButton(a);k.on("emoji",function(l){drop.onEmojiPicked();dom.insertAtCaret(h,l)});k.togglePicker(g)},!1)})}}d.setTheme=b;d.linkColor="";d.themeLinks=function(f){d.linkColor=f+"-fg";dom.els(".theme").forEach(function(a){a.classList.add(d.linkColor)})}})(style||(style={}));var drop;
(function(d){function b(c){if(c.target){var g=c.target;c=g.dataset.key||"";g=g.dataset.t||"";var h=events.getOpenEvent(c);h?h(g):console.warn("no drop open handler registered for ["+c+"]")}}function e(c){if(c.target){var g=c.target;g.classList.contains("uk-open")&&(c=g.dataset.t||"",(g=events.getCloseEvent(g.dataset.key||""))&&g(c))}}function f(c){a&&c.preventDefault()}d.wire=function(){dom.els(".drop").forEach(function(c){c.addEventListener("show",b);c.addEventListener("beforehide",f);c.addEventListener("hide",
e)})};var a=!1;d.onEmojiPicked=function(){a=!0;setTimeout(function(){return a=!1},200)}})(drop||(drop={}));var events;(function(d){var b,e;d.register=function(f,a,c){b||(b=new map.Map);e||(e=new map.Map);a||(a=function(){});b.set(f,a);c&&e.set(f,c)};d.getOpenEvent=function(f){return b.get(f)};d.getCloseEvent=function(f){return e.get(f)}})(events||(events={}));var flash;
(function(d){function b(){var f=!1;dom.els(".alert-top").forEach(function(a){f=!0;a.classList.add("uk-animation-fade","uk-animation-reverse")});f&&setTimeout(e,1E3)}function e(){dom.els(".alert-top").forEach(function(f){f.remove()})}d.wire=function(){setTimeout(b,4E3)}})(flash||(flash={}));var modal;
(function(d){function b(c,g){a=g;notify.modal("#modal-"+c).show();return!1}function e(c){if(c.target&&(c=c.target,0===c.id.indexOf("modal"))){c=c.id.substr(6);var g=events.getOpenEvent(c);g?g(a):console.warn("no modal open handler registered for ["+c+"]");a=void 0}}function f(c){c.target&&(c=c.target,c.classList.contains("uk-open")&&(c=c.id.substr(6),(c=events.getCloseEvent(c))&&c(a),a=void 0))}var a;d.wire=function(){dom.els(".modal").forEach(function(c){c.addEventListener("show",e);c.addEventListener("hide",
f)})};d.open=b;d.openSoon=function(c){setTimeout(function(){return b(c)},0)};d.hide=function(c){c=notify.modal("#modal-"+c);c.$el.classList.contains("uk-open")&&c.hide()}})(modal||(modal={}));var tags;
(function(d){function b(a){var c=dom.req(".value",a),g=dom.req(".editor",a);dom.setDisplay(c,!1);dom.setDisplay(g,!0);var h=d.renderInput(c.innerText);h.onblur=function(){c.innerText=h.value;dom.setDisplay(c,!0);dom.setDisplay(g,!1);f(a.parentElement)};h.onkeypress=function(k){return"Enter"===k.key?(h.blur(),!1):!0};dom.setContent(g,h);h.focus()}function e(a){a.target?f(a.target):console.warn("no event target")}function f(a){var c=a.dataset.key||"",g=events.getOpenEvent(c);g?g():console.warn("no tag open handler registered for ["+
c+"]");a=dom.els(".item",a).map(function(h){return h.innerText});dom.setValue("#model-"+c+"-input",a.join(","))}d.wire=function(){dom.els(".tag-editor").forEach(function(a){a.addEventListener("moved",e);a.addEventListener("added",e);a.addEventListener("removed",e)})};d.removeTag=function(a){a=a.parentElement;var c=a.parentElement;a.remove();f(c)};d.addTag=function(a){if(a=a.parentElement){var c=d.renderItem();a.insertBefore(c,dom.req(".add-item",a));b(c)}};d.editTag=b})(tags||(tags={}));
(function(d){d.renderInput=function(b){return JSX("input",{type:"text",class:"uk-input",value:b})};d.renderItem=function(){return JSX("span",{class:"item"},JSX("span",{class:"value",onclick:"tags.editTag(this.parentElement);"}),JSX("span",{class:"editor"}),JSX("span",{class:"close","data-uk-icon":"icon: close; ratio: 0.6;",onclick:"tags.removeTag(this);"}))};d.renderTagsView=function(b){return JSX("div",{class:"tag-view"},b.map(function(e){return JSX("span",{class:"item"},e)}),JSX("div",{class:"clear"}))}})(tags||
(tags={}));var socket;(function(d){d.initBypass=function(){d.bypass=!0;d.connected=!0;nav.enabled=!1};d.bypassSend=function(b){d.debug&&console.debug("out",b);npn_handler?npn_handler(JSON.stringify(b,null,2)):console.warn("no bypass handler configured")}})(socket||(socket={}));(function(d){d.debug=!0;d.appUnloading=!1;d.currentService="";d.currentID="";d.bypass=!1;d.setAppUnloading=function(){d.appUnloading=!0};d.send=function(b){d.bypass?d.bypassSend(b):d.socketSend(b)}})(socket||(socket={}));
(function(d){function b(){var t=document.location,v="ws";"https:"===t.protocol&&(v="wss");return v+("://"+t.host+"/s")}function e(){g=new WebSocket(b());g.onopen=a;g.onmessage=function(t){return m(json.parse(t.data))};g.onerror=function(t){return r("socket",t.type)};g.onclose=c}function f(t,v,w){d.currentService=t;d.currentID=v;d.connectTime=Date.now();if(!m)throw"onMessage not initialized";w?d.initBypass():e()}function a(){log.info("socket connected");d.connected=!0;h=1;k.forEach(d.send);k=[];l(d.currentID)}
function c(){function t(){d.connected=!1;var v=Date.now()-d.connectTime;2E3>v?(h*=2,d.debug&&console.debug("socket closed immediately, reconnecting in "+h+" seconds"),setTimeout(function(){f(d.currentService,d.currentID)},1E3*h)):(log.info("socket closed after ["+v+"ms]"),f(d.currentService,d.currentID))}d.appUnloading||t()}var g;d.connected=!1;var h=0,k=[],l,m,r;d.init=function(t,v,w){l=t;m=v;r=w};d.initSocket=e;d.socketConnect=f;d.socketSend=function(t){d.debug&&console.debug("out",t);d.connected?
(t=json.str(t),g.send(t)):k.push(t)}})(socket||(socket={}));var profile;
(function(d){d.setNavColor=function(b,e){dom.setValue("#nav-color",e);dom.req("#navbar").className=e+"-bg uk-navbar-container uk-navbar";document.querySelectorAll(".nav_swatch").forEach(function(f){f.classList.remove("active")});b.classList.add("active")};d.setLinkColor=function(b,e){dom.setValue("#link-color",e);dom.els(".profile-link").forEach(function(f){f.classList.forEach(function(a){-1<a.indexOf("-fg")&&f.classList.remove(a);f.classList.add(e+"-fg")})});document.querySelectorAll(".link_swatch").forEach(function(f){f.classList.remove("active")});
b.classList.add("active")};d.setPicture=function(b){dom.setValue("#self-picture-input",b);return!1}})(profile||(profile={}));var arr;(function(d){d.find=function(b,e){for(var f=b.length>>>0,a=0;a<f;){var c=b[a];if(e(a,c))return c;a++}}})(arr||(arr={}));var date;
(function(d){function b(a){return a.toLocaleDateString()}function e(a){return a.toLocaleTimeString().slice(0,8)}d.dateToYMD=function(a){var c=a.getDate(),g=a.getMonth()+1;return a.getFullYear()+"-"+(9>=g?"0"+g:g)+"-"+(9>=c?"0"+c:c)};d.dateFromYMD=function(a){a=new Date(a);return new Date(a.getTime()+6E4*a.getTimezoneOffset())};d.dow=function(a){switch(a){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}};
d.toDateString=b;d.toTimeString=e;d.toDateTimeString=function(a){return b(a)+" "+e(a)};var f=6E4*(new Date).getTimezoneOffset();d.utcDate=function(a){return new Date(Date.parse(a)+f)}})(date||(date={}));var group;
(function(d){function b(c,g){if(!c)return[];c.sort(function(h,k){h=g(h);k=g(k);return h>k?1:h<k?-1:0});return c}function e(c,g,h){if(!c)return[g];var k=!1,l=h(g),m;for(m in c)h(c[m])==l&&(k=!0,c[m]=g);k||c.push(g);return c}var f=function(){return function(c){this.members=[];this.key=c}}();d.Group=f;var a=function(){function c(){this.groups=[]}c.prototype.findOrInsert=function(g){var h=arr.find(this.groups,function(k,l){return l.key===g});if(h)return h;h=new f(g);this.groups.push(h);return h};return c}();
d.GroupSet=a;d.groupBy=function(c,g){var h=new a;c&&c.forEach(function(k){h.findOrInsert(g(k)).members.push(k)});return h};d.findGroup=function(c,g){for(var h=0;h<c.length;h++){var k=c[h];if(k.key===g)return k.members}return[]};d.flatten=function(c){var g=[];c.forEach(function(h){return g.push.apply(g,h)});return g};d.sort=b;d.update=e;d.updateAndSort=function(c,g,h){return b(e(c,g,h),h)};d.remove=function(c,g,h){if(!c)return[];for(var k in c)h(c[k])==g&&delete c[k];return c}})(group||(group={}));
var json;(function(d){d.str=function(b){return void 0===b?"null":JSON.stringify(b,null,2)};d.parse=function(b){return JSON.parse(b)}})(json||(json={}));var log;
(function(d){function b(g,h){if(0===f)console.warn("call `log.init()` before attempting to log");else{var k=Date.now()-f;k=JSX("li",{class:e(g)},JSX("div",{class:"right"},k,"ms"),h);if(!c&&(c=dom.opt("#log-list"),!c)){console.warn(g+": "+h);return}c.appendChild(k);a||(a=dom.req("#log-content"));a.scrollTo(0,a.scrollHeight)}}function e(g){switch(g){case "debug":return"grey-fg";case "info":return"";case "warn":return"yellow-fg";case "error":return"red-fg";default:return""}}var f=0,a,c;d.init=function(){f=
Date.now();b("debug","npn started")};d.info=function(g){b("info",g)};d.l=b;d.toggle=function(){var g=dom.req("#workspace-content"),h=dom.req("#log-container"),k=""!==h.style.display&&"none"!==h.style.display;k?g.classList.remove("log-visible"):g.classList.add("log-visible");dom.setDisplay(h,!k);a||(a=dom.req("#log-content"));a.scrollTo(0,a.scrollHeight)}})(log||(log={}));var map;
(function(d){var b=function(){function e(){this.storage=Object.create(null)}e.prototype.get=function(f){return this.storage[f]};e.prototype.set=function(f,a){return this.storage[f]=a};return e}();d.Map=b})(map||(map={}));var nav;
(function(d){function b(a){var c=e(a);a=c[0];c=c[1];if(!d.enabled)return f(a,c),"";if(str.startsWith(a,"text/html;"))return"";str.startsWith(a,"/")&&(a=a.substr(1));var g=location.pathname;str.startsWith(g,"/")&&(g=g.substr(1));g!==a&&(g=a,history.pushState(g,"","/"+g));f(a,c)}function e(a){var c="",g=a.indexOf("#");-1<g&&(c=a.substr(g+1),a=a.substr(0,g));return[a,c]}d.enabled=!0;var f=function(a,c){console.warn("default nav handler called: "+a+(0<c.length?"#"+c:""))};d.init=function(a){f=a;window.onpopstate=
function(c){c.state?(c=e(c.state),f(c[0],c[1])):f("","")};b(location.pathname+(0<location.hash.length?location.hash:""))};d.navigate=b;d.pop=function(){var a=location.pathname.substr(0,location.pathname.lastIndexOf("/"));"/c"===a&&(a="");b(a)};d.hashLink=function(a,c,g){0===g.indexOf("#")&&(g=g.substr(1));var h="";g===a&&(h+="uk-active");c=JSX("li",{class:h},JSX("a",{href:"#"+a},c));c.onclick=function(){history.replaceState(history.state,"","#"+a)};return c};d.link=function(a){var c=a.path;str.startsWith(c,
"/")||(c="/"+c);a.cls=a.cls?" "+a.cls.trim():"";var g=JSX("span",null);a.icon&&(g=JSX("span",{class:"nav-icon","data-uk-icon":"icon: "+a.icon}));a.onclk?str.endsWith(a.onclk,";")||(a.onclk+=";"):a.onclk="";a.isButton||(a.cls=style.linkColor+a.cls);var h=a.path;a.hash&&0<a.hash.length&&(h+="#"+a.hash);return JSX("a",{class:a.cls,href:c,onclick:a.onclk+"nav.navigate('"+h+"', '"+a.title+"');return false;"},g,a.title)}})(nav||(nav={}));var notify;
(function(d){d.notify=function(b,e){UIkit.notification(b,{status:e?"success":"danger",pos:"top-right"})};d.confirm=function(b,e){UIkit.modal.confirm(b).then(e)};d.modal=function(b){var e=UIkit.modal(b);e||console.warn("no modal available with key ["+b+"]");return e}})(notify||(notify={}));var str;
(function(d){function b(f,a,c){c=c&&0<c?c|0:0;return f.substring(c,c+a.length)===a}function e(f,a,c){c=c&&c<f.length?c:f.length;return f.substring(c-a.length,c)===a}d.startsWith=b;d.endsWith=e;d.trimPrefix=function(f,a){return b(f,a)?f.slice(a.length):f};d.trimSuffix=function(f,a){return e(f,a)?f.substring(0,f.lastIndexOf(a)):f}})(str||(str={}));var command;
(function(d){d.client={ping:"ping",connect:"connect",getCollection:"getCollection",addCollection:"addCollection",deleteCollection:"deleteCollection",addRequestURL:"addRequestURL",getRequest:"getRequest",saveRequest:"saveRequest",deleteRequest:"deleteRequest",call:"call",transform:"transform"};d.server={error:"error",pong:"pong",connected:"connected",collections:"collections",collectionDetail:"collectionDetail",collectionAdded:"collectionAdded",collectionDeleted:"collectionDeleted",requestDetail:"requestDetail",
requestAdded:"requestAdded",requestDeleted:"requestDeleted",callResult:"callResult",transformResult:"transformResult"}})(command||(command={}));var npn;
(function(d){function b(e,f){console.error(e+": "+f);var a=f.lastIndexOf(":");-1<a&&(f=f.substr(a+1));notify.notify(e+" error: "+f,!1)}d.onError=b;d.init=function(e,f){try{var a=window.self!==window.top}catch(c){a=!0}a?(document.body.innerHTML="",document.body.appendChild(rbody.iframeError())):(log.init(),window.onbeforeunload=function(){socket.setAppUnloading()},nav.init(routing.route),socket.init(function(c){},routing.recv,b),socket.socketConnect(e,f,"wasm"===e))};d.debug=function(){var e=function(f,
a){void 0===a&&(a="");console.warn(f+": "+a)};e("Active Collection",collection.cache.active);e("Active Request",request.cache.active);e("Active Action",request.cache.action+" ["+request.cache.extra+"]")};d.testbed=function(){log.info("Testbed!")}})(npn||(npn={}));var routing;
(function(d){d.recv=function(b){socket.debug&&console.debug("in",b);switch(b.svc){case services.system.key:system.onSystemMessage(b.cmd,b.param);break;case services.collection.key:collection.onCollectionMessage(b.cmd,b.param);break;case services.request.key:request.onRequestMessage(b.cmd,b.param);break;default:console.warn("unhandled message for service ["+b.svc+"]")}};d.route=function(b,e){b=b.split("/");b=b.filter(function(g){return 0<g.length});console.debug("nav: "+b.join(" -> ")+(0<e.length?
" #"+e:""));e=0<b.length?b[0]:"c";switch(e){case "c":e=1<b.length&&0<b[1].length?b[1]:void 0;var f=2<b.length&&0<b[2].length?b[2]:void 0,a=3<b.length&&0<b[3].length?b[3]:void 0;b=4<b.length?b.slice(4):[];var c=collection.cache.active;collection.cache.setActiveCollection(e);e!==c&&e&&socket.send({svc:services.collection.key,cmd:command.client.getCollection,param:e});request.cache.setActiveRequest(e,f);request.cache.setActiveAction(e,a,b);ui.setPanels(e,f,a,b);break;default:console.warn("unhandled svc ["+
e+"]")}}})(routing||(routing={}));var services;(function(d){d.system={key:"system",title:"System",plural:"systems",icon:"close"};d.collection={key:"collection",title:"Collection",plural:"Collections",icon:"folder"};d.request={key:"request",title:"Request",plural:"Requests",icon:"file-text"};var b=[d.system,d.collection];d.fromKey=function(e){var f=arr.find(b,function(a,c){return c.key===e});if(!f)throw"invalid service ["+e+"]";return f}})(services||(services={}));var rbody;
(function(d){d.renderBody=function(b,e){if(!e)return JSX("div",null,"No body");switch(e.type){case "json":return e=e.config,JSX("div",null,JSX("em",null,"JSON"),JSX("pre",null,json.str(e.msg)));case "html":return b=request.baseURL(b),e=e.config,JSX("div",{class:"html-body"},JSX("span",{class:"base-url hidden"},b),JSX("span",{class:"preview-link right"},"(",JSX("a",{class:style.linkColor,href:"",onclick:"rbody.renderHTMLPreview(this);return false"},"preview"),")"),JSX("span",{class:"text-link right hidden"},
"(",JSX("a",{class:style.linkColor,href:"",onclick:"rbody.renderHTMLText(this);return false"},"text"),")"),JSX("em",null,"HTML"),JSX("pre",{class:"text-content",style:"overflow: auto; max-height: 720px;"},e.content),JSX("div",{class:"preview-content uk-margin-top hidden",style:"overflow: auto; max-height: 720px; border: 1px solid #666;"}));case "image":return e=e.config,JSX("img",{alt:"response image",src:"data:"+e.type+";base64,"+e.content});case "raw":return e=e.config,JSX("div",null,JSX("em",null,
e.type?e.type:"Unknown Type"),JSX("pre",null,json.str(e)));case "error":return e=e.config,JSX("div",null,JSX("em",null,"Error"),JSX("pre",null,e.message));default:return JSX("div",null,"unhandled body type [",e.type,"]")}}})(rbody||(rbody={}));
(function(d){function b(e,f){var a=e.parentElement.parentElement;if(!a.classList.contains("html-body"))throw"container is not class [html-body]";e=dom.req(".base-url",a);var c=dom.req(".text-link",a),g=dom.req(".text-content",a),h=dom.req(".preview-link",a);a=dom.req(".preview-content",a);dom.setDisplay(c,f);dom.setDisplay(g,!f);dom.setDisplay(h,!f);dom.setDisplay(a,f);return[e.innerText,g,a]}d.renderHTMLPreview=function(e){e=b(e,!0);var f=document.createElement("iframe");f.style.width="100%";f.style.minHeight=
"720px";var a=e[0];var c=e[1].innerText;var g=c.indexOf("<head");-1<g&&(g=c.indexOf(">",g),-1<g&&(a='<base href="'+a+'" target="_blank">',c=c.substr(0,g+1)+a+c.substr(g+1)));e[2].innerHTML="";e[2].appendChild(f);e=f.contentDocument||f.contentWindow.document;e.open();e.write(c);e.close()};d.renderHTMLText=function(e){b(e,!1)};d.iframeError=function(){return JSX("div",{class:"uk-container"},JSX("div",{class:"uk-section uk-section-small"},JSX("h3",null,"Rendering Error"),JSX("p",null,"This page indicates that the HTML preview was unable to render.")))}})(rbody||
(rbody={}));(function(d){d.AllTypes=[{key:"error",title:"Error",hidden:!0},{key:"form",title:"Form",hidden:!1},{key:"html",title:"HTML",hidden:!1},{key:"json",title:"JSON",hidden:!1},{key:"large",title:"Large File",hidden:!1},{key:"raw",title:"Raw",hidden:!0}]})(rbody||(rbody={}));var call;
(function(d){d.prepare=function(b,e){socket.send({svc:services.request.key,cmd:command.client.call,param:{coll:b,req:e.key,proto:e.prototype}});log.info("calling ["+request.prototypeToURL(e.prototype)+"]")};d.setResult=function(b,e){var f=dom.req("#"+b.collection+"--"+b.request+"-call");dom.setContent(f,d.renderResult(b,e));log.info("call result ["+b.id+"] received")}})(call||(call={}));
(function(d){function b(c,g){var h;if(!c)return JSX("div",null,"no response");var k=c.contentType||"",l=c.contentLength&&-1<c.contentLength?"("+c.contentLength+" bytes)":c.body&&-1<c.body.length?"("+c.body.length+" bytes)":"";k=JSX("div",null,JSX("h3",null,c?c.status:"Unknown"),JSX("em",null,c.method," ",c.url),JSX("div",{class:"mt"},JSX("ul",{"data-uk-tab":""},nav.hashLink("result","Result",g),nav.hashLink("request","Request",g),nav.hashLink("headers","Response",g),nav.hashLink("body","Body",g),
nav.hashLink("timing","Timing",g)),JSX("ul",{class:"uk-switcher uk-margin"},JSX("li",null,JSX("div",null,((null===(h=c.timing)||void 0===h?void 0:h.completed)||0)/1E3,"ms"),JSX("div",null,c.proto," ",JSX("em",null,c.status),JSX("div",null,k," ",l))),JSX("li",null,e("Final Request Headers",c.requestHeaders)),JSX("li",null,e("Response Headers",c.headers)),JSX("li",null,rbody.renderBody(c.url,c.body)),JSX("li",null,f(c.timing)))));return c.prior?JSX("div",null,b(c.prior,g),JSX("hr",null),k):k}function e(c,
g){void 0===g&&(g=[]);return 0===g.length?a(c,"No headers"):JSX("div",{class:"uk-overflow-auto"},JSX("h4",null,c),JSX("table",{class:"uk-table uk-table-divider uk-text-left uk-table-small uk-table-justify"},JSX("tbody",null,g.map(function(h){return JSX("tr",{title:h.desc},JSX("td",{class:"uk-text-nowrap"},h.k),JSX("td",{class:"uk-text-nowrap"},h.v))}))))}function f(c){if(!c)return JSX("div",null,"No timing");var g=d.timingSections(c);return JSX("div",{class:"timing-panel"},JSX("div",{class:"result-timing-graph"},
JSX("div",null,JSX("div",{class:"timing-start"},"0ms"),JSX("div",{class:"timing-end"},c.completed/1E3,"ms")),JSX("object",{type:"image/svg+xml",style:"width: 100%; height: "+24*g.length+"px",data:d.timingGraph(g)},"SVG not supported")),JSX("hr",null),g.map(function(h){return JSX("div",null,h.key,": ",h.start," - ",h.end)}))}function a(c,g){g||(g="undefined");return JSX("div",null,JSX("h4",null,c)," ",g)}d.renderResult=function(c,g){return[JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",
href:"",onclick:"nav.pop();return false;",title:"close result"})),c.error?JSX("div",null,JSX("div",{class:"red-fg"},"error: ",c.error)):JSX("div",null),b(c.response,g)]}})(call||(call={}));
(function(d){d.timingSections=function(b){var e=[],f=function(c,g,h,k){h&&k&&e.push({key:c,group:g,start:h,end:k})};f("dns","connect",b.dnsStart,b.dnsEnd);f("connect","connect",b.connectStart,b.connectEnd);var a=b.connectEnd;0<(b.tlsEnd||0)&&(a=b.tlsEnd||0,f("tls","connect",b.tlsStart||0,a));f("reqheaders","request",a,b.wroteHeaders);2<b.wroteRequest-b.wroteHeaders&&f("reqbody","request",b.wroteHeaders,b.wroteRequest);f("rspwait","response",b.wroteRequest,b.firstResponseByte);f("rspheaders","response",
b.firstResponseByte,b.responseHeaders);f("rspbody","response",b.responseHeaders,b.completed);return e};d.timingGraph=function(b){for(var e,f=[],a=0;a<b.length;a++){var c=b[a];0<c.group.length&&f.push(encodeURIComponent(c.key+".g")+"="+encodeURIComponent(c.group));f.push(encodeURIComponent(c.key+".s")+"="+encodeURIComponent(c.start));f.push(encodeURIComponent(c.key+".e")+"="+encodeURIComponent(c.end))}f.push("t="+(null===(e=system.cache.profile)||void 0===e?void 0:e.theme)||"light");return"/svg/gantt?"+
f.join("&")}})(call||(call={}));var collection;
(function(d){var b=function(){function e(){this.collections=[]}e.prototype.updateCollection=function(f){this.collections=group.updateAndSort(this.collections,f,function(a){return a.key});d.renderCollections(this.collections)};e.prototype.setActiveCollection=function(f){this.active!==f&&(this.active=f,d.renderCollections(this.collections))};e.prototype.deleteCollection=function(f){socket.send({svc:services.collection.key,cmd:command.client.deleteCollection,param:f})};e.prototype.getActiveCollection=
function(){return this.active?this.getCollection(this.active):void 0};e.prototype.getCollection=function(f){for(var a=0,c=this.collections;a<c.length;a++){var g=c[a];if(g.key==f)return g}};return e}();d.cache=new b})(collection||(collection={}));
(function(d){function b(f){var a=f.title;a&&0!==a.length||(a=f.key);var c=nav.link({path:"/c/"+f.key,title:a,icon:"folder"});if(d.cache.active===f.key){var g=request.cache.active,h=request.cache.summaries.get(f.key);h&&(c=void 0,c=g?nav.link({path:"/c/"+f.key,title:a,icon:"album"}):JSX("strong",null,nav.link({path:"/",title:a,icon:"album"})),c=JSX("div",null,c,h.map(function(k){var l=nav.link({path:"/c/"+f.key+"/"+k.key,title:k.title&&0<k.title.length?k.title:k.key,icon:"link"});return JSX("div",
{class:"uk-margin-small-left"},request.cache.active===k.key?JSX("strong",null,l):l)})))}return JSX("div",{class:"nav-item collection-link collection-link-"+f.key},c)}function e(f,a){a=group.sort(a,function(c){return c.order});return JSX("ul",{class:"uk-list uk-list-divider"},a.map(function(c){var g=c.title;g&&0!==c.title.length||(g=c.key);return JSX("li",null,nav.link({path:"/c/"+f+"/"+c.key,title:g}),c.description&&c.description.length?JSX("div",null,JSX("em",null,c.description)):JSX("span",null))}))}
d.renderCollections=function(f){return dom.els(".collection-list").forEach(function(a){dom.setContent(a,f.map(function(c){return b(c)}))})};d.renderCollection=function(f,a){var c=f.title?f.title:f.key,g=JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.pop();return false;",title:"close collection"}));c=JSX("h3",{class:"uk-card-title"},JSX("span",{class:"nav-icon-h3","data-uk-icon":"icon: album"}),c);var h=JSX("p",null,f.description||"");var k="confirm('Are you sure you want to delete collection ["+
f.key+"]?')";k=JSX("div",null,JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"return false;"},"Edit"),JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"if ("+k+") { collection.cache.deleteCollection('"+f.key+"') }"},"Delete"));return JSX("div",null,JSX("div",{class:"uk-card uk-card-body uk-card-default"},g,c,h,k),JSX("div",{class:"uk-card uk-card-body uk-card-default uk-margin-top"},JSX("h3",{class:"uk-card-title"},
"Requests"),JSX("form",{onsubmit:"collection.addRequestURL('"+f.key+"');return false;"},JSX("div",{class:"uk-margin-top uk-inline uk-width-expand"},JSX("button",{class:"uk-form-icon uk-form-icon-flip",type:"submit",title:"add request","uk-icon":"icon: plus"}),JSX("input",{id:"coll-request-add-url",class:"uk-input",placeholder:"add a request by url","data-lpignore":"true"}))),JSX("div",{id:"request-list",class:"uk-margin-top"},e(f.key,a))))};d.addFromInput=function(){var f=dom.req("#coll-add-input"),
a=f.value.trim();a&&0<a.length&&(f.value="",socket.send({svc:services.collection.key,cmd:command.client.addCollection,param:a}),log.info("adding request ["+a+"]"))};d.addRequestURL=function(f){var a=dom.req("#coll-request-add-url"),c=a.value.trim();c&&0<c.length&&(a.value="",socket.send({svc:services.collection.key,cmd:command.client.addRequestURL,param:{coll:f,url:c}}),log.info("adding request ["+c+"]"))}})(collection||(collection={}));
(function(d){d.onCollectionMessage=function(b,e){switch(b){case command.server.collections:d.cache.collections=group.sort(e,function(f){return f.key});log.info("processing ["+d.cache.collections.length+"] collections");d.renderCollections(d.cache.collections);break;case command.server.collectionDetail:log.info("processing ["+e.requests.length+"] requests for collection ["+e.collection.key+"]");d.cache.updateCollection(e.collection);request.cache.setCollectionRequests(e.collection,e.requests);d.renderCollections(d.cache.collections);
break;case command.server.collectionAdded:log.info("processing new collection ["+e.active+"]");d.cache.collections=e.collections;nav.navigate("/c/"+e.active);break;case command.server.collectionDeleted:log.info("processing deleted collection ["+e+"]");d.cache.collections=d.cache.collections.filter(function(f){return f.key!==e});d.renderCollections(d.cache.collections);nav.navigate("/");break;default:console.warn("unhandled collection command ["+b+"]")}}})(collection||(collection={}));var header;
(function(d){function b(f,a,c,g){return{key:f,description:a,req:c,rsp:g,link:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/"+f}}d.commonHeaders=[b("Accept","Informs the server about the types of data that can be sent back.",!0,!1),b("Access-Control-Allow-Headers","Used in response to a preflight request to indicate which HTTP headers can be used when making the actual request.",!1,!0),b("Access-Control-Allow-Methods","Specifies the methods allowed when accessing the resource in response to a preflight request.",
!1,!0),b("Access-Control-Allow-Origin","Indicates whether the response can be shared.",!1,!0),b("Authorization","Contains the credentials to authenticate a user-agent with a server.",!0,!1),b("Connection","Controls whether the network connection stays open after the current transaction finishes.",!0,!1),b("Content-Encoding","Used to specify the compression algorithm.",!0,!0),b("Content-Length","The size of the resource, in decimal number of bytes.",!0,!0),b("Content-Type","Indicates the media type of the resource.",
!0,!0),b("Cookie","Contains stored HTTP cookies previously sent by the server with the Set-Cookie header.",!0,!1),b("Date","The Date general HTTP header contains the date and time at which the message was originated.",!1,!0),b("ETag","A unique string identifying the version of the resource.",!1,!0),b("Expires","The date/time after which the response is considered stale.",!1,!0),b("Host","Specifies the domain name of the server (for virtual hosting), and (optionally) the TCP port number on which the server is listening.",
!0,!1),b("Last-Modified","The last modification date of the resource, used to compare several versions of the same resource.",!1,!0),b("Location","Indicates the URL to redirect a page to. ",!1,!0),b("Origin","Indicates where a fetch originates from.",!0,!1),b("Referer","The address of the previous web page from which a link to the currently requested page was followed.",!0,!1),b("Server","Contains information about the software used by the origin server to handle the request.",!1,!0),b("Set-Cookie",
"Send cookies from the server to the user-agent.",!1,!0),b("User-Agent","Contains a characteristic string that allows the network protocol peers to identify the application",!0,!1)];var e;d.getCommonHeaderByName=function(f){if(!e){e=new map.Map;for(var a=0,c=d.commonHeaders;a<c.length;a++){var g=c[a];e.set(g.key,g)}}return e.get(f)};d.dumpCommonHeaders=function(){var f=function(a,c,g){var h=!1;console.debug("\n::: "+a+" Headers");d.commonHeaders.forEach(function(k){k.req==c&&k.rsp==g&&(h=!0,console.debug(k.key+
": "+k.link),console.debug("  - "+k.description))});h||console.debug("none")};f("Common",!0,!0);f("Request",!0,!1);f("Response",!1,!0);f("Invalid",!1,!1)}})(header||(header={}));var request;
(function(d){function b(){return JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate(`/c/${collection.cache.active}/${request.cache.active}`);return false;",title:"close collection"}))}d.renderActionEmpty=function(){return JSX("div",null)};d.renderActionUnknown=function(e,f){return JSX("div",null,b(),"unknown action: ",e," (",f,")")};d.renderActionCall=function(e,f){return JSX("div",{id:e+"--"+f+"-call"},b(),JSX("div",{class:"call-title"},
"Loading..."),JSX("div",{class:"call-result"}))};d.renderActionClose=b})(request||(request={}));
(function(d){var b=function(){function e(){this.summaries=new map.Map;this.requests=new map.Map;this.extra=[]}e.prototype.setCollectionRequests=function(f,a){this.summaries.set(f.key,a);if(f.key===collection.cache.active){dom.setContent("#collection-panel",collection.renderCollection(f,a));for(var c=0;c<a.length;c++){var g=a[c];this.active===g.key&&(d.renderActiveRequest(f.key),this.action&&d.renderAction(f.key,g.key,this.action,this.extra))}}};e.prototype.setActiveRequest=function(f,a){f&&this.active!==
a&&((this.active=a)&&d.renderActiveRequest(f),collection.renderCollections(collection.cache.collections))};e.prototype.setActiveAction=function(f,a,c){f&&(this.extra.length===c.length&&this.extra.every(function(g,h){return g===c[h]}),this.active&&(this.action=a,this.extra=c,d.renderAction(f,this.active,this.action,this.extra)))};e.prototype.updateRequest=function(f,a){var c=this.requests.get(f);c=group.update(c,a,function(g){return g.key});this.requests.set(f,c);c=this.summaries.get(f);c=c.map(function(g){return g.key==
a.key?d.toSummary(a,0):g});this.summaries.set(f,c);collection.cache.active===f&&collection.renderCollection(collection.cache.getActiveCollection(),c)};e.prototype.removeRequest=function(f,a){var c=this.requests.get(f);c=group.remove(c,a,function(g){return g.key});this.requests.set(f,c);c=this.summaries.get(f);c=c.filter(function(g){return g.key!==a});this.summaries.set(f,c);collection.cache.active===f&&collection.renderCollection(collection.cache.getActiveCollection(),c);this.active===a&&d.cache.setActiveRequest(f,
void 0)};return e}();d.cache=new b})(request||(request={}));
(function(d){d.diff=function(b,e){var f=[],a=function(h,k,l){if(void 0===k||null===k)k="";if(void 0===l||null===l)l="";if("object"===typeof k&&"object"===typeof l){for(var m in k)k.hasOwnProperty(m)&&a(h+"."+m,k[m],l[m]);for(m in l)l.hasOwnProperty(m)&&!k.hasOwnProperty(m)&&a(h+"."+m,k[m],l[m])}else k!==l&&f.push({k:h,l:k,r:l})},c=function(h,k,l){if(void 0===k||null===k)k=[];if(void 0===l||null===l)l=[];k.length!==l.length&&f.push({k:h+".length",l:k.length,r:l.length});for(var m=0;m<k.length;m++)a(h+
"["+m+"]",k[m],l[m])},g=function(h,k,l){return k?l?!1:(f.push({k:h,l:"(defined)",r:null}),!0):(l&&f.push({k:h,l:null,r:"(defined)"}),!0)};if(g("request",b,e))return f;a("key",b.key,e.key);a("title",b.title,e.title);a("description",b.description,e.description);b=b.prototype;e=e.prototype;a("method",b.method,e.method);a("protocol",b.protocol,e.protocol);a("domain",b.domain,e.domain);a("port",b.port,e.port);a("path",b.path,e.path);c("query",b.query,e.query);a("fragment",b.fragment,e.fragment);c("headers",
b.headers,e.headers);c("auth",b.auth,e.auth);!g("body",b.body,e.body)&&b.body&&e.body&&(a("body.type",b.body.type,e.body.type),a("body.config",b.body.config,e.body.config));b=b.options;e=e.options;if(g("options",b,e)||!b||!e)return f;a("timeout",b.timeout,e.timeout);a("ignoreRedirects",b.ignoreRedirects,e.ignoreRedirects);a("ignoreReferrer",b.ignoreReferrer,e.ignoreReferrer);a("ignoreCerts",b.ignoreCerts,e.ignoreCerts);a("ignoreCookies",b.ignoreCookies,e.ignoreCookies);c("excludeDefaultHeaders",b.excludeDefaultHeaders,
e.excludeDefaultHeaders);a("readCookieJars",b.readCookieJars,e.readCookieJars);a("writeCookieJar",b.writeCookieJar,e.writeCookieJar);a("sslCert",b.sslCert,e.sslCert);a("userAgentOverride",b.userAgentOverride,e.userAgentOverride);return f}})(request||(request={}));
(function(d){d.getSummary=function(b,e){var f=0;for(b=d.cache.summaries.get(b)||[];f<b.length;f++){var a=b[f];if(a.key===e)return a}};d.getRequest=function(b,e){var f=0;for(b=d.cache.requests.get(b)||[];f<b.length;f++){var a=b[f];if(a.key===e)return a}};d.toSummary=function(b,e){return{key:b.key,title:b.title,description:b.description,url:d.prototypeToURL(b.prototype),order:e}};d.onRequestMessage=function(b,e){var f=collection.cache.active;switch(b){case command.server.requestDetail:log.info("received details for request ["+
e.key+"]");d.cache.updateRequest(f,e);d.cache.active===e.key&&(d.renderActiveRequest(f),d.renderAction(f,d.cache.active,d.cache.action,d.cache.extra));break;case command.server.requestAdded:log.info("received details for new request ["+e.key+"]");d.cache.updateRequest(f,e);nav.navigate("/c/"+f+"/"+e.key);break;case command.server.requestDeleted:log.info("received details for deleted request ["+e+"]");d.cache.removeRequest(f,e);nav.navigate("/c/"+f);break;case command.server.callResult:call.setResult(e,
location.hash);break;case command.server.transformResult:transform.setResult(e);break;default:console.warn("unhandled request command ["+b+"]")}}})(request||(request={}));
(function(d){d.MethodGet={key:"GET",description:""};d.MethodHead={key:"HEAD",description:""};d.MethodPost={key:"POST",description:""};d.MethodPut={key:"PUT",description:""};d.MethodPatch={key:"PATCH",description:""};d.MethodDelete={key:"DELETE",description:""};d.MethodConnect={key:"CONNECT",description:""};d.MethodOptions={key:"OPTIONS",description:""};d.MethodTrace={key:"TRACE",description:""};d.allMethods=[d.MethodGet,d.MethodHead,d.MethodPost,d.MethodPut,d.MethodPatch,d.MethodDelete,d.MethodConnect,
d.MethodOptions,d.MethodTrace]})(request||(request={}));
(function(d){function b(e,f,a,c,g,h,k){str.endsWith(e,":")&&(e=e.substr(0,e.length-1));str.startsWith(h,"#")&&(h=h.substr(1));return{method:"get",protocol:e,domain:f,port:a,path:c,query:g,fragment:h,auth:k}}d.prototypeFromURL=function(e){e=new URL(e);var f=[];e.searchParams.forEach(function(g,h){return f.push({k:h,v:g})});var a=[];0<e.username.length&&a.push({type:"basic",config:{username:e.username,password:e.password,showPassword:!0}});var c;e.port&&0<e.port.length&&(c=parseInt(e.port,10));return b(e.protocol,
e.hostname,c,e.pathname,f,e.hash,a)}})(request||(request={}));
(function(d){function b(e,f){var a=d.getRequest(e,f);if(a)dom.setContent("#request-panel",d.form.renderFormPanel(e,a)),d.editor.wireForm(a.key);else if(f=d.getSummary(e,f))dom.setContent("#request-panel",d.renderSummaryPanel(e,f)),socket.send({svc:services.request.key,cmd:command.client.getRequest,param:{coll:e,req:f.key}})}d.renderActiveRequest=function(e){d.cache.active?b(e,d.cache.active):console.warn("no active request")};d.render=b;d.renderAction=function(e,f,a,c){var g=dom.opt(".request-editor"),
h=dom.opt(".request-action");if(g&&h){switch(a){case void 0:dom.setContent(h,d.renderActionEmpty());break;case "call":call.prepare(e,d.form.extractRequest(d.cache.active));dom.setContent(h,d.renderActionCall(e,f));break;case "delete":socket.send({svc:services.request.key,cmd:command.client.deleteRequest,param:{coll:e,req:f}});break;case "transform":var k=d.form.extractRequest(d.cache.active);dom.setContent(h,transform.renderRequest(e,f,c[0]));socket.send({svc:services.request.key,cmd:command.client.transform,
param:{coll:e,req:f,fmt:c[0],proto:k.prototype}});break;default:console.warn("unhandled request action ["+a+"]"),dom.setContent(h,d.renderActionUnknown(a,c))}dom.setDisplay(g,void 0===a);dom.setDisplay(h,void 0!==a)}}})(request||(request={}));
(function(d){d.renderSummaryPanel=function(b,e){return JSX("div",null,JSX("div",{class:"uk-card uk-card-body uk-card-default"},JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate('/c/"+b+"');return false;",title:"close request"})),JSX("h3",{class:"uk-card-title"},e.title?e.title:e.key),JSX("p",null,"Loading...")))}})(request||(request={}));
(function(d){function b(c){c=new URL(c);return{method:d.MethodGet.key,protocol:str.trimSuffix(c.protocol,":"),domain:c.hostname,port:c.port?parseInt(c.port,10):void 0,path:str.trimPrefix(c.pathname,"/"),fragment:str.trimPrefix(c.hash,"#")}}function e(c){if(!c)return"invalid";var g=c.domain;c.port&&0<c.port&&(g+=":"+c.port);return c.protocol+"://"+g+"/"}function f(c){var g=[],h=function(r,t){g.push({t:r,v:t})};h("protocol",c.protocol);h("","://");if(c.auth)for(var k=0,l=c.auth;k<l.length;k++){var m=
l[k];if("basic"===m.type){k=m.config;h("username",k.username);h("",":");k.showPassword?h("password",k.password):h("password","****");h("","@");break}}h("domain",c.domain);c.port&&(h("",":"),h("port",c.port.toString()));c.path&&0<c.path.length&&(h("","/"),h("path",c.path));c.query&&0<c.query.length&&(h("","?"),k=c.query.map(function(r){return encodeURIComponent(r.k)+"="+encodeURIComponent(r.v)}).join("&"),h("query",k));c.fragment&&0<c.fragment.length&&(h("","#"),h("fragment",encodeURIComponent(c.fragment)));
return g}function a(c){switch(c){case "username":case "password":case "protocol":case "auth":return"green-fg";case "domain":case "port":return"blue-fg";case "path":return"bluegrey-fg";case "query":return"purple-fg";default:return""}}d.urlToPrototype=b;d.prototypeToURL=function(c){return f(c).map(function(g){return g.v}).join("")};d.prototypeToHTML=function(c){return JSX("span",null,f(c).map(function(g){return JSX("span",{title:g.t,class:a(g.t)},g.v)}))};d.baseURL=function(c){return e(b(c))};d.prototypeBaseURL=
e})(request||(request={}));
(function(d){(function(b){b.initAuthEditor=function(e){};b.setAuth=function(e,f){var a=new URL(e.url.value),c="",g="";if(f)for(var h=0;h<f.length;h++){var k=f[h];"basic"===k.type&&(g=k.config,c=encodeURIComponent(g.username),g=encodeURIComponent(g.password))}a.username=c;a.password=g;e.url.value=a.toString()};b.updateBasicAuth=function(e,f){var a=[];try{a=json.parse(e.auth.value)}catch(l){console.warn("invalid auth JSON ["+e.auth.value+"]")}var c=-1;a||(a=[]);for(var g=0;g<a.length;g++){var h=a[g];
"basic"===h.type&&(c=g)}if(f)for(g=0;g<f.length;g++)if(h=f[g],"basic"===h.type)var k=h.config;-1===c?k&&a.push({type:"basic",config:k}):k?(f=(f=a[c].config)?{username:k.username,password:k.password,showPassword:f.showPassword}:k,a[c]={type:"basic",config:f}):a.splice(c,1);e.auth.value=json.str(a)}})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){function e(g){var h=json.parse(g.value);return JSX("div",{class:"uk-margin-top"},f(g,h),JSX("div",{class:"body-editor","data-key":""}),rbody.AllTypes.filter(function(k){return!k.hidden}).map(function(k){a:{var l=k.key;var m=h&&h.type==k.key?h.config:null;k=k.key===(h?h.type:"");var r="uk-margin-top body-editor";k||(r+=" hidden");switch(l){case "json":l=JSX("div",{class:r,"data-key":l},c(l,k?m:void 0,g));break a;case "html":l=JSX("div",{class:r,"data-key":l},a(l,k?m:void 0,
g));break a;default:l=JSX("div",{class:r,"data-key":l},"Unimplemented [",l,"] editor")}}return l}))}function f(g,h){var k=JSX("select",{class:"uk-select"},JSX("option",{value:""},"No body"),rbody.AllTypes.filter(function(l){return!l.hidden}).map(function(l){return h&&h.type===l.key?JSX("option",{value:l.key,selected:"selected"},l.title):JSX("option",{value:l.key},l.title)}));b.events(k,function(){dom.els(".body-editor",k.parentElement).forEach(function(l){var m=l.dataset.key;k.value===m?(""===m&&
(g.value="null",b.check()),l.classList.remove("hidden")):l.classList.add("hidden")})});return k}function a(g,h,k){var l=JSX("textarea",{class:"uk-textarea"},h?h.content:""),m=h?h.content:"";b.events(l,function(){m!==l.value&&(k.value=json.str({type:"html",config:{content:l.value}}),b.check())});return l}function c(g,h,k){var l=JSX("textarea",{class:"uk-textarea"},json.str(h?h.msg:null)),m=h?json.str(h.msg):"null";b.events(l,function(){if(m!==l.value){var r=l.value;try{r=json.parse(r)}catch(t){}k.value=
json.str({type:"json",config:{msg:r}});b.check()}});return l}b.initBodyEditor=function(g){g.parentElement.appendChild(e(g))};b.setBody=function(g,h){}})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){function e(g,h){b.initURLEditor(h.url);b.initAuthEditor(h.auth);b.initQueryParamsEditor(h.qp);b.initHeadersEditor(h.headers);b.initBodyEditor(h.body);b.initOptionsEditor(h.options)}function f(g,h){var k=function(){h();return!0};g.onchange=k;g.onkeyup=k;g.onblur=k}function a(){d.form.checkEditor(collection.cache.active,d.cache.active)}function c(g){f(g.key,a);f(g.title,a);f(g.desc,a);f(g.method,a);f(g.url,function(){var h=d.prototypeFromURL(g.url.value);b.setURL(g,h);a()});
f(g.auth,function(){try{var h=json.parse(g.auth.value)}catch(k){console.warn("invalid auth JSON ["+g.auth.value+"]"),h=[]}b.setAuth(g,h);a()});f(g.qp,function(){try{var h=json.parse(g.qp.value)}catch(k){console.warn("invalid qp JSON ["+g.qp.value+"]"),h=[]}b.setQueryParams(g.url,h);a()});f(g.headers,function(){try{var h=json.parse(g.headers.value)}catch(k){console.warn("invalid headers JSON ["+g.headers.value+"]"),h=[]}b.setHeaders(g,h);a()});f(g.body,function(){try{var h=json.parse(g.body.value)}catch(k){console.warn("invalid body JSON ["+
g.body.value+"]")}b.setBody(g,h);a()})}b.wireForm=function(g){var h=function(k){return"#"+g+"-"+k};h={key:dom.req(h("key")),title:dom.req(h("title")),desc:dom.req(h("description")),url:dom.req(h("url")),method:dom.req(h("method")),auth:dom.req(h("auth")),qp:dom.req(h("queryparams")),headers:dom.req(h("headers")),body:dom.req(h("body")),options:dom.req(h("options"))};e(g,h);c(h)};b.events=f;b.check=a})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){function e(c){var g=JSX("ul",{id:c.id+"-ul",class:"uk-list uk-list-divider"}),h=json.parse(c.value);g.innerText="";g.appendChild(b.mapHeader(c.id,"addHeaderRow"));if(h)for(var k=0;k<h.length;k++)f(c.id,k,g,h[k]);return g}function f(c,g,h,k){g=b.newChild(c,g,k,"removeHeaderRow");h.appendChild(g);b.events(g,function(){return a(c)})}function a(c){var g=b.parseMapParams(c);dom.req("#"+c).value=json.str(g);b.check();return g}b.initHeadersEditor=function(c){c.parentElement.appendChild(e(c))};
b.setHeaders=function(c,g){};b.removeHeaderRow=function(c,g){g.parentElement.parentElement.parentElement.parentElement.remove();a(c);return!1};b.addHeaderRow=function(c){var g=dom.req("#"+c+"-ul");f(c,g.children.length-1,g,{k:"",v:""});return!1}})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){b.mapHeader=function(e,f){return JSX("li",null,JSX("div",{"data-uk-grid":""},JSX("div",{class:"uk-width-1-4"},"Name"),JSX("div",{class:"uk-width-1-4"},"Value"),JSX("div",{class:"uk-width-1-2"},JSX("div",{class:"right"},JSX("a",{class:style.linkColor,href:"",onclick:"return request.editor."+f+"('"+e+"')",title:"new row"},JSX("span",{"data-uk-icon":"icon: plus"}))),"Description")))};b.newChild=function(e,f,a,c){return JSX("li",null,JSX("div",{"data-uk-grid":""},JSX("div",{class:"uk-width-1-4"},
JSX("input",{class:"uk-input","data-field":f+"-key",type:"text",value:a.k})),JSX("div",{class:"uk-width-1-4"},JSX("input",{class:"uk-input","data-field":f+"-value",type:"text",value:a.v})),JSX("div",{class:"uk-width-1-2"},JSX("div",{class:"right",style:"margin-top: 6px;"},JSX("a",{class:style.linkColor,href:"",onclick:"return request.editor."+c+"('"+e+"', this);",title:"remove row"},JSX("span",{"data-uk-icon":"icon: close"}))),JSX("input",{style:"width: calc(100% - 48px);",class:"uk-input","data-field":f+
"-desc",type:"text",value:a.desc}))))};b.parseMapParams=function(e){var f=dom.req("#"+e+"-ul");e=[];var a=0;for(f=dom.els("input",f);a<f.length;a++){var c=f[a],g=c.dataset.field||"",h=g.lastIndexOf("-"),k=parseInt(g.substring(0,h),10);g=g.substring(h+1);e[k]||(e[k]={k:"",v:""});switch(g){case "key":e[k].k=c.value.trim();break;case "value":e[k].v=c.value.trim();break;case "desc":c=c.value.trim();0<c.length&&(e[k].desc=c);break;default:throw"unknown key ["+g+"]";}}return e=e.filter(function(l){return 0<
l.k.length})}})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){function e(n){var q=json.parse(n.value);q||(q={});return JSX("div",null,JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-timeout"},"Timeout"),c(n,q.timeout)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label"},"Ignore"),JSX("div",null,g(n,q.ignoreRedirects),h(n,q.ignoreReferrer),k(n,q.ignoreCerts),l(n,q.ignoreCookies))),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-excludeDefaultHeaders"},
"Exclude Default Headers"),m(n,q.excludeDefaultHeaders)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-readCookieJars"},"Read Cookie Jars"),r(n,q.readCookieJars)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"writeCookieJar"},"Write Cookie Jar"),t(n,q.writeCookieJar)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:n.id+"-sslCert"},"SSL Cert"),v(n,q.sslCert)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",
for:n.id+"-userAgentOverride"},"User Agent Override"),w(n,q.userAgentOverride)))}function f(n,q,p,u){n="opt-"+q;return u?JSX("label",{class:"uk-margin-right"},JSX("input",{type:"checkbox",name:n,value:"true",checked:!0})," ",p):JSX("label",{class:"uk-margin-right"},JSX("input",{type:"checkbox",name:n,value:"true"})," ",p)}function a(n,q,p){b.events(n,function(){var u=json.parse(p.value);q(u);p.value=json.str(u);b.check()})}function c(n,q){var p=JSX("input",{class:"uk-input",id:n.id+"-timeout",name:"opt-timeout",
type:"number",value:q||0});a(p,function(u){return u.timeout=parseInt(p.value,10)},n);return p}function g(n,q){var p=f(n.id,"ignoreRedirects","Redirects",q||!1);a(p,function(u){return u.ignoreRedirects=dom.req("input",p).checked},n);return p}function h(n,q){var p=f(n.id,"ignoreReferrer","Referrer",q||!1);a(p,function(u){return u.ignoreReferrer=dom.req("input",p).checked},n);return p}function k(n,q){var p=f(n.id,"ignoreCerts","Certs",q||!1);a(p,function(u){return u.ignoreCerts=dom.req("input",p).checked},
n);return p}function l(n,q){var p=f(n.id,"ignoreCookies","Cookies",q||!1);a(p,function(u){return u.ignoreCookies=dom.req("input",p).checked},n);return p}function m(n,q){var p=JSX("input",{class:"uk-input",id:n.id+"-excludeDefaultHeaders",name:"opt-excludeDefaultHeaders",type:"text",value:q});a(p,function(u){return u.excludeDefaultHeaders=p.value.split(",").map(function(x){return x.trim()})},n);return p}function r(n,q){var p=JSX("input",{class:"uk-input",id:n.id+"-readCookieJars",name:"opt-readCookieJars",
type:"text",value:q});a(p,function(u){return u.readCookieJars=p.value.split(",").map(function(x){return x.trim()})},n);return p}function t(n,q){var p=JSX("input",{class:"uk-input",id:n.id+"-writeCookieJar",name:"opt-writeCookieJar",type:"text",value:q});a(p,function(u){return u.writeCookieJar=p.value},n);return p}function v(n,q){var p=JSX("input",{class:"uk-input",id:n.id+"-sslCert",name:"opt-sslCert",type:"text",value:q});a(p,function(u){return u.sslCert=p.value},n);return p}function w(n,q){var p=
JSX("input",{class:"uk-input",id:n.id+"-userAgentOverride",name:"opt-userAgentOverride",type:"text",value:q||""});a(p,function(u){return u.userAgentOverride=p.value},n);return p}b.initOptionsEditor=function(n){n.parentElement.appendChild(e(n))}})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){function e(h,k){var l=[];if(k)for(var m=0;m<k.length;m++){var r=k[m],t=encodeURIComponent(r.k);0<r.v.length&&(t+="="+encodeURIComponent(r.v));l.push(t)}m=h.value;k="";r=m.indexOf("#");-1<r&&(k=m.substr(r+1));r=m.indexOf("?");l=-1===r?m+"?"+l.join("&"):m.substr(0,r)+"?"+l.join("&");0<k.length&&(l+="#"+encodeURIComponent(k));h.value=l}function f(h,k){var l=json.parse(h.value);k.innerText="";k.appendChild(b.mapHeader(h.id,"addQueryParamRow"));if(l)for(var m=0;m<l.length;m++)c(h.id,
m,k,l[m])}function a(h){var k=JSX("ul",{id:h.id+"-ul",class:"uk-list uk-list-divider"});f(h,k);return k}function c(h,k,l,m){k=b.newChild(h,k,m,"removeQueryParamRow");l.appendChild(k);b.events(k,function(){return g(h)})}function g(h){var k=b.parseMapParams(h);dom.req("#"+h).value=json.str(k);e(dom.req("#"+h.replace("queryparams","url")),k);b.check();return k}b.initQueryParamsEditor=function(h){h.parentElement.appendChild(a(h))};b.setQueryParams=e;b.updateQueryParams=function(h,k){h.qp.value=json.str(k);
f(h.qp,dom.req("#"+h.qp.id+"-ul"))};b.removeQueryParamRow=function(h,k){k.parentElement.parentElement.parentElement.parentElement.remove();g(h);return!1};b.addQueryParamRow=function(h){var k=dom.req("#"+h+"-ul");c(h,k.children.length-1,k,{k:"",v:""});return!1}})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){b.initURLEditor=function(e){};b.setURL=function(e,f){f?(b.updateQueryParams(e,f.query),b.updateBasicAuth(e,f.auth)):e.qp.value="[]"}})(d.editor||(d.editor={}))})(request||(request={}));
(function(d){(function(b){function e(a){var c=f(a,"key"),g=f(a,"title"),h=f(a,"description"),k=f(a,"url");k=d.urlToPrototype(k);k.method=f(a,"method");k.query=json.parse(f(a,"queryparams"));k.headers=json.parse(f(a,"headers"));k.auth=json.parse(f(a,"auth"));k.body=json.parse(f(a,"body"));k.options=json.parse(f(a,"options"));return{key:c,title:g,description:h,prototype:k}}function f(a,c){return dom.req("#"+a+"-"+c).value}b.extractRequest=e;b.checkEditor=function(a,c){if(a=d.getRequest(a,c)){c=e(c);
var g=d.diff(a,c);console.debug("checking editor state",a,c,g);a=0<g.length}else a=!0;dom.setDisplay("#save-panel",a)};b.saveCurrentRequest=function(a,c){var g=e(c);socket.send({svc:services.request.key,cmd:command.client.saveRequest,param:{coll:a,orig:c,req:g}})}})(d.form||(d.form={}))})(request||(request={}));
(function(d){(function(b){function e(a,c){var g="/c/"+a+"/"+c.key;a="if (!confirm('Are you sure you want to delete request ["+c.key+"]?')) { return false; }";return JSX("div",null,nav.link({path:g+"/call",title:"Call",cls:"uk-button uk-button-default uk-margin-small-right uk-margin-top",isButton:!0}),JSX("div",{class:"uk-inline"},JSX("button",{type:"button",class:"uk-button uk-button-default uk-margin-small-right uk-margin-top"},"Export"),JSX("div",{id:"export-dropdown","uk-dropdown":"mode: click"},
JSX("ul",{class:"uk-list uk-list-divider",style:"margin-bottom: 0;"},Object.keys(f).map(function(h){return JSX("li",null,nav.link({path:g+"/transform/"+h,title:f[h],onclk:"UIkit.dropdown(dom.req('#export-dropdown')).hide(false);"}))})))),nav.link({path:g+"/delete",title:"Delete",cls:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclk:a,isButton:!0}))}b.renderFormPanel=function(a,c){var g=JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate('/c/"+
a+"');return false;",title:"close request"})),h=JSX("h3",{class:"uk-card-title"},c.title?c.title:c.key),k=b.renderURL(a,c);var l=JSX("div",{id:"save-panel",class:"right hidden"},JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"request.form.reset('"+a+"', '"+c.key+"');"},"Reset"),JSX("button",{class:"uk-button uk-button-default uk-margin-top",onclick:"request.form.saveCurrentRequest('"+a+"', '"+c.key+"');"},"Save Changes"));return JSX("div",null,JSX("div",
{class:"uk-card uk-card-body uk-card-default"},g,h,k,l,e(a,c)),JSX("div",{class:"request-editor uk-card uk-card-body uk-card-default uk-margin-top"},JSX("form",{action:"",method:"post",onsubmit:"console.log('XXXXXXX');return false;"},b.renderSwitcher(c,location.hash))),JSX("div",{class:"request-action uk-card uk-card-body uk-card-default uk-margin-top hidden"}))};b.renderDetails=function(a){return JSX("li",{class:"request-details-panel"},JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",
for:a.key+"-key"},"Key"),JSX("input",{class:"uk-input",id:a.key+"-key",name:"key",type:"text",value:a.key||"","data-lpignore":"true"})),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:a.key+"-title"},"Title"),JSX("input",{class:"uk-input",id:a.key+"-title",name:"title",type:"text",value:a.title||"","data-lpignore":"true"})),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:a.key+"-description"},"Description"),JSX("textarea",{class:"uk-textarea",id:a.key+
"-description",name:"description","data-lpignore":"true"},a.description||"")))};b.reset=function(a,c){d.render(a,c)};var f={http:"HTTP",json:"JSON",curl:"curl"}})(d.form||(d.form={}))})(request||(request={}));
(function(d){(function(b){b.renderSwitcher=function(e,f){var a=e.key,c=e.prototype;return JSX("div",null,JSX("ul",{"data-uk-tab":""},nav.hashLink("details","Details",f),nav.hashLink("query","Query",f),nav.hashLink("auth","Auth",f),nav.hashLink("headers","Headers",f),nav.hashLink("body","Body",f),nav.hashLink("options","Options",f)),JSX("ul",{class:"uk-switcher uk-margin"},b.renderDetails(e),JSX("li",{class:"request-queryparams-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",
id:a+"-queryparams",name:"queryparams"},json.str(c.query)))),JSX("li",{class:"request-auth-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea",id:a+"-auth",name:"auth"},json.str(c.auth)))),JSX("li",{class:"request-headers-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",id:a+"-headers",name:"headers"},json.str(c.headers)))),JSX("li",{class:"request-body-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",
id:a+"-body",name:"body"},json.str(c.body)))),JSX("li",{class:"request-options-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",id:a+"-options",name:"options"},json.str(c.options))))))}})(d.form||(d.form={}))})(request||(request={}));
(function(d){(function(b){b.renderURL=function(e,f){e="nav.navigate(`/c/"+e+"/"+f.key+"/call`);return false;";return JSX("div",{class:"uk-margin-top uk-panel"},JSX("div",{class:"left",style:"width:120px;"},JSX("select",{class:"uk-select",id:f.key+"-method",name:"method"},d.allMethods.map(function(a){return a.key===f.prototype.method?JSX("option",{selected:"selected"},a.key):JSX("option",null,a.key)}))),JSX("div",{class:"uk-inline right",style:"width:calc(100% - 120px);"},JSX("a",{class:"uk-form-icon uk-form-icon-flip",
href:"",onclick:e,title:"send request","uk-icon":"icon: play"}),JSX("form",{onsubmit:e},JSX("input",{class:"uk-input",id:f.key+"-url",name:"url",type:"text",value:d.prototypeToURL(f.prototype),"data-lpignore":"true"}))))}})(d.form||(d.form={}))})(request||(request={}));var transform;
(function(d){d.renderRequest=function(b,e,f){return JSX("div",{id:b+"--"+e+"-transform"},request.renderActionClose(),JSX("div",{class:"transform-title"},f),JSX("div",{class:"transform-result"}))};d.setResult=function(b){var e=dom.req("#"+b.coll+"--"+b.req+"-transform .transform-result");dom.setContent(e,JSX("div",{class:"uk-margin-top"},JSX("pre",null,b.out)));log.info("call result ["+b.coll+"/"+b.req+": "+b.fmt+"] received")}})(transform||(transform={}));var system;
(function(d){var b=function(){function e(){}e.prototype.getProfile=function(){if(!this.profile)throw"no active profile";return this.profile};e.prototype.apply=function(f){d.cache.profile=f.profile};return e}();d.cache=new b})(system||(system={}));
(function(d){d.onSystemMessage=function(b,e){switch(b){case command.server.error:console.warn("error from server: "+e);break;case command.server.connected:d.cache.apply(e);break;default:console.warn("unhandled system command ["+b+"]")}}})(system||(system={}));var __spreadArrays=this&&this.__spreadArrays||function(){for(var d=0,b=0,e=arguments.length;b<e;b++)d+=arguments[b].length;d=Array(d);var f=0;for(b=0;b<e;b++)for(var a=arguments[b],c=0,g=a.length;c<g;c++,f++)d[f]=a[c];return d},ui;
(function(d){function b(a){for(var c=a.childElementCount-1;0<=c;c--){var g=a.children[c];g.classList.contains("dynamic")&&a.removeChild(g)}}function e(){return JSX("span",{class:"uk-navbar-item dynamic",style:"padding: 0 8px;"}," / ")}function f(a){for(var c=[],g=1;g<arguments.length;g++)c[g-1]=arguments[g];c=c.map(function(h){return"/"+h}).join("");return nav.link({path:c,title:a,cls:"uk-navbar-item uk-logo uk-margin-remove uk-padding-remove dynamic"})}d.setBreadcrumbs=function(a,c,g,h){var k=dom.req("#breadcrumbs");
b(k);k.appendChild(nav.link({path:"/",title:"npn",cls:"uk-navbar-item uk-logo uk-margin-remove uk-padding-remove dynamic"}));if(a&&(k.appendChild(e()),k.appendChild(f(a,"c",a)),c&&(k.appendChild(e()),k.appendChild(f(c,"c",a,c)),g&&(k.appendChild(e()),k.appendChild(f(g,"c",a,c,g)),h&&0<h.length))))for(var l=0;l<h.length;l++){k.appendChild(e());var m=[a,c,g];m.push.apply(m,h.slice(0,l));k.appendChild(f.apply(void 0,__spreadArrays([h[l]],m)))}};d.reset=b})(ui||(ui={}));
(function(d){d.setPanels=function(b,e,f,a){dom.setDisplay("#welcome-panel",void 0===b);dom.setDisplay("#collection-panel",void 0!==b&&0<b.length&&void 0===e);dom.setDisplay("#request-panel",void 0!==e&&0<e.length);d.setBreadcrumbs(b,e,f,a);a="";f&&(a+=f+" ");b&&(a+=b);e&&(a+="/"+e);a=0==a.length?"npn":"npn: "+a;document.title=a}})(ui||(ui={}));
