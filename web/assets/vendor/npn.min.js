var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,e,f){c instanceof String&&(c=String(c));for(var b=c.length,a=0;a<b;a++){var d=c[a];if(e.call(f,d,a,c))return{i:a,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,f){if(c==Array.prototype||c==Object.prototype)return c;c[e]=f.value;return c};$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<c.length;++e){var f=c[e];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,e){var f=$jscomp.propertyToPolyfillSymbol[e];if(null==f)return c[e];f=c[f];return void 0!==f?f:c[e]};
$jscomp.polyfill=function(c,e,f,b){e&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,e,f,b):$jscomp.polyfillUnisolated(c,e,f,b))};$jscomp.polyfillUnisolated=function(c,e,f,b){f=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var a=c[b];if(!(a in f))return;f=f[a]}c=c[c.length-1];b=f[c];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:e})};
$jscomp.polyfillIsolated=function(c,e,f,b){var a=c.split(".");c=1===a.length;b=a[0];b=!c&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var d=0;d<a.length-1;d++){var g=a[d];if(!(g in b))return;b=b[g]}a=a[a.length-1];f=$jscomp.IS_SYMBOL_NATIVE&&"es6"===f?b[a]:null;e=e(f);null!=e&&(c?$jscomp.defineProperty($jscomp.polyfills,a,{configurable:!0,writable:!0,value:e}):e!==f&&($jscomp.propertyToPolyfillSymbol[a]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(a):$jscomp.POLYFILL_PREFIX+a,a=
$jscomp.propertyToPolyfillSymbol[a],$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:e})))};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(e,f){return $jscomp.findInternal(this,e,f).v}},"es6","es3");
$jscomp.checkStringArgs=function(c,e,f){if(null==c)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(e,f){var b=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var a=b.length,d=e.length;f=Math.max(0,Math.min(f|0,b.length));for(var g=0;g<d&&f<a;)if(b[f++]!=e[g++])return!1;return g>=d}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(e,f){var b=$jscomp.checkStringArgs(this,e,"endsWith");e+="";void 0===f&&(f=b.length);f=Math.max(0,Math.min(f|0,b.length));for(var a=e.length;0<a&&0<f;)if(b[--f]!=e[--a])return!1;return 0>=a}},"es6","es3");$jscomp.arrayIteratorImpl=function(c){var e=0;return function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(c){if(c)return c;var e=function(a,d){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};e.prototype.toString=function(){return this.$jscomp$symbol$id_};var f=0,b=function(a){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new e("jscomp_symbol_"+(a||"")+"_"+f++,a)};return b},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),f=0;f<e.length;f++){var b=$jscomp.global[e[f]];"function"===typeof b&&"function"!=typeof b.prototype[c]&&$jscomp.defineProperty(b.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return c},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,e){c instanceof String&&(c+="");var f=0,b={next:function(){if(f<c.length){var a=f++;return{value:e(a,c[a]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");var dom;
(function(c){function e(g,h){var k=[];(h?h.querySelectorAll(g):document.querySelectorAll(g)).forEach(function(m){k.push(m)});return k}function f(g,h){h=e(g,h);switch(h.length){case 0:break;case 1:return h[0];default:console.warn("found ["+h.length+"] elements with selector ["+g+"], wanted zero or one")}}function b(g,h){(h=f(g,h))||console.warn("no element found for selector ["+g+"]");return h}function a(g,h){"string"===typeof g&&(g=b(g));g.innerHTML=h;return g}function d(g,h,k){void 0===k&&(k="block");
"string"===typeof g&&(g=b(g));g.style.display=h?k:"none";return g}c.initDom=function(g,h){try{style.themeLinks(h),style.setTheme(g)}catch(k){console.warn("error setting style",k)}try{modal.wire()}catch(k){console.warn("error wiring modals",k)}try{drop.wire()}catch(k){console.warn("error wiring drops",k)}try{tags.wire()}catch(k){console.warn("error wiring tag editors",k)}try{flash.wire()}catch(k){console.warn("error wiring tag editors",k)}};c.els=e;c.opt=f;c.req=b;c.setHTML=a;c.setDisplay=d;c.setContent=
function(g,h){"string"===typeof g&&(g=b(g));c.clear(g);Array.isArray(h)?h.forEach(function(k){return g.appendChild(k)}):g.appendChild(h);return g};c.setText=function(g,h){"string"===typeof g&&(g=b(g));g.innerText=h;return g};c.switchElements=function(g,h){d(g,!1);d(h,!0);return!1};c.clear=function(g){return a(g,"")}})(dom||(dom={}));
(function(c){c.setValue=function(e,f){"string"===typeof e&&(e=c.req(e));e.value=f;return e};c.wireTextarea=function(e){function f(){e.style.height="auto";e.style.height=(64>e.scrollHeight?64:e.scrollHeight+6)+"px"}function b(){window.setTimeout(f,0)}e.dataset.autoresize||(e.dataset.autoresize="true",e.addEventListener("change",f,!1),e.addEventListener("cut",b,!1),e.addEventListener("paste",b,!1),e.addEventListener("drop",b,!1),e.addEventListener("keydown",b,!1),e.focus(),e.select());f()};c.setOptions=
function(e,f){"string"===typeof e&&(e=c.req(e));c.clear(e);f.forEach(function(b){var a=document.createElement("option");a.value=b;c.setText(a,b);e.appendChild(a)})};c.setSelectOption=function(e,f){"string"===typeof e&&(e=c.req(e));for(var b=0;b<e.children.length;b++){var a=e.children.item(b);a.selected=a.value===f}};c.insertAtCaret=function(e,f){if(e.selectionStart||0===e.selectionStart){var b=e.selectionStart,a=e.selectionEnd;e.value=e.value.substring(0,b)+f+e.value.substring(a,e.value.length);e.selectionStart=
b+f.length;e.selectionEnd=b+f.length}else e.value+=f}})(dom||(dom={}));
function JSX(c,e){var f=document.createElement(c);for(a in e)if(a&&e.hasOwnProperty(a)){var b=e[a];"dangerouslySetInnerHTML"===a?dom.setHTML(f,b.__html):!0===b?f.setAttribute(a,a):!1!==b&&null!==b&&void 0!==b&&f.setAttribute(a,b.toString())}var a=function(g){var h=d[g];if(Array.isArray(h))h.forEach(function(k){if(void 0===h||null===h)throw"child array for tag ["+c+"] is "+h+"\n"+f.outerHTML;if(void 0===k||null===k)throw"child for tag ["+c+"] is "+k+"\n"+f.outerHTML;"string"===typeof k&&(k=document.createTextNode(k));
f.appendChild(k)});else{if(void 0===h||null===h)throw"child for tag ["+c+"] is "+h+"\n"+f.outerHTML;h.nodeType||(h=document.createTextNode(h.toString()));f.appendChild(h)}};var d=arguments;for(b=2;b<arguments.length;b++)a(b);return f}var style;
(function(c){function e(b){f(b);switch(b){case "auto":b="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(b="dark");e(b);fetch("/profile/theme/"+b).then(function(a){return a.text()}).then(function(){});break;case "light":document.documentElement.classList.remove("uk-light");document.body.classList.remove("uk-light");document.documentElement.classList.add("uk-dark");document.body.classList.add("uk-dark");break;case "dark":document.documentElement.classList.add("uk-light");
document.body.classList.add("uk-light");document.documentElement.classList.remove("uk-dark");document.body.classList.remove("uk-dark");break;default:console.warn("invalid theme")}}function f(b){if("undefined"===typeof EmojiButton)dom.els(".picker-toggle").forEach(function(d){return dom.setDisplay(d,!1)});else{var a={position:"bottom-end",theme:b,zIndex:1021};dom.els(".textarea-emoji").forEach(function(d){var g=dom.req(".picker-toggle",d);g.addEventListener("click",function(){var h=dom.req(".uk-textarea",
d),k=new EmojiButton(a);k.on("emoji",function(m){drop.onEmojiPicked();dom.insertAtCaret(h,m)});k.togglePicker(g)},!1)})}}c.setTheme=e;c.linkColor="";c.themeLinks=function(b){c.linkColor=b+"-fg";dom.els(".theme").forEach(function(a){a.classList.add(c.linkColor)})}})(style||(style={}));var drop;
(function(c){function e(d){if(d.target){var g=d.target;d=g.dataset.key||"";g=g.dataset.t||"";var h=events.getOpenEvent(d);h?h(g):console.warn("no drop open handler registered for ["+d+"]")}}function f(d){if(d.target){var g=d.target;g.classList.contains("uk-open")&&(d=g.dataset.t||"",(g=events.getCloseEvent(g.dataset.key||""))&&g(d))}}function b(d){a&&d.preventDefault()}c.wire=function(){dom.els(".drop").forEach(function(d){d.addEventListener("show",e);d.addEventListener("beforehide",b);d.addEventListener("hide",
f)})};var a=!1;c.onEmojiPicked=function(){a=!0;setTimeout(function(){return a=!1},200)}})(drop||(drop={}));var events;(function(c){var e,f;c.register=function(b,a,d){e||(e=new map.Map);f||(f=new map.Map);a||(a=function(){});e.set(b,a);d&&f.set(b,d)};c.getOpenEvent=function(b){return e.get(b)};c.getCloseEvent=function(b){return f.get(b)}})(events||(events={}));var flash;
(function(c){function e(){var b=!1;dom.els(".alert-top").forEach(function(a){b=!0;a.classList.add("uk-animation-fade","uk-animation-reverse")});b&&setTimeout(f,1E3)}function f(){dom.els(".alert-top").forEach(function(b){b.remove()})}c.wire=function(){setTimeout(e,4E3)}})(flash||(flash={}));var modal;
(function(c){function e(d,g){a=g;notify.modal("#modal-"+d).show();return!1}function f(d){if(d.target&&(d=d.target,0===d.id.indexOf("modal"))){d=d.id.substr(6);var g=events.getOpenEvent(d);g?g(a):console.warn("no modal open handler registered for ["+d+"]");a=void 0}}function b(d){d.target&&(d=d.target,d.classList.contains("uk-open")&&(d=d.id.substr(6),(d=events.getCloseEvent(d))&&d(a),a=void 0))}var a;c.wire=function(){dom.els(".modal").forEach(function(d){d.addEventListener("show",f);d.addEventListener("hide",
b)})};c.open=e;c.openSoon=function(d){setTimeout(function(){return e(d)},0)};c.hide=function(d){d=notify.modal("#modal-"+d);d.$el.classList.contains("uk-open")&&d.hide()}})(modal||(modal={}));var tags;
(function(c){function e(a){var d=dom.req(".value",a),g=dom.req(".editor",a);dom.setDisplay(d,!1);dom.setDisplay(g,!0);var h=c.renderInput(d.innerText);h.onblur=function(){d.innerText=h.value;dom.setDisplay(d,!0);dom.setDisplay(g,!1);b(a.parentElement)};h.onkeypress=function(k){return"Enter"===k.key?(h.blur(),!1):!0};dom.setContent(g,h);h.focus()}function f(a){a.target?b(a.target):console.warn("no event target")}function b(a){var d=a.dataset.key||"",g=events.getOpenEvent(d);g?g():console.warn("no tag open handler registered for ["+
d+"]");a=dom.els(".item",a).map(function(h){return h.innerText});dom.setValue("#model-"+d+"-input",a.join(","))}c.wire=function(){dom.els(".tag-editor").forEach(function(a){a.addEventListener("moved",f);a.addEventListener("added",f);a.addEventListener("removed",f)})};c.removeTag=function(a){a=a.parentElement;var d=a.parentElement;a.remove();b(d)};c.addTag=function(a){if(a=a.parentElement){var d=c.renderItem();a.insertBefore(d,dom.req(".add-item",a));e(d)}};c.editTag=e})(tags||(tags={}));
(function(c){c.renderInput=function(e){return JSX("input",{type:"text",class:"uk-input",value:e})};c.renderItem=function(){return JSX("span",{class:"item"},JSX("span",{class:"value",onclick:"tags.editTag(this.parentElement);"}),JSX("span",{class:"editor"}),JSX("span",{class:"close","data-uk-icon":"icon: close; ratio: 0.6;",onclick:"tags.removeTag(this);"}))};c.renderTagsView=function(e){return JSX("div",{class:"tag-view"},e.map(function(f){return JSX("span",{class:"item"},f)}),JSX("div",{class:"clear"}))}})(tags||
(tags={}));var socket;(function(c){c.initBypass=function(){c.bypass=!0;c.connected=!0;nav.enabled=!1};c.bypassSend=function(e){c.debug&&console.debug("out",e);npn_handler?npn_handler(JSON.stringify(e,null,2)):console.warn("no bypass handler configured")}})(socket||(socket={}));(function(c){c.debug=!0;c.appUnloading=!1;c.currentService="";c.currentID="";c.bypass=!1;c.setAppUnloading=function(){c.appUnloading=!0};c.send=function(e){c.bypass?c.bypassSend(e):c.socketSend(e)}})(socket||(socket={}));
(function(c){function e(){var q=document.location,v="ws";"https:"===q.protocol&&(v="wss");return v+("://"+q.host+"/s")}function f(){g=new WebSocket(e());g.onopen=a;g.onmessage=function(q){return n(json.parse(q.data))};g.onerror=function(q){return r("socket",q.type)};g.onclose=d}function b(q,v,w){c.currentService=q;c.currentID=v;c.connectTime=Date.now();if(!n)throw"onMessage not initialized";w?c.initBypass():f()}function a(){log.info("socket connected");c.connected=!0;h=1;k.forEach(c.send);k=[];m(c.currentID)}
function d(){function q(){c.connected=!1;var v=Date.now()-c.connectTime;2E3>v?(h*=2,c.debug&&console.debug("socket closed immediately, reconnecting in "+h+" seconds"),setTimeout(function(){b(c.currentService,c.currentID)},1E3*h)):(log.info("socket closed after ["+v+"ms]"),b(c.currentService,c.currentID))}c.appUnloading||q()}var g;c.connected=!1;var h=0,k=[],m,n,r;c.init=function(q,v,w){m=q;n=v;r=w};c.initSocket=f;c.socketConnect=b;c.socketSend=function(q){c.debug&&console.debug("out",q);c.connected?
(q=json.str(q),g.send(q)):k.push(q)}})(socket||(socket={}));var profile;
(function(c){c.setNavColor=function(e,f){dom.setValue("#nav-color",f);dom.req("#navbar").className=f+"-bg uk-navbar-container uk-navbar";document.querySelectorAll(".nav_swatch").forEach(function(b){b.classList.remove("active")});e.classList.add("active")};c.setLinkColor=function(e,f){dom.setValue("#link-color",f);dom.els(".profile-link").forEach(function(b){b.classList.forEach(function(a){-1<a.indexOf("-fg")&&b.classList.remove(a);b.classList.add(f+"-fg")})});document.querySelectorAll(".link_swatch").forEach(function(b){b.classList.remove("active")});
e.classList.add("active")};c.setPicture=function(e){dom.setValue("#self-picture-input",e);return!1}})(profile||(profile={}));var arr;(function(c){c.find=function(e,f){for(var b=e.length>>>0,a=0;a<b;){var d=e[a];if(f(a,d))return d;a++}}})(arr||(arr={}));var date;
(function(c){function e(a){return a.toLocaleDateString()}function f(a){return a.toLocaleTimeString().slice(0,8)}c.dateToYMD=function(a){var d=a.getDate(),g=a.getMonth()+1;return a.getFullYear()+"-"+(9>=g?"0"+g:g)+"-"+(9>=d?"0"+d:d)};c.dateFromYMD=function(a){a=new Date(a);return new Date(a.getTime()+6E4*a.getTimezoneOffset())};c.dow=function(a){switch(a){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}};
c.toDateString=e;c.toTimeString=f;c.toDateTimeString=function(a){return e(a)+" "+f(a)};var b=6E4*(new Date).getTimezoneOffset();c.utcDate=function(a){return new Date(Date.parse(a)+b)}})(date||(date={}));var group;
(function(c){function e(d,g){if(!d)return[];d.sort(function(h,k){h=g(h);k=g(k);return h>k?1:h<k?-1:0});return d}function f(d,g,h){if(!d)return[g];var k=!1,m=h(g),n;for(n in d)h(d[n])==m&&(k=!0,d[n]=g);k||d.push(g);return d}var b=function(){return function(d){this.members=[];this.key=d}}();c.Group=b;var a=function(){function d(){this.groups=[]}d.prototype.findOrInsert=function(g){var h=arr.find(this.groups,function(k,m){return m.key===g});if(h)return h;h=new b(g);this.groups.push(h);return h};return d}();
c.GroupSet=a;c.groupBy=function(d,g){var h=new a;d&&d.forEach(function(k){h.findOrInsert(g(k)).members.push(k)});return h};c.findGroup=function(d,g){for(var h=0;h<d.length;h++){var k=d[h];if(k.key===g)return k.members}return[]};c.flatten=function(d){var g=[];d.forEach(function(h){return g.push.apply(g,h)});return g};c.sort=e;c.update=f;c.updateAndSort=function(d,g,h){return e(f(d,g,h),h)};c.remove=function(d,g,h){if(!d)return[];for(var k in d)h(d[k])==g&&delete d[k];return d}})(group||(group={}));
var json;(function(c){c.str=function(e){return void 0===e?"null":JSON.stringify(e,null,2)};c.parse=function(e){return JSON.parse(e)}})(json||(json={}));var log;
(function(c){function e(g,h){if(0===b)console.warn("call `log.init()` before attempting to log");else{var k=Date.now()-b;k=JSX("li",{class:f(g)},JSX("div",{class:"right"},k,"ms"),h);if(!d&&(d=dom.opt("#log-list"),!d)){console.warn(g+": "+h);return}d.appendChild(k);a||(a=dom.req("#log-content"));a.scrollTo(0,a.scrollHeight)}}function f(g){switch(g){case "debug":return"grey-fg";case "info":return"";case "warn":return"yellow-fg";case "error":return"red-fg";default:return""}}var b=0,a,d;c.init=function(){b=
Date.now();e("debug","npn started")};c.info=function(g){e("info",g)};c.l=e;c.toggle=function(){var g=dom.req("#workspace-content"),h=dom.req("#log-container"),k=""!==h.style.display&&"none"!==h.style.display;k?g.classList.remove("log-visible"):g.classList.add("log-visible");dom.setDisplay(h,!k);a||(a=dom.req("#log-content"));a.scrollTo(0,a.scrollHeight)}})(log||(log={}));var map;
(function(c){var e=function(){function f(){this.storage=Object.create(null)}f.prototype.get=function(b){return this.storage[b]};f.prototype.set=function(b,a){return this.storage[b]=a};return f}();c.Map=e})(map||(map={}));var nav;
(function(c){function e(b){if(!c.enabled)return f(b),"";if(str.startsWith(b,"text/html;"))return"";str.startsWith(b,"/")&&(b=b.substr(1));var a=location.pathname;str.startsWith(a,"/")&&(a=a.substr(1));a!==b&&(a=b,history.pushState(a,"","/"+a));f(b)}c.enabled=!0;var f=function(b){console.warn("default nav handler called: "+b)};c.init=function(b){f=b;window.onpopstate=function(a){a.state?f(a.state):f("")};e(location.pathname)};c.pop=function(){var b=location.pathname.substr(0,location.pathname.lastIndexOf("/"));
"/c"===b&&(b="");e(b)};c.navigate=e;c.link=function(b){var a=b.path;str.startsWith(a,"/")||(a="/"+a);b.cls=b.cls?" "+b.cls.trim():"";var d=JSX("span",null);b.icon&&(d=JSX("span",{class:"nav-icon","data-uk-icon":"icon: "+b.icon}));b.onclk?str.endsWith(b.onclk,";")||(b.onclk+=";"):b.onclk="";b.isButton||(b.cls=style.linkColor+b.cls);return JSX("a",{class:b.cls,href:a,onclick:b.onclk+"nav.navigate('"+b.path+"', '"+b.title+"');return false;"},d,b.title)}})(nav||(nav={}));var notify;
(function(c){c.notify=function(e,f){UIkit.notification(e,{status:f?"success":"danger",pos:"top-right"})};c.confirm=function(e,f){UIkit.modal.confirm(e).then(f)};c.modal=function(e){var f=UIkit.modal(e);f||console.warn("no modal available with key ["+e+"]");return f}})(notify||(notify={}));var str;
(function(c){function e(b,a,d){d=d&&0<d?d|0:0;return b.substring(d,d+a.length)===a}function f(b,a,d){d=d&&d<b.length?d:b.length;return b.substring(d-a.length,d)===a}c.startsWith=e;c.endsWith=f;c.trimPrefix=function(b,a){return e(b,a)?b.slice(a.length):b};c.trimSuffix=function(b,a){return f(b,a)?b.substring(0,b.lastIndexOf(a)):b}})(str||(str={}));var command;
(function(c){c.client={ping:"ping",connect:"connect",getCollection:"getCollection",addCollection:"addCollection",deleteCollection:"deleteCollection",addRequestURL:"addRequestURL",getRequest:"getRequest",saveRequest:"saveRequest",deleteRequest:"deleteRequest",call:"call",transform:"transform"};c.server={error:"error",pong:"pong",connected:"connected",collections:"collections",collectionDetail:"collectionDetail",collectionAdded:"collectionAdded",collectionDeleted:"collectionDeleted",requestDetail:"requestDetail",
requestAdded:"requestAdded",requestDeleted:"requestDeleted",callResult:"callResult",transformResult:"transformResult"}})(command||(command={}));var npn;
(function(c){function e(f,b){console.error(f+": "+b);var a=b.lastIndexOf(":");-1<a&&(b=b.substr(a+1));notify.notify(f+" error: "+b,!1)}c.onError=e;c.init=function(f,b){try{var a=window.self!==window.top}catch(d){a=!0}a?(document.body.innerHTML="",document.body.appendChild(rbody.iframeError())):(log.init(),window.onbeforeunload=function(){socket.setAppUnloading()},nav.init(routing.route),socket.init(function(d){},routing.recv,e),socket.socketConnect(f,b,"wasm"===f))};c.debug=function(){var f=function(b,
a){void 0===a&&(a="");console.warn(b+": "+a)};f("Active Collection",collection.cache.active);f("Active Request",request.cache.active);f("Active Action",request.cache.action+" ["+request.cache.extra+"]")};c.testbed=function(){log.info("Testbed!")}})(npn||(npn={}));var routing;
(function(c){c.recv=function(e){socket.debug&&console.debug("in",e);switch(e.svc){case services.system.key:system.onSystemMessage(e.cmd,e.param);break;case services.collection.key:collection.onCollectionMessage(e.cmd,e.param);break;case services.request.key:request.onRequestMessage(e.cmd,e.param);break;default:console.warn("unhandled message for service ["+e.svc+"]")}};c.route=function(e){var f=e.split("/");f=f.filter(function(g){return 0<g.length});e=0<f.length?f[0]:"c";switch(e){case "c":e=1<f.length&&
0<f[1].length?f[1]:void 0;var b=2<f.length&&0<f[2].length?f[2]:void 0,a=3<f.length&&0<f[3].length?f[3]:void 0;f=4<f.length?f.slice(4):[];var d=collection.cache.active;collection.cache.setActiveCollection(e);e!==d&&e&&socket.send({svc:services.collection.key,cmd:command.client.getCollection,param:e});request.cache.setActiveRequest(e,b);request.cache.setActiveAction(e,a,f);ui.setPanels(e,b,a,f);break;default:console.warn("unhandled svc ["+e+"]")}}})(routing||(routing={}));var services;
(function(c){c.system={key:"system",title:"System",plural:"systems",icon:"close"};c.collection={key:"collection",title:"Collection",plural:"Collections",icon:"folder"};c.request={key:"request",title:"Request",plural:"Requests",icon:"file-text"};var e=[c.system,c.collection];c.fromKey=function(f){var b=arr.find(e,function(a,d){return d.key===f});if(!b)throw"invalid service ["+f+"]";return b}})(services||(services={}));var rbody;
(function(c){c.renderBody=function(e,f){if(!f)return JSX("div",null,"No body");switch(f.type){case "json":return f=f.config,JSX("div",null,JSX("em",null,"JSON"),JSX("pre",null,json.str(f.msg)));case "html":return e=request.baseURL(e),f=f.config,JSX("div",{class:"html-body"},JSX("span",{class:"base-url hidden"},e),JSX("span",{class:"preview-link right"},"(",JSX("a",{class:style.linkColor,href:"",onclick:"rbody.renderHTMLPreview(this);return false"},"preview"),")"),JSX("span",{class:"text-link right hidden"},
"(",JSX("a",{class:style.linkColor,href:"",onclick:"rbody.renderHTMLText(this);return false"},"text"),")"),JSX("em",null,"HTML"),JSX("pre",{class:"text-content",style:"overflow: auto; max-height: 720px;"},f.content),JSX("div",{class:"preview-content uk-margin-top hidden",style:"overflow: auto; max-height: 720px; border: 1px solid #666;"}));case "image":return f=f.config,JSX("img",{alt:"response image",src:"data:"+f.type+";base64,"+f.content});case "raw":return f=f.config,JSX("div",null,JSX("em",null,
f.type?f.type:"Unknown Type"),JSX("pre",null,json.str(f)));case "error":return f=f.config,JSX("div",null,JSX("em",null,"Error"),JSX("pre",null,f.message));default:return JSX("div",null,"unhandled body type [",f.type,"]")}}})(rbody||(rbody={}));
(function(c){function e(f,b){var a=f.parentElement.parentElement;if(!a.classList.contains("html-body"))throw"container is not class [html-body]";f=dom.req(".base-url",a);var d=dom.req(".text-link",a),g=dom.req(".text-content",a),h=dom.req(".preview-link",a);a=dom.req(".preview-content",a);dom.setDisplay(d,b);dom.setDisplay(g,!b);dom.setDisplay(h,!b);dom.setDisplay(a,b);return[f.innerText,g,a]}c.renderHTMLPreview=function(f){f=e(f,!0);var b=document.createElement("iframe");b.style.width="100%";b.style.minHeight=
"720px";var a=f[0];var d=f[1].innerText;var g=d.indexOf("<head");-1<g&&(g=d.indexOf(">",g),-1<g&&(a='<base href="'+a+'" target="_blank">',d=d.substr(0,g+1)+a+d.substr(g+1)));f[2].innerHTML="";f[2].appendChild(b);f=b.contentDocument||b.contentWindow.document;f.open();f.write(d);f.close()};c.renderHTMLText=function(f){e(f,!1)};c.iframeError=function(){return JSX("div",{class:"uk-container"},JSX("div",{class:"uk-section uk-section-small"},JSX("h3",null,"Rendering Error"),JSX("p",null,"This page indicates that the HTML preview was unable to render.")))}})(rbody||
(rbody={}));(function(c){c.AllTypes=[{key:"error",title:"Error",hidden:!0},{key:"form",title:"Form",hidden:!1},{key:"html",title:"HTML",hidden:!1},{key:"json",title:"JSON",hidden:!1},{key:"large",title:"Large File",hidden:!1},{key:"raw",title:"Raw",hidden:!0}]})(rbody||(rbody={}));var call;
(function(c){c.prepare=function(e,f){socket.send({svc:services.request.key,cmd:command.client.call,param:{coll:e,req:f.key,proto:f.prototype}});log.info("calling ["+request.prototypeToURL(f.prototype)+"]")};c.setResult=function(e){var f=dom.req("#"+e.collection+"--"+e.request+"-call");dom.setContent(f,c.renderResult(e));log.info("call result ["+e.id+"] received")}})(call||(call={}));
(function(c){function e(d){var g;if(!d)return JSX("div",null,"no response");var h=d.contentType||"",k=d.contentLength&&-1<d.contentLength?"("+d.contentLength+" bytes)":d.body&&-1<d.body.length?"("+d.body.length+" bytes)":"";h=JSX("div",null,JSX("h3",null,d?d.status:"Unknown"),JSX("em",null,d.method," ",d.url),JSX("div",{class:"mt"},JSX("ul",{"data-uk-tab":""},JSX("li",null,JSX("a",{href:"#result"},"Result")),JSX("li",null,JSX("a",{href:"#request"},"Request")),JSX("li",null,JSX("a",{href:"#headers"},
"Response")),JSX("li",null,JSX("a",{href:"#body"},"Body")),JSX("li",null,JSX("a",{href:"#timing"},"Timing"))),JSX("ul",{class:"uk-switcher uk-margin"},JSX("li",null,JSX("div",null,((null===(g=d.timing)||void 0===g?void 0:g.completed)||0)/1E3,"ms"),JSX("div",null,d.proto," ",JSX("em",null,d.status),JSX("div",null,h," ",k))),JSX("li",null,f("Final Request Headers",d.requestHeaders)),JSX("li",null,f("Response Headers",d.headers)),JSX("li",null,rbody.renderBody(d.url,d.body)),JSX("li",null,b(d.timing)))));
return d.prior?JSX("div",null,e(d.prior),JSX("hr",null),h):h}function f(d,g){void 0===g&&(g=[]);return 0===g.length?a(d,"No headers"):JSX("div",{class:"uk-overflow-auto"},JSX("h4",null,d),JSX("table",{class:"uk-table uk-table-divider uk-text-left uk-table-small uk-table-justify"},JSX("tbody",null,g.map(function(h){return JSX("tr",{title:h.desc},JSX("td",{class:"uk-text-nowrap"},h.k),JSX("td",{class:"uk-text-nowrap"},h.v))}))))}function b(d){if(!d)return JSX("div",null,"No timing");var g=c.timingSections(d);
return JSX("div",{class:"timing-panel"},JSX("div",{class:"result-timing-graph"},JSX("div",null,JSX("div",{class:"timing-start"},"0ms"),JSX("div",{class:"timing-end"},d.completed/1E3,"ms")),JSX("object",{type:"image/svg+xml",style:"width: 100%; height: "+24*g.length+"px",data:c.timingGraph(g)},"SVG not supported")),JSX("hr",null),g.map(function(h){return JSX("div",null,h.key,": ",h.start," - ",h.end)}))}function a(d,g){g||(g="undefined");return JSX("div",null,JSX("h4",null,d)," ",g)}c.renderResult=
function(d){return[JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.pop();return false;",title:"close result"})),d.error?JSX("div",null,JSX("div",{class:"red-fg"},"error: ",d.error)):JSX("div",null),e(d.response)]}})(call||(call={}));
(function(c){c.timingSections=function(e){var f=[],b=function(d,g,h,k){h&&k&&f.push({key:d,group:g,start:h,end:k})};b("dns","connect",e.dnsStart,e.dnsEnd);b("connect","connect",e.connectStart,e.connectEnd);var a=e.connectEnd;0<(e.tlsEnd||0)&&(a=e.tlsEnd||0,b("tls","connect",e.tlsStart||0,a));b("reqheaders","request",a,e.wroteHeaders);2<e.wroteRequest-e.wroteHeaders&&b("reqbody","request",e.wroteHeaders,e.wroteRequest);b("rspwait","response",e.wroteRequest,e.firstResponseByte);b("rspheaders","response",
e.firstResponseByte,e.responseHeaders);b("rspbody","response",e.responseHeaders,e.completed);return f};c.timingGraph=function(e){for(var f,b=[],a=0;a<e.length;a++){var d=e[a];0<d.group.length&&b.push(encodeURIComponent(d.key+".g")+"="+encodeURIComponent(d.group));b.push(encodeURIComponent(d.key+".s")+"="+encodeURIComponent(d.start));b.push(encodeURIComponent(d.key+".e")+"="+encodeURIComponent(d.end))}b.push("t="+(null===(f=system.cache.profile)||void 0===f?void 0:f.theme)||"light");return"/svg/gantt?"+
b.join("&")}})(call||(call={}));var collection;
(function(c){var e=function(){function f(){this.collections=[]}f.prototype.updateCollection=function(b){this.collections=group.updateAndSort(this.collections,b,function(a){return a.key});c.renderCollections(this.collections)};f.prototype.setActiveCollection=function(b){this.active!==b&&(this.active=b,c.renderCollections(this.collections))};f.prototype.deleteCollection=function(b){socket.send({svc:services.collection.key,cmd:command.client.deleteCollection,param:b})};f.prototype.getActiveCollection=
function(){return this.active?this.getCollection(this.active):void 0};f.prototype.getCollection=function(b){for(var a=0,d=this.collections;a<d.length;a++){var g=d[a];if(g.key==b)return g}};return f}();c.cache=new e})(collection||(collection={}));
(function(c){function e(b){var a=b.title;a&&0!==a.length||(a=b.key);var d=nav.link({path:"/c/"+b.key,title:a,icon:"folder"});if(c.cache.active===b.key){var g=request.cache.active,h=request.cache.summaries.get(b.key);h&&(d=void 0,d=g?nav.link({path:"/c/"+b.key,title:a,icon:"album"}):JSX("strong",null,nav.link({path:"/",title:a,icon:"album"})),d=JSX("div",null,d,h.map(function(k){var m=nav.link({path:"/c/"+b.key+"/"+k.key,title:k.title&&0<k.title.length?k.title:k.key,icon:"link"});return JSX("div",
{class:"uk-margin-small-left"},request.cache.active===k.key?JSX("strong",null,m):m)})))}return JSX("div",{class:"nav-item collection-link collection-link-"+b.key},d)}function f(b,a){a=group.sort(a,function(d){return d.order});return JSX("ul",{class:"uk-list uk-list-divider"},a.map(function(d){var g=d.title;g&&0!==d.title.length||(g=d.key);return JSX("li",null,nav.link({path:"/c/"+b+"/"+d.key,title:g}),d.description&&d.description.length?JSX("div",null,JSX("em",null,d.description)):JSX("span",null))}))}
c.renderCollections=function(b){return dom.els(".collection-list").forEach(function(a){dom.setContent(a,b.map(function(d){return e(d)}))})};c.renderCollection=function(b,a){var d=b.title?b.title:b.key,g=JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.pop();return false;",title:"close collection"}));d=JSX("h3",{class:"uk-card-title"},JSX("span",{class:"nav-icon-h3","data-uk-icon":"icon: album"}),d);var h=JSX("p",null,b.description||"");var k="confirm('Are you sure you want to delete collection ["+
b.key+"]?')";k=JSX("div",null,JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"return false;"},"Edit"),JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"if ("+k+") { collection.cache.deleteCollection('"+b.key+"') }"},"Delete"));return JSX("div",null,JSX("div",{class:"uk-card uk-card-body uk-card-default"},g,d,h,k),JSX("div",{class:"uk-card uk-card-body uk-card-default uk-margin-top"},JSX("h3",{class:"uk-card-title"},
"Requests"),JSX("form",{onsubmit:"collection.addRequestURL('"+b.key+"');return false;"},JSX("div",{class:"uk-margin-top uk-inline uk-width-expand"},JSX("button",{class:"uk-form-icon uk-form-icon-flip",type:"submit",title:"add request","uk-icon":"icon: plus"}),JSX("input",{id:"coll-request-add-url",class:"uk-input",placeholder:"add a request by url","data-lpignore":"true"}))),JSX("div",{id:"request-list",class:"uk-margin-top"},f(b.key,a))))};c.addFromInput=function(){var b=dom.req("#coll-add-input"),
a=b.value.trim();a&&0<a.length&&(b.value="",socket.send({svc:services.collection.key,cmd:command.client.addCollection,param:a}),log.info("adding request ["+a+"]"))};c.addRequestURL=function(b){var a=dom.req("#coll-request-add-url"),d=a.value.trim();d&&0<d.length&&(a.value="",socket.send({svc:services.collection.key,cmd:command.client.addRequestURL,param:{coll:b,url:d}}),log.info("adding request ["+d+"]"))}})(collection||(collection={}));
(function(c){c.onCollectionMessage=function(e,f){switch(e){case command.server.collections:c.cache.collections=group.sort(f,function(b){return b.key});log.info("processing ["+c.cache.collections.length+"] collections");c.renderCollections(c.cache.collections);break;case command.server.collectionDetail:log.info("processing ["+f.requests.length+"] requests for collection ["+f.collection.key+"]");c.cache.updateCollection(f.collection);request.cache.setCollectionRequests(f.collection,f.requests);c.renderCollections(c.cache.collections);
break;case command.server.collectionAdded:log.info("processing new collection ["+f.active+"]");c.cache.collections=f.collections;nav.navigate("/c/"+f.active);break;case command.server.collectionDeleted:log.info("processing deleted collection ["+f+"]");c.cache.collections=c.cache.collections.filter(function(b){return b.key!==f});c.renderCollections(c.cache.collections);nav.navigate("/");break;default:console.warn("unhandled collection command ["+e+"]")}}})(collection||(collection={}));var header;
(function(c){function e(b,a,d,g){return{key:b,description:a,req:d,rsp:g,link:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/"+b}}c.commonHeaders=[e("Accept","Informs the server about the types of data that can be sent back.",!0,!1),e("Access-Control-Allow-Headers","Used in response to a preflight request to indicate which HTTP headers can be used when making the actual request.",!1,!0),e("Access-Control-Allow-Methods","Specifies the methods allowed when accessing the resource in response to a preflight request.",
!1,!0),e("Access-Control-Allow-Origin","Indicates whether the response can be shared.",!1,!0),e("Authorization","Contains the credentials to authenticate a user-agent with a server.",!0,!1),e("Connection","Controls whether the network connection stays open after the current transaction finishes.",!0,!1),e("Content-Encoding","Used to specify the compression algorithm.",!0,!0),e("Content-Length","The size of the resource, in decimal number of bytes.",!0,!0),e("Content-Type","Indicates the media type of the resource.",
!0,!0),e("Cookie","Contains stored HTTP cookies previously sent by the server with the Set-Cookie header.",!0,!1),e("Date","The Date general HTTP header contains the date and time at which the message was originated.",!1,!0),e("ETag","A unique string identifying the version of the resource.",!1,!0),e("Expires","The date/time after which the response is considered stale.",!1,!0),e("Host","Specifies the domain name of the server (for virtual hosting), and (optionally) the TCP port number on which the server is listening.",
!0,!1),e("Last-Modified","The last modification date of the resource, used to compare several versions of the same resource.",!1,!0),e("Location","Indicates the URL to redirect a page to. ",!1,!0),e("Origin","Indicates where a fetch originates from.",!0,!1),e("Referer","The address of the previous web page from which a link to the currently requested page was followed.",!0,!1),e("Server","Contains information about the software used by the origin server to handle the request.",!1,!0),e("Set-Cookie",
"Send cookies from the server to the user-agent.",!1,!0),e("User-Agent","Contains a characteristic string that allows the network protocol peers to identify the application",!0,!1)];var f;c.getCommonHeaderByName=function(b){if(!f){f=new map.Map;for(var a=0,d=c.commonHeaders;a<d.length;a++){var g=d[a];f.set(g.key,g)}}return f.get(b)};c.dumpCommonHeaders=function(){var b=function(a,d,g){var h=!1;console.debug("\n::: "+a+" Headers");c.commonHeaders.forEach(function(k){k.req==d&&k.rsp==g&&(h=!0,console.debug(k.key+
": "+k.link),console.debug("  - "+k.description))});h||console.debug("none")};b("Common",!0,!0);b("Request",!0,!1);b("Response",!1,!0);b("Invalid",!1,!1)}})(header||(header={}));var request;
(function(c){function e(){return JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate(`/c/${collection.cache.active}/${request.cache.active}`);return false;",title:"close collection"}))}c.renderActionEmpty=function(){return JSX("div",null)};c.renderActionUnknown=function(f,b){return JSX("div",null,e(),"unknown action: ",f," (",b,")")};c.renderActionCall=function(f,b){return JSX("div",{id:f+"--"+b+"-call"},e(),JSX("div",{class:"call-title"},
"Loading..."),JSX("div",{class:"call-result"}))};c.renderActionClose=e})(request||(request={}));
(function(c){var e=function(){function f(){this.summaries=new map.Map;this.requests=new map.Map;this.extra=[]}f.prototype.setCollectionRequests=function(b,a){this.summaries.set(b.key,a);if(b.key===collection.cache.active){dom.setContent("#collection-panel",collection.renderCollection(b,a));for(var d=0;d<a.length;d++){var g=a[d];this.active===g.key&&(c.renderActiveRequest(b.key),this.action&&c.renderAction(b.key,g.key,this.action,this.extra))}}};f.prototype.setActiveRequest=function(b,a){b&&this.active!==
a&&((this.active=a)&&c.renderActiveRequest(b),collection.renderCollections(collection.cache.collections))};f.prototype.setActiveAction=function(b,a,d){b&&(this.extra.length===d.length&&this.extra.every(function(g,h){return g===d[h]}),this.active&&(this.action=a,this.extra=d,c.renderAction(b,this.active,this.action,this.extra)))};f.prototype.updateRequest=function(b,a){var d=this.requests.get(b);d=group.update(d,a,function(g){return g.key});this.requests.set(b,d);d=this.summaries.get(b);d=d.map(function(g){return g.key==
a.key?c.toSummary(a,0):g});this.summaries.set(b,d);collection.cache.active===b&&collection.renderCollection(collection.cache.getActiveCollection(),d)};f.prototype.removeRequest=function(b,a){var d=this.requests.get(b);d=group.remove(d,a,function(g){return g.key});this.requests.set(b,d);d=this.summaries.get(b);d=d.filter(function(g){return g.key!==a});this.summaries.set(b,d);collection.cache.active===b&&collection.renderCollection(collection.cache.getActiveCollection(),d);this.active===a&&c.cache.setActiveRequest(b,
void 0)};return f}();c.cache=new e})(request||(request={}));
(function(c){c.diff=function(e,f){var b=[],a=function(m,n,r){if(void 0===n||null===n)n="";if(void 0===r||null===r)r="";if("object"===typeof n&&"object"===typeof r){for(var q in n)n.hasOwnProperty(q)&&a(m+"."+q,n[q],r[q]);for(q in r)r.hasOwnProperty(q)&&!n.hasOwnProperty(q)&&a(m+"."+q,n[q],r[q])}else n!==r&&b.push({k:m,l:n,r:r})},d=function(m,n,r){if(void 0===n||null===n)n=[];if(void 0===r||null===r)r=[];n.length!==r.length&&b.push({k:m+".length",l:n.length,r:r.length});for(var q=0;q<n.length;q++)a(m+
"["+q+"]",n[q],r[q])},g=function(m,n,r){return e?f?!1:(b.push({k:m,l:"(defined)",r:null}),!0):(f&&b.push({k:m,l:null,r:"(defined)"}),!0)};if(g("request",e,f))return b;a("key",e.key,f.key);a("title",e.title,f.title);a("description",e.description,f.description);var h=e.prototype,k=f.prototype;a("method",h.method,k.method);a("protocol",h.protocol,k.protocol);a("domain",h.domain,k.domain);a("port",h.port,k.port);a("path",h.path,k.path);d("query",h.query,k.query);a("fragment",h.fragment,k.fragment);d("headers",
h.headers,k.headers);d("auth",h.auth,k.auth);!g("body",h.body,k.body)&&h.body&&k.body&&(a("body.type",h.body.type,k.body.type),a("body.config",h.body.config,k.body.config));h=h.options;k=k.options;if(g("options",h,k)||!h||!k)return b;a("timeout",h.timeout,k.timeout);a("ignoreRedirects",h.ignoreRedirects,k.ignoreRedirects);a("ignoreReferrer",h.ignoreReferrer,k.ignoreReferrer);a("ignoreCerts",h.ignoreCerts,k.ignoreCerts);a("ignoreCookies",h.ignoreCookies,k.ignoreCookies);d("excludeDefaultHeaders",h.excludeDefaultHeaders,
k.excludeDefaultHeaders);a("readCookieJars",h.readCookieJars,k.readCookieJars);a("writeCookieJar",h.writeCookieJar,k.writeCookieJar);a("sslCert",h.sslCert,k.sslCert);a("userAgentOverride",h.userAgentOverride,k.userAgentOverride);return b}})(request||(request={}));
(function(c){c.getSummary=function(e,f){var b=0;for(e=c.cache.summaries.get(e)||[];b<e.length;b++){var a=e[b];if(a.key===f)return a}};c.getRequest=function(e,f){var b=0;for(e=c.cache.requests.get(e)||[];b<e.length;b++){var a=e[b];if(a.key===f)return a}};c.toSummary=function(e,f){return{key:e.key,title:e.title,description:e.description,url:c.prototypeToURL(e.prototype),order:f}};c.onRequestMessage=function(e,f){var b=collection.cache.active;switch(e){case command.server.requestDetail:log.info("received details for request ["+
f.key+"]");c.cache.updateRequest(b,f);c.cache.active===f.key&&(c.renderActiveRequest(b),c.renderAction(b,c.cache.active,c.cache.action,c.cache.extra));break;case command.server.requestAdded:log.info("received details for new request ["+f.key+"]");c.cache.updateRequest(b,f);nav.navigate("/c/"+b+"/"+f.key);break;case command.server.requestDeleted:log.info("received details for deleted request ["+f+"]");c.cache.removeRequest(b,f);nav.navigate("/c/"+b);break;case command.server.callResult:call.setResult(f);
break;case command.server.transformResult:transform.setResult(f);break;default:console.warn("unhandled request command ["+e+"]")}}})(request||(request={}));
(function(c){c.MethodGet={key:"GET",description:""};c.MethodHead={key:"HEAD",description:""};c.MethodPost={key:"POST",description:""};c.MethodPut={key:"PUT",description:""};c.MethodPatch={key:"PATCH",description:""};c.MethodDelete={key:"DELETE",description:""};c.MethodConnect={key:"CONNECT",description:""};c.MethodOptions={key:"OPTIONS",description:""};c.MethodTrace={key:"TRACE",description:""};c.allMethods=[c.MethodGet,c.MethodHead,c.MethodPost,c.MethodPut,c.MethodPatch,c.MethodDelete,c.MethodConnect,
c.MethodOptions,c.MethodTrace]})(request||(request={}));
(function(c){function e(f,b,a,d,g,h,k){str.endsWith(f,":")&&(f=f.substr(0,f.length-1));str.startsWith(h,"#")&&(h=h.substr(1));return{method:"get",protocol:f,domain:b,port:a,path:d,query:g,fragment:h,auth:k}}c.prototypeFromURL=function(f){f=new URL(f);var b=[];f.searchParams.forEach(function(g,h){return b.push({k:h,v:g})});var a=[];0<f.username.length&&a.push({type:"basic",config:{username:f.username,password:f.password,showPassword:!0}});var d;f.port&&0<f.port.length&&(d=parseInt(f.port,10));return e(f.protocol,
f.hostname,d,f.pathname,b,f.hash,a)}})(request||(request={}));
(function(c){function e(f,b){var a=c.getRequest(f,b);if(a)dom.setContent("#request-panel",c.form.renderFormPanel(f,a)),c.editor.wireForm(a.key);else if(b=c.getSummary(f,b))dom.setContent("#request-panel",c.renderSummaryPanel(f,b)),socket.send({svc:services.request.key,cmd:command.client.getRequest,param:{coll:f,req:b.key}})}c.renderActiveRequest=function(f){c.cache.active?e(f,c.cache.active):console.warn("no active request")};c.render=e;c.renderAction=function(f,b,a,d){var g=dom.opt(".request-editor"),
h=dom.opt(".request-action");if(g&&h){switch(a){case void 0:dom.setContent(h,c.renderActionEmpty());break;case "call":call.prepare(f,c.form.extractRequest(c.cache.active));dom.setContent(h,c.renderActionCall(f,b));break;case "delete":socket.send({svc:services.request.key,cmd:command.client.deleteRequest,param:{coll:f,req:b}});break;case "transform":var k=c.form.extractRequest(c.cache.active);dom.setContent(h,transform.renderRequest(f,b,d[0]));socket.send({svc:services.request.key,cmd:command.client.transform,
param:{coll:f,req:b,fmt:d[0],proto:k.prototype}});break;default:console.warn("unhandled request action ["+a+"]"),dom.setContent(h,c.renderActionUnknown(a,d))}dom.setDisplay(g,void 0===a);dom.setDisplay(h,void 0!==a)}}})(request||(request={}));
(function(c){c.renderSummaryPanel=function(e,f){return JSX("div",null,JSX("div",{class:"uk-card uk-card-body uk-card-default"},JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate('/c/"+e+"');return false;",title:"close request"})),JSX("h3",{class:"uk-card-title"},f.title?f.title:f.key),JSX("p",null,"Loading...")))}})(request||(request={}));
(function(c){function e(d){d=new URL(d);return{method:c.MethodGet.key,protocol:str.trimSuffix(d.protocol,":"),domain:d.hostname,port:d.port?parseInt(d.port,10):void 0,path:str.trimPrefix(d.pathname,"/"),fragment:str.trimPrefix(d.hash,"#")}}function f(d){if(!d)return"invalid";var g=d.domain;d.port&&0<d.port&&(g+=":"+d.port);return d.protocol+"://"+g+"/"}function b(d){var g=[],h=function(r,q){g.push({t:r,v:q})};h("protocol",d.protocol);h("","://");if(d.auth)for(var k=0,m=d.auth;k<m.length;k++){var n=
m[k];if("basic"===n.type){k=n.config;h("username",k.username);h("",":");k.showPassword?h("password",k.password):h("password","****");h("","@");break}}h("domain",d.domain);d.port&&(h("",":"),h("port",d.port.toString()));d.path&&0<d.path.length&&(h("","/"),h("path",d.path));d.query&&0<d.query.length&&(h("","?"),k=d.query.map(function(r){return encodeURIComponent(r.k)+"="+encodeURIComponent(r.v)}).join("&"),h("query",k));d.fragment&&0<d.fragment.length&&(h("","#"),h("fragment",encodeURIComponent(d.fragment)));
return g}function a(d){switch(d){case "username":case "password":case "protocol":case "auth":return"green-fg";case "domain":case "port":return"blue-fg";case "path":return"bluegrey-fg";case "query":return"purple-fg";default:return""}}c.urlToPrototype=e;c.prototypeToURL=function(d){return b(d).map(function(g){return g.v}).join("")};c.prototypeToHTML=function(d){return JSX("span",null,b(d).map(function(g){return JSX("span",{title:g.t,class:a(g.t)},g.v)}))};c.baseURL=function(d){return f(e(d))};c.prototypeBaseURL=
f})(request||(request={}));
(function(c){(function(e){e.initAuthEditor=function(f){};e.setAuth=function(f,b){var a=new URL(f.url.value),d="",g="";if(b)for(var h=0;h<b.length;h++){var k=b[h];"basic"===k.type&&(g=k.config,d=encodeURIComponent(g.username),g=encodeURIComponent(g.password))}a.username=d;a.password=g;f.url.value=a.toString()};e.updateBasicAuth=function(f,b){var a=[];try{a=json.parse(f.auth.value)}catch(m){console.warn("invalid auth JSON ["+f.auth.value+"]")}var d=-1;a||(a=[]);for(var g=0;g<a.length;g++){var h=a[g];
"basic"===h.type&&(d=g)}if(b)for(g=0;g<b.length;g++)if(h=b[g],"basic"===h.type)var k=h.config;-1===d?k&&a.push({type:"basic",config:k}):k?(b=(b=a[d].config)?{username:k.username,password:k.password,showPassword:b.showPassword}:k,a[d]={type:"basic",config:b}):a.splice(d,1);f.auth.value=json.str(a)}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){function f(b){var a=json.parse(b.value);return JSX("div",{class:"uk-margin-top"},JSX("select",{class:"uk-select"},JSX("option",{value:""},"No body"),rbody.AllTypes.filter(function(d){return!d.hidden}).map(function(d){return a&&a.type===d.key?JSX("option",{value:d.key,selected:"selected"},d.title):JSX("option",{value:d.key},d.title)}),"\u02d9"),rbody.AllTypes.filter(function(d){return!d.hidden}).map(function(d){var g=a&&a.type==d.key?a.config:null;a:{var h=d.key,k="uk-margin-top body-editor-"+
h;d.key!==(a?a.type:"")&&(k+=" hidden");switch(h){case "json":d=JSX("div",{class:k},JSX("textarea",{class:"uk-textarea"},json.str(g?g.msg:null)));break a;default:d=JSX("div",{class:k},"Unimplemented [",h,"] editor")}}return d}))}e.initBodyEditor=function(b){b.parentElement.appendChild(f(b))};e.setBody=function(b,a){}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){function f(g,h){e.initURLEditor(h.url);e.initAuthEditor(h.auth);e.initQueryParamsEditor(h.qp);e.initHeadersEditor(h.headers);e.initBodyEditor(h.body);e.initOptionsEditor(h.options)}function b(g,h){var k=function(){h();return!0};g.onchange=k;g.onkeyup=k;g.onblur=k}function a(){c.form.checkEditor(collection.cache.active,c.cache.active)}function d(g){b(g.key,a);b(g.title,a);b(g.desc,a);b(g.method,a);b(g.url,function(){var h=c.prototypeFromURL(g.url.value);e.setURL(g,h);a()});
b(g.auth,function(){try{var h=json.parse(g.auth.value)}catch(k){console.warn("invalid auth JSON ["+g.auth.value+"]"),h=[]}e.setAuth(g,h);a()});b(g.qp,function(){try{var h=json.parse(g.qp.value)}catch(k){console.warn("invalid qp JSON ["+g.qp.value+"]"),h=[]}e.setQueryParams(g.url,h);a()});b(g.headers,function(){try{var h=json.parse(g.headers.value)}catch(k){console.warn("invalid headers JSON ["+g.headers.value+"]"),h=[]}e.setHeaders(g,h);a()});b(g.body,function(){try{var h=json.parse(g.body.value)}catch(k){console.warn("invalid body JSON ["+
g.body.value+"]")}e.setBody(g,h);a()})}e.wireForm=function(g){var h=function(k){return"#"+g+"-"+k};h={key:dom.req(h("key")),title:dom.req(h("title")),desc:dom.req(h("description")),url:dom.req(h("url")),method:dom.req(h("method")),auth:dom.req(h("auth")),qp:dom.req(h("queryparams")),headers:dom.req(h("headers")),body:dom.req(h("body")),options:dom.req(h("options"))};f(g,h);d(h)};e.events=b;e.check=a})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){function f(d){var g=JSX("ul",{id:d.id+"-ul",class:"uk-list uk-list-divider"}),h=json.parse(d.value);g.innerText="";g.appendChild(e.mapHeader(d.id,"addHeaderRow"));if(h)for(var k=0;k<h.length;k++)b(d.id,k,g,h[k]);return g}function b(d,g,h,k){g=e.newChild(d,g,k,"removeHeaderRow");h.appendChild(g);e.events(g,function(){return a(d)})}function a(d){var g=e.parseMapParams(d);dom.req("#"+d).value=json.str(g);e.check();return g}e.initHeadersEditor=function(d){d.parentElement.appendChild(f(d))};
e.setHeaders=function(d,g){};e.removeHeaderRow=function(d,g){g.parentElement.parentElement.parentElement.parentElement.remove();a(d);return!1};e.addHeaderRow=function(d){var g=dom.req("#"+d+"-ul");b(d,g.children.length-1,g,{k:"",v:""});return!1}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){e.mapHeader=function(f,b){return JSX("li",null,JSX("div",{"data-uk-grid":""},JSX("div",{class:"uk-width-1-4"},"Name"),JSX("div",{class:"uk-width-1-4"},"Value"),JSX("div",{class:"uk-width-1-2"},JSX("div",{class:"right"},JSX("a",{class:style.linkColor,href:"",onclick:"return request.editor."+b+"('"+f+"')",title:"new row"},JSX("span",{"data-uk-icon":"icon: plus"}))),"Description")))};e.newChild=function(f,b,a,d){return JSX("li",null,JSX("div",{"data-uk-grid":""},JSX("div",{class:"uk-width-1-4"},
JSX("input",{class:"uk-input","data-field":b+"-key",type:"text",value:a.k})),JSX("div",{class:"uk-width-1-4"},JSX("input",{class:"uk-input","data-field":b+"-value",type:"text",value:a.v})),JSX("div",{class:"uk-width-1-2"},JSX("div",{class:"right",style:"margin-top: 6px;"},JSX("a",{class:style.linkColor,href:"",onclick:"return request.editor."+d+"('"+f+"', this);",title:"remove row"},JSX("span",{"data-uk-icon":"icon: close"}))),JSX("input",{style:"width: calc(100% - 48px);",class:"uk-input","data-field":b+
"-desc",type:"text",value:a.desc}))))};e.parseMapParams=function(f){var b=dom.req("#"+f+"-ul");f=[];var a=0;for(b=dom.els("input",b);a<b.length;a++){var d=b[a],g=d.dataset.field||"",h=g.lastIndexOf("-"),k=parseInt(g.substring(0,h),10);g=g.substring(h+1);f[k]||(f[k]={k:"",v:""});switch(g){case "key":f[k].k=d.value.trim();break;case "value":f[k].v=d.value.trim();break;case "desc":d=d.value.trim();0<d.length&&(f[k].desc=d);break;default:throw"unknown key ["+g+"]";}}return f=f.filter(function(m){return 0<
m.k.length})}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){function f(l){var t=json.parse(l.value);t||(t={});return JSX("div",null,JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:l.id+"-timeout"},"Timeout"),d(l,t.timeout)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label"},"Ignore"),JSX("div",null,g(l,t.ignoreRedirects),h(l,t.ignoreReferrer),k(l,t.ignoreCerts),m(l,t.ignoreCookies))),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:l.id+"-excludeDefaultHeaders"},
"Exclude Default Headers"),n(l,t.excludeDefaultHeaders)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:l.id+"-readCookieJars"},"Read Cookie Jars"),r(l,t.readCookieJars)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:l.id+"writeCookieJar"},"Write Cookie Jar"),q(l,t.writeCookieJar)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:l.id+"-sslCert"},"SSL Cert"),v(l,t.sslCert)),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",
for:l.id+"-userAgentOverride"},"User Agent Override"),w(l,t.userAgentOverride)))}function b(l,t,p,u){l="opt-"+t;return u?JSX("label",{class:"uk-margin-right"},JSX("input",{type:"checkbox",name:l,value:"true",checked:!0})," ",p):JSX("label",{class:"uk-margin-right"},JSX("input",{type:"checkbox",name:l,value:"true"})," ",p)}function a(l,t,p){e.events(l,function(){var u=json.parse(p.value);t(u);p.value=json.str(u);e.check()})}function d(l,t){var p=JSX("input",{class:"uk-input",id:l.id+"-timeout",name:"opt-timeout",
type:"number",value:t||0});a(p,function(u){return u.timeout=parseInt(p.value,10)},l);return p}function g(l,t){var p=b(l.id,"ignoreRedirects","Redirects",t||!1);a(p,function(u){return u.ignoreRedirects=dom.req("input",p).checked},l);return p}function h(l,t){var p=b(l.id,"ignoreReferrer","Referrer",t||!1);a(p,function(u){return u.ignoreReferrer=dom.req("input",p).checked},l);return p}function k(l,t){var p=b(l.id,"ignoreCerts","Certs",t||!1);a(p,function(u){return u.ignoreCerts=dom.req("input",p).checked},
l);return p}function m(l,t){var p=b(l.id,"ignoreCookies","Cookies",t||!1);a(p,function(u){return u.ignoreCookies=dom.req("input",p).checked},l);return p}function n(l,t){var p=JSX("input",{class:"uk-input",id:l.id+"-excludeDefaultHeaders",name:"opt-excludeDefaultHeaders",type:"text",value:t});a(p,function(u){return u.excludeDefaultHeaders=p.value.split(",").map(function(x){return x.trim()})},l);return p}function r(l,t){var p=JSX("input",{class:"uk-input",id:l.id+"-readCookieJars",name:"opt-readCookieJars",
type:"text",value:t});a(p,function(u){return u.readCookieJars=p.value.split(",").map(function(x){return x.trim()})},l);return p}function q(l,t){var p=JSX("input",{class:"uk-input",id:l.id+"-writeCookieJar",name:"opt-writeCookieJar",type:"text",value:t});a(p,function(u){return u.writeCookieJar=p.value},l);return p}function v(l,t){var p=JSX("input",{class:"uk-input",id:l.id+"-sslCert",name:"opt-sslCert",type:"text",value:t});a(p,function(u){return u.sslCert=p.value},l);return p}function w(l,t){var p=
JSX("input",{class:"uk-input",id:l.id+"-userAgentOverride",name:"opt-userAgentOverride",type:"text",value:t||""});a(p,function(u){return u.userAgentOverride=p.value},l);return p}e.initOptionsEditor=function(l){l.parentElement.appendChild(f(l))}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){function f(h,k){var m=[];if(k)for(var n=0;n<k.length;n++){var r=k[n],q=encodeURIComponent(r.k);0<r.v.length&&(q+="="+encodeURIComponent(r.v));m.push(q)}n=h.value;k="";r=n.indexOf("#");-1<r&&(k=n.substr(r+1));r=n.indexOf("?");m=-1===r?n+"?"+m.join("&"):n.substr(0,r)+"?"+m.join("&");0<k.length&&(m+="#"+encodeURIComponent(k));h.value=m}function b(h,k){var m=json.parse(h.value);k.innerText="";k.appendChild(e.mapHeader(h.id,"addQueryParamRow"));if(m)for(var n=0;n<m.length;n++)d(h.id,
n,k,m[n])}function a(h){var k=JSX("ul",{id:h.id+"-ul",class:"uk-list uk-list-divider"});b(h,k);return k}function d(h,k,m,n){k=e.newChild(h,k,n,"removeQueryParamRow");m.appendChild(k);e.events(k,function(){return g(h)})}function g(h){var k=e.parseMapParams(h);dom.req("#"+h).value=json.str(k);f(dom.req("#"+h.replace("queryparams","url")),k);e.check();return k}e.initQueryParamsEditor=function(h){h.parentElement.appendChild(a(h))};e.setQueryParams=f;e.updateQueryParams=function(h,k){h.qp.value=json.str(k);
b(h.qp,dom.req("#"+h.qp.id+"-ul"))};e.removeQueryParamRow=function(h,k){k.parentElement.parentElement.parentElement.parentElement.remove();g(h);return!1};e.addQueryParamRow=function(h){var k=dom.req("#"+h+"-ul");d(h,k.children.length-1,k,{k:"",v:""});return!1}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){e.initURLEditor=function(f){};e.setURL=function(f,b){b?(e.updateQueryParams(f,b.query),e.updateBasicAuth(f,b.auth)):f.qp.value="[]"}})(c.editor||(c.editor={}))})(request||(request={}));
(function(c){(function(e){function f(a){var d=b(a,"key"),g=b(a,"title"),h=b(a,"description"),k=b(a,"url");k=c.urlToPrototype(k);k.method=b(a,"method");k.query=json.parse(b(a,"queryparams"));k.headers=json.parse(b(a,"headers"));k.auth=json.parse(b(a,"auth"));k.body=json.parse(b(a,"body"));k.options=json.parse(b(a,"options"));return{key:d,title:g,description:h,prototype:k}}function b(a,d){return dom.req("#"+a+"-"+d).value}e.extractRequest=f;e.checkEditor=function(a,d){(a=c.getRequest(a,d))?(d=f(d),
d=0<c.diff(a,d).length):d=!0;dom.setDisplay("#save-panel",d)};e.saveCurrentRequest=function(a,d){var g=f(d);socket.send({svc:services.request.key,cmd:command.client.saveRequest,param:{coll:a,orig:d,req:g}})}})(c.form||(c.form={}))})(request||(request={}));
(function(c){(function(e){function f(a,d){var g="/c/"+a+"/"+d.key;a="if (!confirm('Are you sure you want to delete request ["+d.key+"]?')) { return false; }";return JSX("div",null,nav.link({path:g+"/call",title:"Call",cls:"uk-button uk-button-default uk-margin-small-right uk-margin-top",isButton:!0}),JSX("div",{class:"uk-inline"},JSX("button",{type:"button",class:"uk-button uk-button-default uk-margin-small-right uk-margin-top"},"Export"),JSX("div",{id:"export-dropdown","uk-dropdown":"mode: click"},
JSX("ul",{class:"uk-list uk-list-divider",style:"margin-bottom: 0;"},Object.keys(b).map(function(h){return JSX("li",null,nav.link({path:g+"/transform/"+h,title:b[h],onclk:"UIkit.dropdown(dom.req('#export-dropdown')).hide(false);"}))})))),nav.link({path:g+"/delete",title:"Delete",cls:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclk:a,isButton:!0}))}e.renderFormPanel=function(a,d){var g=JSX("div",{class:"right"},JSX("a",{class:"theme uk-icon","data-uk-icon":"close",href:"",onclick:"nav.navigate('/c/"+
a+"');return false;",title:"close request"})),h=JSX("h3",{class:"uk-card-title"},d.title?d.title:d.key),k=e.renderURL(a,d);var m=JSX("div",{id:"save-panel",class:"right hidden"},JSX("button",{class:"uk-button uk-button-default uk-margin-small-right uk-margin-top",onclick:"request.form.reset('"+a+"', '"+d.key+"');"},"Reset"),JSX("button",{class:"uk-button uk-button-default uk-margin-top",onclick:"request.form.saveCurrentRequest('"+a+"', '"+d.key+"');"},"Save Changes"));return JSX("div",null,JSX("div",
{class:"uk-card uk-card-body uk-card-default"},g,h,k,m,f(a,d)),JSX("div",{class:"request-editor uk-card uk-card-body uk-card-default uk-margin-top"},JSX("form",{action:"",method:"post",onsubmit:"console.log('XXXXXXX');return false;"},e.renderSwitcher(d))),JSX("div",{class:"request-action uk-card uk-card-body uk-card-default uk-margin-top hidden"}))};e.renderDetails=function(a){return JSX("li",{class:"request-details-panel"},JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:a.key+
"-key"},"Key"),JSX("input",{class:"uk-input",id:a.key+"-key",name:"key",type:"text",value:a.key||"","data-lpignore":"true"})),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:a.key+"-title"},"Title"),JSX("input",{class:"uk-input",id:a.key+"-title",name:"title",type:"text",value:a.title||"","data-lpignore":"true"})),JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:a.key+"-description"},"Description"),JSX("textarea",{class:"uk-textarea",id:a.key+"-description",
name:"description","data-lpignore":"true"},a.description||"")))};e.reset=function(a,d){c.render(a,d)};var b={http:"HTTP",json:"JSON",curl:"curl"}})(c.form||(c.form={}))})(request||(request={}));
(function(c){(function(e){e.renderSwitcher=function(f){var b=f.key,a=f.prototype,d=JSX("ul",{"data-uk-tab":""},JSX("li",null,JSX("a",{href:"#details"},"Details")),JSX("li",null,JSX("a",{href:"#query"},"Query")),JSX("li",null,JSX("a",{href:"#auth"},"Auth")),JSX("li",null,JSX("a",{href:"#headers"},"Headers")),JSX("li",null,JSX("a",{href:"#body"},"Body")),JSX("li",null,JSX("a",{href:"#options"},"Options")));f=e.renderDetails(f);var g=JSX("li",{class:"request-queryparams-panel"},JSX("div",{class:"uk-margin-top"},
JSX("textarea",{class:"uk-textarea hidden",id:b+"-queryparams",name:"queryparams"},json.str(a.query))));var h=a.auth;h=JSX("li",{class:"request-auth-panel"},JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:b+"-auth"},"Auth"),JSX("textarea",{class:"uk-textarea",id:b+"-auth",name:"auth"},json.str(h))));var k=JSX("li",{class:"request-headers-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea hidden",id:b+"-headers",name:"headers"},json.str(a.headers))));
var m=a.body;m=JSX("li",{class:"request-body-panel"},JSX("div",{class:"uk-margin-top"},JSX("label",{class:"uk-form-label",for:b+"-body"},"Body"),JSX("textarea",{class:"uk-textarea",id:b+"-body",name:"body"},json.str(m))));return JSX("div",null,d,JSX("ul",{class:"uk-switcher uk-margin"},f,g,h,k,m,JSX("li",{class:"request-options-panel"},JSX("div",{class:"uk-margin-top"},JSX("textarea",{class:"uk-textarea",id:b+"-options",name:"options"},json.str(a.options))))))}})(c.form||(c.form={}))})(request||(request=
{}));
(function(c){(function(e){e.renderURL=function(f,b){f="nav.navigate(`/c/"+f+"/"+b.key+"/call`);return false;";return JSX("div",{class:"uk-margin-top uk-panel"},JSX("div",{class:"left",style:"width:120px;"},JSX("select",{class:"uk-select",id:b.key+"-method",name:"method"},c.allMethods.map(function(a){return a.key===b.prototype.method?JSX("option",{selected:"selected"},a.key):JSX("option",null,a.key)}))),JSX("div",{class:"uk-inline right",style:"width:calc(100% - 120px);"},JSX("a",{class:"uk-form-icon uk-form-icon-flip",href:"",
onclick:f,title:"send request","uk-icon":"icon: play"}),JSX("form",{onsubmit:f},JSX("input",{class:"uk-input",id:b.key+"-url",name:"url",type:"text",value:c.prototypeToURL(b.prototype),"data-lpignore":"true"}))))}})(c.form||(c.form={}))})(request||(request={}));var transform;
(function(c){c.renderRequest=function(e,f,b){return JSX("div",{id:e+"--"+f+"-transform"},request.renderActionClose(),JSX("div",{class:"transform-title"},b),JSX("div",{class:"transform-result"}))};c.setResult=function(e){var f=dom.req("#"+e.coll+"--"+e.req+"-transform .transform-result");dom.setContent(f,JSX("div",{class:"uk-margin-top"},JSX("pre",null,e.out)));log.info("call result ["+e.coll+"/"+e.req+": "+e.fmt+"] received")}})(transform||(transform={}));var system;
(function(c){var e=function(){function f(){}f.prototype.getProfile=function(){if(!this.profile)throw"no active profile";return this.profile};f.prototype.apply=function(b){c.cache.profile=b.profile};return f}();c.cache=new e})(system||(system={}));
(function(c){c.onSystemMessage=function(e,f){switch(e){case command.server.error:console.warn("error from server: "+f);break;case command.server.connected:c.cache.apply(f);break;default:console.warn("unhandled system command ["+e+"]")}}})(system||(system={}));var __spreadArrays=this&&this.__spreadArrays||function(){for(var c=0,e=0,f=arguments.length;e<f;e++)c+=arguments[e].length;c=Array(c);var b=0;for(e=0;e<f;e++)for(var a=arguments[e],d=0,g=a.length;d<g;d++,b++)c[b]=a[d];return c},ui;
(function(c){function e(a){for(var d=a.childElementCount-1;0<=d;d--){var g=a.children[d];g.classList.contains("dynamic")&&a.removeChild(g)}}function f(){return JSX("span",{class:"uk-navbar-item dynamic",style:"padding: 0 8px;"}," / ")}function b(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];d=d.map(function(h){return"/"+h}).join("");return nav.link({path:d,title:a,cls:"uk-navbar-item uk-logo uk-margin-remove uk-padding-remove dynamic"})}c.setBreadcrumbs=function(a,d,g,h){var k=dom.req("#breadcrumbs");
e(k);k.appendChild(nav.link({path:"/",title:"npn",cls:"uk-navbar-item uk-logo uk-margin-remove uk-padding-remove dynamic"}));if(a&&(k.appendChild(f()),k.appendChild(b(a,"c",a)),d&&(k.appendChild(f()),k.appendChild(b(d,"c",a,d)),g&&(k.appendChild(f()),k.appendChild(b(g,"c",a,d,g)),h&&0<h.length))))for(var m=0;m<h.length;m++){k.appendChild(f());var n=[a,d,g];n.push.apply(n,h.slice(0,m));k.appendChild(b.apply(void 0,__spreadArrays([h[m]],n)))}};c.reset=e})(ui||(ui={}));
(function(c){c.setPanels=function(e,f,b,a){dom.setDisplay("#welcome-panel",void 0===e);dom.setDisplay("#collection-panel",void 0!==e&&0<e.length&&void 0===f);dom.setDisplay("#request-panel",void 0!==f&&0<f.length);c.setBreadcrumbs(e,f,b,a);a="";b&&(a+=b+" ");e&&(a+=e);f&&(a+="/"+f);a=0==a.length?"npn":"npn: "+a;document.title=a}})(ui||(ui={}));
