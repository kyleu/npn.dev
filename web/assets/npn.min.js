var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,c){a.raw=c;return a};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var c,e=[];!(c=a.next()).done;)e.push(c.value);return e};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var e=a[c];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(e,d,b){return e==a&&"q"==d&&b==c}}));return!0===c.q}catch(e){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,e){if(a==Array.prototype||a==Object.prototype)return a;a[c]=e.value;return a};$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};
$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,c){var e=$jscomp.propertyToPolyfillSymbol[c];if(null==e)return a[c];e=a[e];return void 0!==e?e:a[c]};$jscomp.polyfill=function(a,c,e,d){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,c,e,d):$jscomp.polyfillUnisolated(a,c,e,d))};
$jscomp.polyfillUnisolated=function(a,c,e,d){e=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var b=a[d];if(!(b in e))return;e=e[b]}a=a[a.length-1];d=e[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(a,c,e,d){var b=a.split(".");a=1===b.length;d=b[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<b.length-1;f++){var h=b[f];if(!(h in d))return;d=d[h]}b=b[b.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?d[b]:null;c=c(e);null!=c&&(a?$jscomp.defineProperty($jscomp.polyfills,b,{configurable:!0,writable:!0,value:c}):c!==e&&($jscomp.propertyToPolyfillSymbol[b]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(b):$jscomp.POLYFILL_PREFIX+b,b=
$jscomp.propertyToPolyfillSymbol[b],$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var c=function(b,f){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var e=0,d=function(b){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(b||"")+"_"+e++,b)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<c.length;e++){var d=$jscomp.global[c[e]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var k=Object.seal({}),l=Object.seal({}),n=new a([[k,2],[l,3]]);if(2!=n.get(k)||3!=n.get(l))return!1;n.delete(k);n.set(l,4);return!n.has(k)&&4==n.get(l)}catch(p){return!1}}function e(){}function d(k){var l=typeof k;return"object"===l&&null!==k||"function"===l}function b(k){if(!$jscomp.owns(k,h)){var l=new e;$jscomp.defineProperty(k,h,{value:l})}}function f(k){if(!$jscomp.ISOLATE_POLYFILLS){var l=Object[k];l&&(Object[k]=
function(n){if(n instanceof e)return n;Object.isExtensible(n)&&b(n);return l(n)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var m=0,g=function(k){this.id_=(m+=Math.random()+1).toString();if(k){k=$jscomp.makeIterator(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}};g.prototype.set=function(k,l){if(!d(k))throw Error("Invalid WeakMap key");
b(k);if(!$jscomp.owns(k,h))throw Error("WeakMap key fail: "+k);k[h][this.id_]=l;return this};g.prototype.get=function(k){return d(k)&&$jscomp.owns(k,h)?k[h][this.id_]:void 0};g.prototype.has=function(k){return d(k)&&$jscomp.owns(k,h)&&$jscomp.owns(k[h],this.id_)};g.prototype.delete=function(k){return d(k)&&$jscomp.owns(k,h)&&$jscomp.owns(k[h],this.id_)?delete k[h][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),k=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=k.get(g)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var l=k.entries(),n=l.next();if(n.done||n.value[0]!=g||"s"!=n.value[1])return!1;n=l.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!l.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;var e=new WeakMap,d=function(g){this.data_={};this.head_=h();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var k;!(k=g.next()).done;)k=k.value,this.set(k[0],k[1])}};d.prototype.set=function(g,k){g=0===g?0:g;var l=b(this,g);l.list||(l.list=this.data_[l.id]=[]);l.entry?l.entry.value=k:(l.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:k},l.list.push(l.entry),
this.head_.previous.next=l.entry,this.head_.previous=l.entry,this.size++);return this};d.prototype.delete=function(g){g=b(this,g);return g.entry&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.data_[g.id],g.entry.previous.next=g.entry.next,g.entry.next.previous=g.entry.previous,g.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};d.prototype.has=function(g){return!!b(this,g).entry};d.prototype.get=function(g){return(g=
b(this,g).entry)&&g.value};d.prototype.entries=function(){return f(this,function(g){return[g.key,g.value]})};d.prototype.keys=function(){return f(this,function(g){return g.key})};d.prototype.values=function(){return f(this,function(g){return g.value})};d.prototype.forEach=function(g,k){for(var l=this.entries(),n;!(n=l.next()).done;)n=n.value,g.call(k,n[1],n[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var b=function(g,k){var l=k&&typeof k;"object"==l||"function"==l?e.has(k)?l=e.get(k):
(l=""+ ++m,e.set(k,l)):l="p_"+k;var n=g.data_[l];if(n&&$jscomp.owns(g.data_,l))for(g=0;g<n.length;g++){var p=n[g];if(k!==k&&p.key!==p.key||k===p.key)return{id:l,list:n,index:g,entry:p}}return{id:l,list:n,index:-1,entry:void 0}},f=function(g,k){var l=g.head_;return $jscomp.iteratorPrototype(function(){if(l){for(;l.head!=g.head_;)l=l.previous;for(;l.next!=l.head;)return l=l.next,{done:!1,value:k(l)};l=null}return{done:!0,value:void 0}})},h=function(){var g={};return g.previous=g.next=g.head=g},m=0;
return d},"es6","es3");$jscomp.findInternal=function(a,c,e){a instanceof String&&(a=String(a));for(var d=a.length,b=0;b<d;b++){var f=a[b];if(c.call(e,f,b,a))return{i:b,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(c,e){return $jscomp.findInternal(this,c,e).v}},"es6","es3");var npn;
(function(a){a.onError=function(c,e){console.error(c+": "+e);var d=e.lastIndexOf(":");-1<d&&(e=e.substr(d+1));notify.notify(c+" error: "+e,!1)};a.init=function(c,e){window.onbeforeunload=function(){socket.setAppUnloading()};socket.socketConnect(c,e)}})(npn||(npn={}));var dom;
(function(a){function c(h,m){var g=[];(m?m.querySelectorAll(h):document.querySelectorAll(h)).forEach(function(k){g.push(k)});return g}function e(h,m){m=c(h,m);switch(m.length){case 0:break;case 1:return m[0];default:console.warn("found ["+m.length+"] elements with selector ["+h+"], wanted zero or one")}}function d(h,m){(m=e(h,m))||console.warn("no element found for selector ["+h+"]");return m}function b(h,m){"string"===typeof h&&(h=d(h));h.innerHTML=m;return h}function f(h,m,g){g=void 0===g?"block":
g;"string"===typeof h&&(h=d(h));h.style.display=m?g:"none";return h}a.initDom=function(h,m){try{style.themeLinks(m),style.setTheme(h)}catch(g){console.warn("error setting style",g)}try{modal.wire()}catch(g){console.warn("error wiring modals",g)}try{drop.wire()}catch(g){console.warn("error wiring drops",g)}try{tags.wire()}catch(g){console.warn("error wiring tag editors",g)}};a.els=c;a.opt=e;a.req=d;a.setHTML=b;a.setDisplay=f;a.setContent=function(h,m){"string"===typeof h&&(h=d(h));a.clear(h);h.appendChild(m);
return h};a.setText=function(h,m){"string"===typeof h&&(h=d(h));h.innerText=m;return h};a.switchElements=function(h,m){f(h,!1);f(m,!0);return!1};a.clear=function(h){return b(h,"")}})(dom||(dom={}));
(function(a){a.setValue=function(c,e){"string"===typeof c&&(c=a.req(c));c.value=e;return c};a.wireTextarea=function(c){function e(){c.style.height="auto";c.style.height=(64>c.scrollHeight?64:c.scrollHeight+6)+"px"}function d(){window.setTimeout(e,0)}c.dataset.autoresize||(c.dataset.autoresize="true",c.addEventListener("change",e,!1),c.addEventListener("cut",d,!1),c.addEventListener("paste",d,!1),c.addEventListener("drop",d,!1),c.addEventListener("keydown",d,!1),c.focus(),c.select());e()};a.setOptions=
function(c,e){"string"===typeof c&&(c=a.req(c));a.clear(c);e.forEach(function(d){var b=document.createElement("option");b.value=d;a.setText(b,d);c.appendChild(b)})};a.setSelectOption=function(c,e){"string"===typeof c&&(c=a.req(c));for(var d=0;d<c.children.length;d++){var b=c.children.item(d);b.selected=b.value===e}};a.insertAtCaret=function(c,e){if(c.selectionStart||0===c.selectionStart){var d=c.selectionStart,b=c.selectionEnd;c.value=c.value.substring(0,d)+e+c.value.substring(b,c.value.length);c.selectionStart=
d+e.length;c.selectionEnd=d+e.length}else c.value+=e}})(dom||(dom={}));
function JSX(a,c){var e=document.createElement(a),d;for(d in c)if(d&&c.hasOwnProperty(d)){var b=c[d];"dangerouslySetInnerHTML"===d?dom.setHTML(e,b.__html):!0===b?e.setAttribute(d,d):!1!==b&&null!==b&&void 0!==b&&e.setAttribute(d,b.toString())}for(d=2;d<arguments.length;d++)if(b=arguments[d],Array.isArray(b))b.forEach(function(f){e.appendChild(f)});else{if(void 0===b||null===b)throw"child for tag ["+a+"] is "+b;b.nodeType||(b=document.createTextNode(b.toString()));e.appendChild(b)}return e}var style;
(function(a){function c(d){e(d);var b=dom.els(".uk-card");switch(d){case "auto":d="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(d="dark");c(d);fetch("/profile/theme/"+d).then(function(f){return f.text()}).then(function(){});break;case "light":document.documentElement.classList.remove("uk-light");document.body.classList.remove("uk-light");document.documentElement.classList.add("uk-dark");document.body.classList.add("uk-dark");b.forEach(function(f){f.classList.add("uk-card-default");
f.classList.remove("uk-card-secondary")});break;case "dark":document.documentElement.classList.add("uk-light");document.body.classList.add("uk-light");document.documentElement.classList.remove("uk-dark");document.body.classList.remove("uk-dark");b.forEach(function(f){f.classList.remove("uk-card-default");f.classList.add("uk-card-secondary")});break;default:console.warn("invalid theme")}}function e(d){if("undefined"===typeof EmojiButton)dom.els(".picker-toggle").forEach(function(f){return dom.setDisplay(f,
!1)});else{var b={position:"bottom-end",theme:d,zIndex:1021};dom.els(".textarea-emoji").forEach(function(f){var h=dom.req(".picker-toggle",f);h.addEventListener("click",function(){var m=dom.req(".uk-textarea",f),g=new EmojiButton(b);g.on("emoji",function(k){drop.onEmojiPicked();dom.insertAtCaret(m,k)});g.togglePicker(h)},!1)})}}a.setTheme=c;a.themeLinks=function(d){dom.els(".theme").forEach(function(b){b.classList.add(d+"-fg")})}})(style||(style={}));var drop;
(function(a){function c(f){if(f.target){var h=f.target;f=h.dataset.key||"";h=h.dataset.t||"";var m=events.getOpenEvent(f);m?m(h):console.warn("no drop open handler registered for ["+f+"]")}}function e(f){if(f.target){var h=f.target;h.classList.contains("uk-open")&&(f=h.dataset.t||"",(h=events.getCloseEvent(h.dataset.key||""))&&h(f))}}function d(f){b&&f.preventDefault()}a.wire=function(){dom.els(".drop").forEach(function(f){f.addEventListener("show",c);f.addEventListener("beforehide",d);f.addEventListener("hide",
e)})};var b=!1;a.onEmojiPicked=function(){b=!0;setTimeout(function(){return b=!1},200)}})(drop||(drop={}));var events;(function(a){var c=new Map,e=new Map;a.register=function(d,b,f){b||(b=function(){});c.set(d,b);f&&e.set(d,f)};a.getOpenEvent=function(d){return c.get(d)};a.getCloseEvent=function(d){return e.get(d)}})(events||(events={}));var modal;
(function(a){function c(f,h){b=h;notify.modal("#modal-"+f).show();return!1}function e(f){if(f.target&&(f=f.target,0===f.id.indexOf("modal"))){f=f.id.substr(6);var h=events.getOpenEvent(f);h?h(b):console.warn("no modal open handler registered for ["+f+"]");b=void 0}}function d(f){f.target&&(f=f.target,f.classList.contains("uk-open")&&(f=f.id.substr(6),(f=events.getCloseEvent(f))&&f(b),b=void 0))}var b;a.wire=function(){dom.els(".modal").forEach(function(f){f.addEventListener("show",e);f.addEventListener("hide",
d)})};a.open=c;a.openSoon=function(f){setTimeout(function(){return c(f)},0)};a.hide=function(f){f=notify.modal("#modal-"+f);f.$el.classList.contains("uk-open")&&f.hide()}})(modal||(modal={}));var tags;
(function(a){function c(b){var f=dom.req(".value",b),h=dom.req(".editor",b);dom.setDisplay(f,!1);dom.setDisplay(h,!0);var m=a.renderInput(f.innerText);m.onblur=function(){f.innerText=m.value;dom.setDisplay(f,!0);dom.setDisplay(h,!1);d(b.parentElement)};m.onkeypress=function(g){return"Enter"===g.key?(m.blur(),!1):!0};dom.setContent(h,m);m.focus()}function e(b){b.target?d(b.target):console.warn("no event target")}function d(b){var f=b.dataset.key||"",h=events.getOpenEvent(f);h?h():console.warn("no tag open handler registered for ["+
f+"]");b=dom.els(".item",b).map(function(m){return m.innerText});dom.setValue("#model-"+f+"-input",b.join(","))}a.wire=function(){dom.els(".tag-editor").forEach(function(b){b.addEventListener("moved",e);b.addEventListener("added",e);b.addEventListener("removed",e)})};a.removeTag=function(b){b=b.parentElement;var f=b.parentElement;b.remove();d(f)};a.addTag=function(b){if(b=b.parentElement){var f=a.renderItem();b.insertBefore(f,dom.req(".add-item",b));c(f)}};a.editTag=c})(tags||(tags={}));
(function(a){a.renderInput=function(c){return JSX("input",{type:"text",class:"uk-input",value:c})};a.renderItem=function(){return JSX("span",{class:"item"},JSX("span",{class:"value",onclick:"tags.editTag(this.parentElement);"}),JSX("span",{class:"editor"}),JSX("span",{class:"close","data-uk-icon":"icon: close; ratio: 0.6;",onclick:"tags.removeTag(this);"}))};a.renderTagsView=function(c){return JSX("div",{class:"tag-view"},c.map(function(e){return JSX("span",{class:"item"},e)}),JSX("div",{class:"clear"}))}})(tags||
(tags={}));var socket;
(function(a){function c(){var g=document.location,k="ws";"https:"===g.protocol&&(k="wss");return k+("://"+g.host+"/s")}function e(g,k){h=new WebSocket(c());h.onopen=function(){d({svc:g,cmd:"connect",param:k})};h.onmessage=function(l){l=JSON.parse(l.data);b(l)};h.onerror=function(l){};h.onclose=function(){f()}}function d(g){console.debug("out",g);h.send(JSON.stringify(g))}function b(g){console.debug("in",g);console.warn("unhandled message for service ["+g.svc+"]")}function f(){function g(k){console.info("socket closed, reconnecting in "+k+
" seconds");setTimeout(function(){e("","")},1E3*k)}m||g(10)}var h,m=!1;a.setAppUnloading=function(){m=!0};a.socketConnect=e;a.send=d;a.onSocketMessage=b})(socket||(socket={}));var profile;
(function(a){a.setNavColor=function(c,e){dom.setValue("#nav-color",e);dom.req("#navbar").className=e+"-bg uk-navbar-container uk-navbar";document.querySelectorAll(".nav_swatch").forEach(function(d){d.classList.remove("active")});c.classList.add("active")};a.setLinkColor=function(c,e){dom.setValue("#link-color",e);dom.els(".profile-link").forEach(function(d){d.classList.forEach(function(b){-1<b.indexOf("-fg")&&d.classList.remove(b);d.classList.add(e+"-fg")})});document.querySelectorAll(".link_swatch").forEach(function(d){d.classList.remove("active")});
c.classList.add("active")}})(profile||(profile={}));var collection;
(function(a){var c=function(d){this.members=[];this.key=d};a.Group=c;var e=function(){this.groups=[]};e.prototype.findOrInsert=function(d){var b=this.groups.find(function(f){return f.key===d});if(b)return b;b=new c(d);this.groups.push(b);return b};a.GroupSet=e;a.groupBy=function(d,b){var f=new e;d&&d.forEach(function(h){f.findOrInsert(b(h)).members.push(h)});return f};a.findGroup=function(d,b){d=$jscomp.makeIterator(d);for(var f=d.next();!f.done;f=d.next())if(f=f.value,f.key===b)return f.members;
return[]};a.flatten=function(d){var b=[];d.forEach(function(f){return b.push.apply(b,$jscomp.arrayFromIterable(f))});return b}})(collection||(collection={}));var date;
(function(a){function c(b){return b.toLocaleDateString()}function e(b){return b.toLocaleTimeString().slice(0,8)}a.dateToYMD=function(b){var f=b.getDate(),h=b.getMonth()+1;return b.getFullYear()+"-"+(9>=h?"0"+h:h)+"-"+(9>=f?"0"+f:f)};a.dateFromYMD=function(b){b=new Date(b);return new Date(b.getTime()+6E4*b.getTimezoneOffset())};a.dow=function(b){switch(b){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return"???"}};
a.toDateString=c;a.toTimeString=e;a.toDateTimeString=function(b){return c(b)+" "+e(b)};var d=6E4*(new Date).getTimezoneOffset();a.utcDate=function(b){return new Date(Date.parse(b)+d)}})(date||(date={}));var notify;(function(a){a.notify=function(c,e){UIkit.notification(c,{status:e?"success":"danger",pos:"top-right"})};a.confirm=function(c,e){UIkit.modal.confirm(c).then(e)};a.modal=function(c){var e=UIkit.modal(c);e||console.warn("no modal available with key ["+c+"]");return e}})(notify||(notify={}));
